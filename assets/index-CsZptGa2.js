(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(c){if(c.ep)return;c.ep=!0;const h=r(c);fetch(c.href,h)}})();var Lc={exports:{}},Sr={};var Zm;function b_(){if(Zm)return Sr;Zm=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(l,c,h){var f=null;if(h!==void 0&&(f=""+h),c.key!==void 0&&(f=""+c.key),"key"in c){h={};for(var g in c)g!=="key"&&(h[g]=c[g])}else h=c;return c=h.ref,{$$typeof:s,type:l,key:f,ref:c!==void 0?c:null,props:h}}return Sr.Fragment=a,Sr.jsx=r,Sr.jsxs=r,Sr}var Im;function S_(){return Im||(Im=1,Lc.exports=b_()),Lc.exports}var m=S_(),Bc={exports:{}},wr={},Hc={exports:{}},$c={};var Wm;function w_(){return Wm||(Wm=1,(function(s){function a(q,M){var ne=q.length;q.push(M);e:for(;0<ne;){var pe=ne-1>>>1,De=q[pe];if(0<c(De,M))q[pe]=M,q[ne]=De,ne=pe;else break e}}function r(q){return q.length===0?null:q[0]}function l(q){if(q.length===0)return null;var M=q[0],ne=q.pop();if(ne!==M){q[0]=ne;e:for(var pe=0,De=q.length,A=De>>>1;pe<A;){var $=2*(pe+1)-1,J=q[$],I=$+1,he=q[I];if(0>c(J,ne))I<De&&0>c(he,J)?(q[pe]=he,q[I]=ne,pe=I):(q[pe]=J,q[$]=ne,pe=$);else if(I<De&&0>c(he,ne))q[pe]=he,q[I]=ne,pe=I;else break e}}return M}function c(q,M){var ne=q.sortIndex-M.sortIndex;return ne!==0?ne:q.id-M.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var v=[],y=[],w=1,x=null,O=3,C=!1,B=!1,V=!1,Y=!1,K=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ie(q){for(var M=r(y);M!==null;){if(M.callback===null)l(y);else if(M.startTime<=q)l(y),M.sortIndex=M.expirationTime,a(v,M);else break;M=r(y)}}function xe(q){if(V=!1,ie(q),!B)if(r(v)!==null)B=!0,fe||(fe=!0,pt());else{var M=r(y);M!==null&&Xt(xe,M.startTime-q)}}var fe=!1,te=-1,$e=5,Z=-1;function st(){return Y?!0:!(s.unstable_now()-Z<$e)}function Mt(){if(Y=!1,fe){var q=s.unstable_now();Z=q;var M=!0;try{e:{B=!1,V&&(V=!1,X(te),te=-1),C=!0;var ne=O;try{t:{for(ie(q),x=r(v);x!==null&&!(x.expirationTime>q&&st());){var pe=x.callback;if(typeof pe=="function"){x.callback=null,O=x.priorityLevel;var De=pe(x.expirationTime<=q);if(q=s.unstable_now(),typeof De=="function"){x.callback=De,ie(q),M=!0;break t}x===r(v)&&l(v),ie(q)}else l(v);x=r(v)}if(x!==null)M=!0;else{var A=r(y);A!==null&&Xt(xe,A.startTime-q),M=!1}}break e}finally{x=null,O=ne,C=!1}M=void 0}}finally{M?pt():fe=!1}}}var pt;if(typeof Q=="function")pt=function(){Q(Mt)};else if(typeof MessageChannel<"u"){var Gn=new MessageChannel,Qt=Gn.port2;Gn.port1.onmessage=Mt,pt=function(){Qt.postMessage(null)}}else pt=function(){K(Mt,0)};function Xt(q,M){te=K(function(){q(s.unstable_now())},M)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$e=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return O},s.unstable_next=function(q){switch(O){case 1:case 2:case 3:var M=3;break;default:M=O}var ne=O;O=M;try{return q()}finally{O=ne}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(q,M){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ne=O;O=q;try{return M()}finally{O=ne}},s.unstable_scheduleCallback=function(q,M,ne){var pe=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,q){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ne+De,q={id:w++,callback:M,priorityLevel:q,startTime:ne,expirationTime:De,sortIndex:-1},ne>pe?(q.sortIndex=ne,a(y,q),r(v)===null&&q===r(y)&&(V?(X(te),te=-1):V=!0,Xt(xe,ne-pe))):(q.sortIndex=De,a(v,q),B||C||(B=!0,fe||(fe=!0,pt()))),q},s.unstable_shouldYield=st,s.unstable_wrapCallback=function(q){var M=O;return function(){var ne=O;O=M;try{return q.apply(this,arguments)}finally{O=ne}}}})($c)),$c}var Fm;function E_(){return Fm||(Fm=1,Hc.exports=w_()),Hc.exports}var Gc={exports:{}},me={};var ep;function T_(){if(ep)return me;ep=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.iterator;function C(A){return A===null||typeof A!="object"?null:(A=O&&A[O]||A["@@iterator"],typeof A=="function"?A:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,Y={};function K(A,$,J){this.props=A,this.context=$,this.refs=Y,this.updater=J||B}K.prototype.isReactComponent={},K.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},K.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function X(){}X.prototype=K.prototype;function Q(A,$,J){this.props=A,this.context=$,this.refs=Y,this.updater=J||B}var ie=Q.prototype=new X;ie.constructor=Q,V(ie,K.prototype),ie.isPureReactComponent=!0;var xe=Array.isArray;function fe(){}var te={H:null,A:null,T:null,S:null},$e=Object.prototype.hasOwnProperty;function Z(A,$,J){var I=J.ref;return{$$typeof:s,type:A,key:$,ref:I!==void 0?I:null,props:J}}function st(A,$){return Z(A.type,$,A.props)}function Mt(A){return typeof A=="object"&&A!==null&&A.$$typeof===s}function pt(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(J){return $[J]})}var Gn=/\/+/g;function Qt(A,$){return typeof A=="object"&&A!==null&&A.key!=null?pt(""+A.key):$.toString(36)}function Xt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(fe,fe):(A.status="pending",A.then(function($){A.status==="pending"&&(A.status="fulfilled",A.value=$)},function($){A.status==="pending"&&(A.status="rejected",A.reason=$)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function q(A,$,J,I,he){var be=typeof A;(be==="undefined"||be==="boolean")&&(A=null);var Re=!1;if(A===null)Re=!0;else switch(be){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(A.$$typeof){case s:case a:Re=!0;break;case w:return Re=A._init,q(Re(A._payload),$,J,I,he)}}if(Re)return he=he(A),Re=I===""?"."+Qt(A,0):I,xe(he)?(J="",Re!=null&&(J=Re.replace(Gn,"$&/")+"/"),q(he,$,J,"",function(ca){return ca})):he!=null&&(Mt(he)&&(he=st(he,J+(he.key==null||A&&A.key===he.key?"":(""+he.key).replace(Gn,"$&/")+"/")+Re)),$.push(he)),1;Re=0;var ht=I===""?".":I+":";if(xe(A))for(var Ge=0;Ge<A.length;Ge++)I=A[Ge],be=ht+Qt(I,Ge),Re+=q(I,$,J,be,he);else if(Ge=C(A),typeof Ge=="function")for(A=Ge.call(A),Ge=0;!(I=A.next()).done;)I=I.value,be=ht+Qt(I,Ge++),Re+=q(I,$,J,be,he);else if(be==="object"){if(typeof A.then=="function")return q(Xt(A),$,J,I,he);throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Re}function M(A,$,J){if(A==null)return A;var I=[],he=0;return q(A,I,"","",function(be){return $.call(J,be,he++)}),I}function ne(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(J){(A._status===0||A._status===-1)&&(A._status=1,A._result=J)},function(J){(A._status===0||A._status===-1)&&(A._status=2,A._result=J)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var pe=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},De={map:M,forEach:function(A,$,J){M(A,function(){$.apply(this,arguments)},J)},count:function(A){var $=0;return M(A,function(){$++}),$},toArray:function(A){return M(A,function($){return $})||[]},only:function(A){if(!Mt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return me.Activity=x,me.Children=De,me.Component=K,me.Fragment=r,me.Profiler=c,me.PureComponent=Q,me.StrictMode=l,me.Suspense=v,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,me.__COMPILER_RUNTIME={__proto__:null,c:function(A){return te.H.useMemoCache(A)}},me.cache=function(A){return function(){return A.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(A,$,J){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var I=V({},A.props),he=A.key;if($!=null)for(be in $.key!==void 0&&(he=""+$.key),$)!$e.call($,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&$.ref===void 0||(I[be]=$[be]);var be=arguments.length-2;if(be===1)I.children=J;else if(1<be){for(var Re=Array(be),ht=0;ht<be;ht++)Re[ht]=arguments[ht+2];I.children=Re}return Z(A.type,he,I)},me.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:h,_context:A},A},me.createElement=function(A,$,J){var I,he={},be=null;if($!=null)for(I in $.key!==void 0&&(be=""+$.key),$)$e.call($,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(he[I]=$[I]);var Re=arguments.length-2;if(Re===1)he.children=J;else if(1<Re){for(var ht=Array(Re),Ge=0;Ge<Re;Ge++)ht[Ge]=arguments[Ge+2];he.children=ht}if(A&&A.defaultProps)for(I in Re=A.defaultProps,Re)he[I]===void 0&&(he[I]=Re[I]);return Z(A,be,he)},me.createRef=function(){return{current:null}},me.forwardRef=function(A){return{$$typeof:g,render:A}},me.isValidElement=Mt,me.lazy=function(A){return{$$typeof:w,_payload:{_status:-1,_result:A},_init:ne}},me.memo=function(A,$){return{$$typeof:y,type:A,compare:$===void 0?null:$}},me.startTransition=function(A){var $=te.T,J={};te.T=J;try{var I=A(),he=te.S;he!==null&&he(J,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(fe,pe)}catch(be){pe(be)}finally{$!==null&&J.types!==null&&($.types=J.types),te.T=$}},me.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},me.use=function(A){return te.H.use(A)},me.useActionState=function(A,$,J){return te.H.useActionState(A,$,J)},me.useCallback=function(A,$){return te.H.useCallback(A,$)},me.useContext=function(A){return te.H.useContext(A)},me.useDebugValue=function(){},me.useDeferredValue=function(A,$){return te.H.useDeferredValue(A,$)},me.useEffect=function(A,$){return te.H.useEffect(A,$)},me.useEffectEvent=function(A){return te.H.useEffectEvent(A)},me.useId=function(){return te.H.useId()},me.useImperativeHandle=function(A,$,J){return te.H.useImperativeHandle(A,$,J)},me.useInsertionEffect=function(A,$){return te.H.useInsertionEffect(A,$)},me.useLayoutEffect=function(A,$){return te.H.useLayoutEffect(A,$)},me.useMemo=function(A,$){return te.H.useMemo(A,$)},me.useOptimistic=function(A,$){return te.H.useOptimistic(A,$)},me.useReducer=function(A,$,J){return te.H.useReducer(A,$,J)},me.useRef=function(A){return te.H.useRef(A)},me.useState=function(A){return te.H.useState(A)},me.useSyncExternalStore=function(A,$,J){return te.H.useSyncExternalStore(A,$,J)},me.useTransition=function(){return te.H.useTransition()},me.version="19.2.4",me}var tp;function _h(){return tp||(tp=1,Gc.exports=T_()),Gc.exports}var Vc={exports:{}},Ct={};var np;function A_(){if(np)return Ct;np=1;var s=_h();function a(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(v,y,w){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:x==null?null:""+x,children:v,containerInfo:y,implementation:w}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Ct.createPortal=function(v,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(a(299));return h(v,y,null,w)},Ct.flushSync=function(v){var y=f.T,w=l.p;try{if(f.T=null,l.p=2,v)return v()}finally{f.T=y,l.p=w,l.d.f()}},Ct.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,l.d.C(v,y))},Ct.prefetchDNS=function(v){typeof v=="string"&&l.d.D(v)},Ct.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var w=y.as,x=g(w,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?l.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:O,fetchPriority:C}):w==="script"&&l.d.X(v,{crossOrigin:x,integrity:O,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ct.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=g(y.as,y.crossOrigin);l.d.M(v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&l.d.M(v)},Ct.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,x=g(w,y.crossOrigin);l.d.L(v,w,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ct.preloadModule=function(v,y){if(typeof v=="string")if(y){var w=g(y.as,y.crossOrigin);l.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else l.d.m(v)},Ct.requestFormReset=function(v){l.d.r(v)},Ct.unstable_batchedUpdates=function(v,y){return v(y)},Ct.useFormState=function(v,y,w){return f.H.useFormState(v,y,w)},Ct.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ct.version="19.2.4",Ct}var ap;function j_(){if(ap)return Vc.exports;ap=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Vc.exports=A_(),Vc.exports}var ip;function O_(){if(ip)return wr;ip=1;var s=E_(),a=_h(),r=j_();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(l(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,i=t;;){var u=n.return;if(u===null)break;var o=u.alternate;if(o===null){if(i=u.return,i!==null){n=i;continue}break}if(u.child===o.child){for(o=u.child;o;){if(o===n)return v(u),e;if(o===i)return v(u),t;o=o.sibling}throw Error(l(188))}if(n.return!==i.return)n=u,i=o;else{for(var d=!1,_=u.child;_;){if(_===n){d=!0,n=u,i=o;break}if(_===i){d=!0,i=u,n=o;break}_=_.sibling}if(!d){for(_=o.child;_;){if(_===n){d=!0,n=o,i=u;break}if(_===i){d=!0,i=o,n=u;break}_=_.sibling}if(!d)throw Error(l(189))}}if(n.alternate!==i)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,O=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),st=Symbol.for("react.memo_cache_sentinel"),Mt=Symbol.iterator;function pt(e){return e===null||typeof e!="object"?null:(e=Mt&&e[Mt]||e["@@iterator"],typeof e=="function"?e:null)}var Gn=Symbol.for("react.client.reference");function Qt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Gn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case K:return"Profiler";case Y:return"StrictMode";case xe:return"Suspense";case fe:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case Q:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case ie:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return t=e.displayName||null,t!==null?t:Qt(e.type)||"Memo";case $e:t=e._payload,e=e._init;try{return Qt(e(t))}catch{}}return null}var Xt=Array.isArray,q=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},pe=[],De=-1;function A(e){return{current:e}}function $(e){0>De||(e.current=pe[De],pe[De]=null,De--)}function J(e,t){De++,pe[De]=e.current,e.current=t}var I=A(null),he=A(null),be=A(null),Re=A(null);function ht(e,t){switch(J(be,t),J(he,e),J(I,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=vm(t),e=bm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(I),J(I,e)}function Ge(){$(I),$(he),$(be)}function ca(e){e.memoizedState!==null&&J(Re,e);var t=I.current,n=bm(t,e.type);t!==n&&(J(he,e),J(I,n))}function zt(e){he.current===e&&($(I),$(he)),Re.current===e&&($(Re),yr._currentValue=ne)}var ji,Ja;function bn(e){if(ji===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ji=t&&t[1]||"",Ja=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ji+e+Ja}var un=!1;function Pa(e,t){if(!e||un)return"";un=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(U){var k=U}Reflect.construct(e,[],H)}else{try{H.call()}catch(U){k=U}e.call(H.prototype)}}else{try{throw Error()}catch(U){k=U}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(U){if(U&&k&&typeof U.stack=="string")return[U.stack,k.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),d=o[0],_=o[1];if(d&&_){var S=d.split(`
`),N=_.split(`
`);for(u=i=0;i<S.length&&!S[i].includes("DetermineComponentFrameRoot");)i++;for(;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;if(i===S.length||u===N.length)for(i=S.length-1,u=N.length-1;1<=i&&0<=u&&S[i]!==N[u];)u--;for(;1<=i&&0<=u;i--,u--)if(S[i]!==N[u]){if(i!==1||u!==1)do if(i--,u--,0>u||S[i]!==N[u]){var z=`
`+S[i].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=i&&0<=u);break}}}finally{un=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?bn(n):""}function qr(e,t){switch(e.tag){case 26:case 27:case 5:return bn(e.type);case 16:return bn("Lazy");case 13:return e.child!==t&&t!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return Pa(e.type,!1);case 11:return Pa(e.type.render,!1);case 1:return Pa(e.type,!0);case 31:return bn("Activity");default:return""}}function Ts(e){try{var t="",n=null;do t+=qr(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Nn=Object.prototype.hasOwnProperty,As=s.unstable_scheduleCallback,js=s.unstable_cancelCallback,Lr=s.unstable_shouldYield,Br=s.unstable_requestPaint,Ot=s.unstable_now,Oi=s.unstable_getCurrentPriorityLevel,Vn=s.unstable_ImmediatePriority,Za=s.unstable_UserBlockingPriority,Jt=s.unstable_NormalPriority,kn=s.unstable_LowPriority,Hr=s.unstable_IdlePriority,xi=s.log,Ci=s.unstable_setDisableYieldValue,de=null,gt=null;function Ze(e){if(typeof xi=="function"&&Ci(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(de,e)}catch{}}var xt=Math.clz32?Math.clz32:Gr,$r=Math.log,Ia=Math.LN2;function Gr(e){return e>>>=0,e===0?32:31-($r(e)/Ia|0)|0}var Un=256,on=262144,Ri=4194304;function Dn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mn(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var u=0,o=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var _=i&134217727;return _!==0?(i=_&~o,i!==0?u=Dn(i):(d&=_,d!==0?u=Dn(d):n||(n=_&~e,n!==0&&(u=Dn(n))))):(_=i&~o,_!==0?u=Dn(_):d!==0?u=Dn(d):n||(n=i&~e,n!==0&&(u=Dn(n)))),u===0?0:t!==0&&t!==u&&(t&o)===0&&(o=u&-u,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:u}function Kn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ha(){var e=Ri;return Ri<<=1,(Ri&62914560)===0&&(Ri=4194304),e}function Yn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function da(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Os(e,t,n,i,u,o){var d=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var _=e.entanglements,S=e.expirationTimes,N=e.hiddenUpdates;for(n=d&~n;0<n;){var z=31-xt(n),H=1<<z;_[z]=0,S[z]=-1;var k=N[z];if(k!==null)for(N[z]=null,z=0;z<k.length;z++){var U=k[z];U!==null&&(U.lane&=-536870913)}n&=~H}i!==0&&Wa(e,i,0),o!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=o&~(d&~t))}function Wa(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-xt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function cn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-xt(n),u=1<<i;u&t|e[i]&t&&(e[i]|=t),n&=~u}}function Fa(e,t){var n=t&-t;return n=(n&42)!==0?1:qt(n),(n&(e.suspendedLanes|t))!==0?0:n}function qt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _t(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xs(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:Vm(e.type))}function fa(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Sn=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Sn,Te="__reactProps$"+Sn,ma="__reactContainer$"+Sn,Cs="__reactEvents$"+Sn,Uu="__reactListeners$"+Sn,Pt="__reactHandles$"+Sn,wn="__reactResources$"+Sn,Rt="__reactMarker$"+Sn;function Rs(e){delete e[Ie],delete e[Te],delete e[Cs],delete e[Uu],delete e[Pt]}function pa(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ma]||n[Ie]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Om(e);e!==null;){if(n=e[Ie])return n;e=Om(e)}return t}e=n,n=e.parentNode}return null}function ga(e){if(e=e[Ie]||e[ma]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ya(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function zn(e){var t=e[wn];return t||(t=e[wn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ve(e){e[Rt]=!0}var _a=new Set,Ni={};function En(e,t){va(e,t),va(e+"Capture",t)}function va(e,t){for(Ni[e]=t,e=0;e<t.length;e++)_a.add(t[e])}var Du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kr={},Yr={};function Qr(e){return Nn.call(Yr,e)?!0:Nn.call(Kr,e)?!1:Du.test(e)?Yr[e]=!0:(Kr[e]=!0,!1)}function ki(e,t,n){if(Qr(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ei(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Tn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mu(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(d){n=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ns(e){if(!e._valueTracker){var t=Xr(e)?"checked":"value";e._valueTracker=Mu(e,t,""+e[t])}}function Jr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Xr(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Pr=/[\n"\\]/g;function Nt(e){return e.replace(Pr,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ks(e,t,n,i,u,o,d,_){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Lt(t)):e.value!==""+Lt(t)&&(e.value=""+Lt(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?Ds(e,d,Lt(t)):n!=null?Ds(e,d,Lt(n)):i!=null&&e.removeAttribute("value"),u==null&&o!=null&&(e.defaultChecked=!!o),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Lt(_):e.removeAttribute("name")}function Us(e,t,n,i,u,o,d,_){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Ns(e);return}n=n!=null?""+Lt(n):"",t=t!=null?""+Lt(t):n,_||t===e.value||(e.value=t),e.defaultValue=t}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=_?e.checked:!!i,e.defaultChecked=!!i,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Ns(e)}function Ds(e,t,n){t==="number"&&Ui(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ba(e,t,n,i){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Lt(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Zr(e,t,n){if(t!=null&&(t=""+Lt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Lt(n):""}function Ir(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(l(92));if(Xt(i)){if(1<i.length)throw Error(l(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Lt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Ns(e)}function Sa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wr(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||zu.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Fr(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in t)i=t[u],t.hasOwnProperty(u)&&n[u]!==i&&Wr(e,u,i)}else for(var o in t)t.hasOwnProperty(o)&&Wr(e,o,t[o])}function Ms(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(e){return Lu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function p(){}var b=null;function E(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var D=null,G=null;function F(e){var t=ga(e);if(t&&(e=t.stateNode)){var n=e[Te]||null;e:switch(e=t.stateNode,t.type){case"input":if(ks(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var u=i[Te]||null;if(!u)throw Error(l(90));ks(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Jr(i)}break e;case"textarea":Zr(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ba(e,!!n.multiple,t,!1)}}}var se=!1;function le(e,t,n){if(se)return e(t,n);se=!0;try{var i=e(t);return i}finally{if(se=!1,(D!==null||G!==null)&&(Ll(),D&&(t=D,e=G,G=D=null,F(t),e)))for(t=0;t<e.length;t++)F(e[t])}}function We(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Te]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var Je=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hn=!1;if(Je)try{var Zt={};Object.defineProperty(Zt,"passive",{get:function(){hn=!0}}),window.addEventListener("test",Zt,Zt),window.removeEventListener("test",Zt,Zt)}catch{hn=!1}var kt=null,ye=null,Ce=null;function Ut(){if(Ce)return Ce;var e,t=ye,n=t.length,i,u="value"in kt?kt.value:kt.textContent,o=u.length;for(e=0;e<n&&t[e]===u[e];e++);var d=n-e;for(i=1;i<=d&&t[n-i]===u[o-i];i++);return Ce=u.slice(e,1<i?1-i:void 0)}function Bt(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function el(){return!1}function vt(e){function t(n,i,u,o,d){this._reactName=n,this._targetInst=u,this.type=i,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(n=e[_],this[_]=n?n(o):o[_]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mi:el,this.isPropagationStopped=el,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=vt(ti),zs=x({},ti,{view:0,detail:0}),_g=vt(zs),Bu,Hu,qs,nl=x({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qs&&(qs&&e.type==="mousemove"?(Bu=e.screenX-qs.screenX,Hu=e.screenY-qs.screenY):Hu=Bu=0,qs=e),Bu)},movementY:function(e){return"movementY"in e?e.movementY:Hu}}),Sh=vt(nl),vg=x({},nl,{dataTransfer:0}),bg=vt(vg),Sg=x({},zs,{relatedTarget:0}),$u=vt(Sg),wg=x({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Eg=vt(wg),Tg=x({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ag=vt(Tg),jg=x({},ti,{data:0}),wh=vt(jg),Og={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cg[e])?!!t[e]:!1}function Gu(){return Rg}var Ng=x({},zs,{key:function(e){if(e.key){var t=Og[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(e){return e.type==="keypress"?Bt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kg=vt(Ng),Ug=x({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=vt(Ug),Dg=x({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Mg=vt(Dg),zg=x({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),qg=vt(zg),Lg=x({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bg=vt(Lg),Hg=x({},ti,{newState:0,oldState:0}),$g=vt(Hg),Gg=[9,13,27,32],Vu=Je&&"CompositionEvent"in window,Ls=null;Je&&"documentMode"in document&&(Ls=document.documentMode);var Vg=Je&&"TextEvent"in window&&!Ls,Th=Je&&(!Vu||Ls&&8<Ls&&11>=Ls),Ah=" ",jh=!1;function Oh(e,t){switch(e){case"keyup":return Gg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function Kg(e,t){switch(e){case"compositionend":return xh(t);case"keypress":return t.which!==32?null:(jh=!0,Ah);case"textInput":return e=t.data,e===Ah&&jh?null:e;default:return null}}function Yg(e,t){if(zi)return e==="compositionend"||!Vu&&Oh(e,t)?(e=Ut(),Ce=ye=kt=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Th&&t.locale!=="ko"?null:t.data;default:return null}}var Qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ch(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qg[e.type]:t==="textarea"}function Rh(e,t,n,i){D?G?G.push(i):G=[i]:D=i,t=Yl(t,"onChange"),0<t.length&&(n=new tl("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Bs=null,Hs=null;function Xg(e){fm(e,0)}function al(e){var t=ya(e);if(Jr(t))return e}function Nh(e,t){if(e==="change")return t}var kh=!1;if(Je){var Ku;if(Je){var Yu="oninput"in document;if(!Yu){var Uh=document.createElement("div");Uh.setAttribute("oninput","return;"),Yu=typeof Uh.oninput=="function"}Ku=Yu}else Ku=!1;kh=Ku&&(!document.documentMode||9<document.documentMode)}function Dh(){Bs&&(Bs.detachEvent("onpropertychange",Mh),Hs=Bs=null)}function Mh(e){if(e.propertyName==="value"&&al(Hs)){var t=[];Rh(t,Hs,e,E(e)),le(Xg,t)}}function Jg(e,t,n){e==="focusin"?(Dh(),Bs=t,Hs=n,Bs.attachEvent("onpropertychange",Mh)):e==="focusout"&&Dh()}function Pg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return al(Hs)}function Zg(e,t){if(e==="click")return al(t)}function Ig(e,t){if(e==="input"||e==="change")return al(t)}function Wg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:Wg;function $s(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var u=n[i];if(!Nn.call(t,u)||!It(e[u],t[u]))return!1}return!0}function zh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qh(e,t){var n=zh(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zh(n)}}function Lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ui(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ui(e.document)}return t}function Qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Fg=Je&&"documentMode"in document&&11>=document.documentMode,qi=null,Xu=null,Gs=null,Ju=!1;function Hh(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ju||qi==null||qi!==Ui(i)||(i=qi,"selectionStart"in i&&Qu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gs&&$s(Gs,i)||(Gs=i,i=Yl(Xu,"onSelect"),0<i.length&&(t=new tl("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=qi)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Li={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},Pu={},$h={};Je&&($h=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ai(e){if(Pu[e])return Pu[e];if(!Li[e])return e;var t=Li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $h)return Pu[e]=t[n];return e}var Gh=ai("animationend"),Vh=ai("animationiteration"),Kh=ai("animationstart"),ey=ai("transitionrun"),ty=ai("transitionstart"),ny=ai("transitioncancel"),Yh=ai("transitionend"),Qh=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function An(e,t){Qh.set(e,t),En(t,[e])}var il=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},dn=[],Bi=0,Iu=0;function sl(){for(var e=Bi,t=Iu=Bi=0;t<e;){var n=dn[t];dn[t++]=null;var i=dn[t];dn[t++]=null;var u=dn[t];dn[t++]=null;var o=dn[t];if(dn[t++]=null,i!==null&&u!==null){var d=i.pending;d===null?u.next=u:(u.next=d.next,d.next=u),i.pending=u}o!==0&&Xh(n,u,o)}}function rl(e,t,n,i){dn[Bi++]=e,dn[Bi++]=t,dn[Bi++]=n,dn[Bi++]=i,Iu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Wu(e,t,n,i){return rl(e,t,n,i),ll(e)}function ii(e,t){return rl(e,null,null,t),ll(e)}function Xh(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var u=!1,o=e.return;o!==null;)o.childLanes|=n,i=o.alternate,i!==null&&(i.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(u=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,u&&t!==null&&(u=31-xt(n),e=o.hiddenUpdates,i=e[u],i===null?e[u]=[t]:i.push(t),t.lane=n|536870912),o):null}function ll(e){if(50<cr)throw cr=0,uc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hi={};function ay(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,i){return new ay(e,t,n,i)}function Fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Jh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ul(e,t,n,i,u,o){var d=0;if(i=e,typeof e=="function")Fu(e)&&(d=1);else if(typeof e=="string")d=u_(e,n,I.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=Wt(31,n,t,u),e.elementType=Z,e.lanes=o,e;case V:return si(n.children,u,o,t);case Y:d=8,u|=24;break;case K:return e=Wt(12,n,t,u|2),e.elementType=K,e.lanes=o,e;case xe:return e=Wt(13,n,t,u),e.elementType=xe,e.lanes=o,e;case fe:return e=Wt(19,n,t,u),e.elementType=fe,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:d=10;break e;case X:d=9;break e;case ie:d=11;break e;case te:d=14;break e;case $e:d=16,i=null;break e}d=29,n=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=Wt(d,n,t,u),t.elementType=e,t.type=i,t.lanes=o,t}function si(e,t,n,i){return e=Wt(7,e,i,t),e.lanes=n,e}function eo(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function Ph(e){var t=Wt(18,null,null,0);return t.stateNode=e,t}function to(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zh=new WeakMap;function fn(e,t){if(typeof e=="object"&&e!==null){var n=Zh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ts(t)},Zh.set(e,t),t)}return{value:e,source:t,stack:Ts(t)}}var $i=[],Gi=0,ol=null,Vs=0,mn=[],pn=0,wa=null,qn=1,Ln="";function Xn(e,t){$i[Gi++]=Vs,$i[Gi++]=ol,ol=e,Vs=t}function Ih(e,t,n){mn[pn++]=qn,mn[pn++]=Ln,mn[pn++]=wa,wa=e;var i=qn;e=Ln;var u=32-xt(i)-1;i&=~(1<<u),n+=1;var o=32-xt(t)+u;if(30<o){var d=u-u%5;o=(i&(1<<d)-1).toString(32),i>>=d,u-=d,qn=1<<32-xt(t)+u|n<<u|i,Ln=o+e}else qn=1<<o|n<<u|i,Ln=e}function no(e){e.return!==null&&(Xn(e,1),Ih(e,1,0))}function ao(e){for(;e===ol;)ol=$i[--Gi],$i[Gi]=null,Vs=$i[--Gi],$i[Gi]=null;for(;e===wa;)wa=mn[--pn],mn[pn]=null,Ln=mn[--pn],mn[pn]=null,qn=mn[--pn],mn[pn]=null}function Wh(e,t){mn[pn++]=qn,mn[pn++]=Ln,mn[pn++]=wa,qn=t.id,Ln=t.overflow,wa=e}var bt=null,Qe=null,Oe=!1,Ea=null,gn=!1,io=Error(l(519));function Ta(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ks(fn(t,e)),io}function Fh(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ie]=e,t[Te]=i,n){case"dialog":Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":case"embed":Ee("load",t);break;case"video":case"audio":for(n=0;n<dr.length;n++)Ee(dr[n],t);break;case"source":Ee("error",t);break;case"img":case"image":case"link":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"input":Ee("invalid",t),Us(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ee("invalid",t);break;case"textarea":Ee("invalid",t),Ir(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||ym(t.textContent,n)?(i.popover!=null&&(Ee("beforetoggle",t),Ee("toggle",t)),i.onScroll!=null&&Ee("scroll",t),i.onScrollEnd!=null&&Ee("scrollend",t),i.onClick!=null&&(t.onclick=p),t=!0):t=!1,t||Ta(e,!0)}function ed(e){for(bt=e.return;bt;)switch(bt.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:bt=bt.return}}function Vi(e){if(e!==bt)return!1;if(!Oe)return ed(e),Oe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ec(e.type,e.memoizedProps)),n=!n),n&&Qe&&Ta(e),ed(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Qe=jm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Qe=jm(e)}else t===27?(t=Qe,La(e.type)?(e=xc,xc=null,Qe=e):Qe=t):Qe=bt?_n(e.stateNode.nextSibling):null;return!0}function ri(){Qe=bt=null,Oe=!1}function so(){var e=Ea;return e!==null&&(Vt===null?Vt=e:Vt.push.apply(Vt,e),Ea=null),e}function Ks(e){Ea===null?Ea=[e]:Ea.push(e)}var ro=A(null),li=null,Jn=null;function Aa(e,t,n){J(ro,t._currentValue),t._currentValue=n}function Pn(e){e._currentValue=ro.current,$(ro)}function lo(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function uo(e,t,n,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var o=u.dependencies;if(o!==null){var d=u.child;o=o.firstContext;e:for(;o!==null;){var _=o;o=u;for(var S=0;S<t.length;S++)if(_.context===t[S]){o.lanes|=n,_=o.alternate,_!==null&&(_.lanes|=n),lo(o.return,n,e),i||(d=null);break e}o=_.next}}else if(u.tag===18){if(d=u.return,d===null)throw Error(l(341));d.lanes|=n,o=d.alternate,o!==null&&(o.lanes|=n),lo(d,n,e),d=null}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===e){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}}function Ki(e,t,n,i){e=null;for(var u=t,o=!1;u!==null;){if(!o){if((u.flags&524288)!==0)o=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var d=u.alternate;if(d===null)throw Error(l(387));if(d=d.memoizedProps,d!==null){var _=u.type;It(u.pendingProps.value,d.value)||(e!==null?e.push(_):e=[_])}}else if(u===Re.current){if(d=u.alternate,d===null)throw Error(l(387));d.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(yr):e=[yr])}u=u.return}e!==null&&uo(t,e,n,i),t.flags|=262144}function cl(e){for(e=e.firstContext;e!==null;){if(!It(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ui(e){li=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return td(li,e)}function hl(e,t){return li===null&&ui(e),td(e,t)}function td(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Jn===null){if(e===null)throw Error(l(308));Jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jn=Jn.next=t;return n}var iy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},sy=s.unstable_scheduleCallback,ry=s.unstable_NormalPriority,rt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oo(){return{controller:new iy,data:new Map,refCount:0}}function Ys(e){e.refCount--,e.refCount===0&&sy(ry,function(){e.controller.abort()})}var Qs=null,co=0,Yi=0,Qi=null;function ly(e,t){if(Qs===null){var n=Qs=[];co=0,Yi=mc(),Qi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return co++,t.then(nd,nd),t}function nd(){if(--co===0&&Qs!==null){Qi!==null&&(Qi.status="fulfilled");var e=Qs;Qs=null,Yi=0,Qi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function uy(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var u=0;u<n.length;u++)(0,n[u])(t)},function(u){for(i.status="rejected",i.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),i}var ad=q.S;q.S=function(e,t){$f=Ot(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ly(e,t),ad!==null&&ad(e,t)};var oi=A(null);function ho(){var e=oi.current;return e!==null?e:He.pooledCache}function dl(e,t){t===null?J(oi,oi.current):J(oi,t.pool)}function id(){var e=ho();return e===null?null:{parent:rt._currentValue,pool:e}}var Xi=Error(l(460)),fo=Error(l(474)),fl=Error(l(542)),ml={then:function(){}};function sd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(p,p),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ud(e),e;default:if(typeof t.status=="string")t.then(p,p);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=i}},function(i){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ud(e),e}throw hi=t,Xi}}function ci(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(hi=n,Xi):n}}var hi=null;function ld(){if(hi===null)throw Error(l(459));var e=hi;return hi=null,e}function ud(e){if(e===Xi||e===fl)throw Error(l(483))}var Ji=null,Xs=0;function pl(e){var t=Xs;return Xs+=1,Ji===null&&(Ji=[]),rd(Ji,e,t)}function Js(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function gl(e,t){throw t.$$typeof===O?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function od(e){function t(j,T){if(e){var R=j.deletions;R===null?(j.deletions=[T],j.flags|=16):R.push(T)}}function n(j,T){if(!e)return null;for(;T!==null;)t(j,T),T=T.sibling;return null}function i(j){for(var T=new Map;j!==null;)j.key!==null?T.set(j.key,j):T.set(j.index,j),j=j.sibling;return T}function u(j,T){return j=Qn(j,T),j.index=0,j.sibling=null,j}function o(j,T,R){return j.index=R,e?(R=j.alternate,R!==null?(R=R.index,R<T?(j.flags|=67108866,T):R):(j.flags|=67108866,T)):(j.flags|=1048576,T)}function d(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function _(j,T,R,L){return T===null||T.tag!==6?(T=eo(R,j.mode,L),T.return=j,T):(T=u(T,R),T.return=j,T)}function S(j,T,R,L){var re=R.type;return re===V?z(j,T,R.props.children,L,R.key):T!==null&&(T.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===$e&&ci(re)===T.type)?(T=u(T,R.props),Js(T,R),T.return=j,T):(T=ul(R.type,R.key,R.props,null,j.mode,L),Js(T,R),T.return=j,T)}function N(j,T,R,L){return T===null||T.tag!==4||T.stateNode.containerInfo!==R.containerInfo||T.stateNode.implementation!==R.implementation?(T=to(R,j.mode,L),T.return=j,T):(T=u(T,R.children||[]),T.return=j,T)}function z(j,T,R,L,re){return T===null||T.tag!==7?(T=si(R,j.mode,L,re),T.return=j,T):(T=u(T,R),T.return=j,T)}function H(j,T,R){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=eo(""+T,j.mode,R),T.return=j,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case C:return R=ul(T.type,T.key,T.props,null,j.mode,R),Js(R,T),R.return=j,R;case B:return T=to(T,j.mode,R),T.return=j,T;case $e:return T=ci(T),H(j,T,R)}if(Xt(T)||pt(T))return T=si(T,j.mode,R,null),T.return=j,T;if(typeof T.then=="function")return H(j,pl(T),R);if(T.$$typeof===Q)return H(j,hl(j,T),R);gl(j,T)}return null}function k(j,T,R,L){var re=T!==null?T.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return re!==null?null:_(j,T,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case C:return R.key===re?S(j,T,R,L):null;case B:return R.key===re?N(j,T,R,L):null;case $e:return R=ci(R),k(j,T,R,L)}if(Xt(R)||pt(R))return re!==null?null:z(j,T,R,L,null);if(typeof R.then=="function")return k(j,T,pl(R),L);if(R.$$typeof===Q)return k(j,T,hl(j,R),L);gl(j,R)}return null}function U(j,T,R,L,re){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return j=j.get(R)||null,_(T,j,""+L,re);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return j=j.get(L.key===null?R:L.key)||null,S(T,j,L,re);case B:return j=j.get(L.key===null?R:L.key)||null,N(T,j,L,re);case $e:return L=ci(L),U(j,T,R,L,re)}if(Xt(L)||pt(L))return j=j.get(R)||null,z(T,j,L,re,null);if(typeof L.then=="function")return U(j,T,R,pl(L),re);if(L.$$typeof===Q)return U(j,T,R,hl(T,L),re);gl(T,L)}return null}function W(j,T,R,L){for(var re=null,Ne=null,ee=T,_e=T=0,je=null;ee!==null&&_e<R.length;_e++){ee.index>_e?(je=ee,ee=null):je=ee.sibling;var ke=k(j,ee,R[_e],L);if(ke===null){ee===null&&(ee=je);break}e&&ee&&ke.alternate===null&&t(j,ee),T=o(ke,T,_e),Ne===null?re=ke:Ne.sibling=ke,Ne=ke,ee=je}if(_e===R.length)return n(j,ee),Oe&&Xn(j,_e),re;if(ee===null){for(;_e<R.length;_e++)ee=H(j,R[_e],L),ee!==null&&(T=o(ee,T,_e),Ne===null?re=ee:Ne.sibling=ee,Ne=ee);return Oe&&Xn(j,_e),re}for(ee=i(ee);_e<R.length;_e++)je=U(ee,j,_e,R[_e],L),je!==null&&(e&&je.alternate!==null&&ee.delete(je.key===null?_e:je.key),T=o(je,T,_e),Ne===null?re=je:Ne.sibling=je,Ne=je);return e&&ee.forEach(function(Va){return t(j,Va)}),Oe&&Xn(j,_e),re}function ue(j,T,R,L){if(R==null)throw Error(l(151));for(var re=null,Ne=null,ee=T,_e=T=0,je=null,ke=R.next();ee!==null&&!ke.done;_e++,ke=R.next()){ee.index>_e?(je=ee,ee=null):je=ee.sibling;var Va=k(j,ee,ke.value,L);if(Va===null){ee===null&&(ee=je);break}e&&ee&&Va.alternate===null&&t(j,ee),T=o(Va,T,_e),Ne===null?re=Va:Ne.sibling=Va,Ne=Va,ee=je}if(ke.done)return n(j,ee),Oe&&Xn(j,_e),re;if(ee===null){for(;!ke.done;_e++,ke=R.next())ke=H(j,ke.value,L),ke!==null&&(T=o(ke,T,_e),Ne===null?re=ke:Ne.sibling=ke,Ne=ke);return Oe&&Xn(j,_e),re}for(ee=i(ee);!ke.done;_e++,ke=R.next())ke=U(ee,j,_e,ke.value,L),ke!==null&&(e&&ke.alternate!==null&&ee.delete(ke.key===null?_e:ke.key),T=o(ke,T,_e),Ne===null?re=ke:Ne.sibling=ke,Ne=ke);return e&&ee.forEach(function(v_){return t(j,v_)}),Oe&&Xn(j,_e),re}function Be(j,T,R,L){if(typeof R=="object"&&R!==null&&R.type===V&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case C:e:{for(var re=R.key;T!==null;){if(T.key===re){if(re=R.type,re===V){if(T.tag===7){n(j,T.sibling),L=u(T,R.props.children),L.return=j,j=L;break e}}else if(T.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===$e&&ci(re)===T.type){n(j,T.sibling),L=u(T,R.props),Js(L,R),L.return=j,j=L;break e}n(j,T);break}else t(j,T);T=T.sibling}R.type===V?(L=si(R.props.children,j.mode,L,R.key),L.return=j,j=L):(L=ul(R.type,R.key,R.props,null,j.mode,L),Js(L,R),L.return=j,j=L)}return d(j);case B:e:{for(re=R.key;T!==null;){if(T.key===re)if(T.tag===4&&T.stateNode.containerInfo===R.containerInfo&&T.stateNode.implementation===R.implementation){n(j,T.sibling),L=u(T,R.children||[]),L.return=j,j=L;break e}else{n(j,T);break}else t(j,T);T=T.sibling}L=to(R,j.mode,L),L.return=j,j=L}return d(j);case $e:return R=ci(R),Be(j,T,R,L)}if(Xt(R))return W(j,T,R,L);if(pt(R)){if(re=pt(R),typeof re!="function")throw Error(l(150));return R=re.call(R),ue(j,T,R,L)}if(typeof R.then=="function")return Be(j,T,pl(R),L);if(R.$$typeof===Q)return Be(j,T,hl(j,R),L);gl(j,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,T!==null&&T.tag===6?(n(j,T.sibling),L=u(T,R),L.return=j,j=L):(n(j,T),L=eo(R,j.mode,L),L.return=j,j=L),d(j)):n(j,T)}return function(j,T,R,L){try{Xs=0;var re=Be(j,T,R,L);return Ji=null,re}catch(ee){if(ee===Xi||ee===fl)throw ee;var Ne=Wt(29,ee,null,j.mode);return Ne.lanes=L,Ne.return=j,Ne}}}var di=od(!0),cd=od(!1),ja=!1;function mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ue&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,t=ll(e),Xh(e,null,n),t}return rl(e,i,t,n),ll(e)}function Ps(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,cn(e,n)}}function go(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var u=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?u=o=d:o=o.next=d,n=n.next}while(n!==null);o===null?u=o=t:o=o.next=t}else u=o=t;n={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var yo=!1;function Zs(){if(yo){var e=Qi;if(e!==null)throw e}}function Is(e,t,n,i){yo=!1;var u=e.updateQueue;ja=!1;var o=u.firstBaseUpdate,d=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var S=_,N=S.next;S.next=null,d===null?o=N:d.next=N,d=S;var z=e.alternate;z!==null&&(z=z.updateQueue,_=z.lastBaseUpdate,_!==d&&(_===null?z.firstBaseUpdate=N:_.next=N,z.lastBaseUpdate=S))}if(o!==null){var H=u.baseState;d=0,z=N=S=null,_=o;do{var k=_.lane&-536870913,U=k!==_.lane;if(U?(Ae&k)===k:(i&k)===k){k!==0&&k===Yi&&(yo=!0),z!==null&&(z=z.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var W=e,ue=_;k=t;var Be=n;switch(ue.tag){case 1:if(W=ue.payload,typeof W=="function"){H=W.call(Be,H,k);break e}H=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=ue.payload,k=typeof W=="function"?W.call(Be,H,k):W,k==null)break e;H=x({},H,k);break e;case 2:ja=!0}}k=_.callback,k!==null&&(e.flags|=64,U&&(e.flags|=8192),U=u.callbacks,U===null?u.callbacks=[k]:U.push(k))}else U={lane:k,tag:_.tag,payload:_.payload,callback:_.callback,next:null},z===null?(N=z=U,S=H):z=z.next=U,d|=k;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;U=_,_=U.next,U.next=null,u.lastBaseUpdate=U,u.shared.pending=null}}while(!0);z===null&&(S=H),u.baseState=S,u.firstBaseUpdate=N,u.lastBaseUpdate=z,o===null&&(u.shared.lanes=0),Ua|=d,e.lanes=d,e.memoizedState=H}}function hd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function dd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hd(n[e],t)}var Pi=A(null),yl=A(0);function fd(e,t){e=ia,J(yl,e),J(Pi,t),ia=e|t.baseLanes}function _o(){J(yl,ia),J(Pi,Pi.current)}function vo(){ia=yl.current,$(Pi),$(yl)}var Ft=A(null),yn=null;function Ca(e){var t=e.alternate;J(at,at.current&1),J(Ft,e),yn===null&&(t===null||Pi.current!==null||t.memoizedState!==null)&&(yn=e)}function bo(e){J(at,at.current),J(Ft,e),yn===null&&(yn=e)}function md(e){e.tag===22?(J(at,at.current),J(Ft,e),yn===null&&(yn=e)):Ra()}function Ra(){J(at,at.current),J(Ft,Ft.current)}function en(e){$(Ft),yn===e&&(yn=null),$(at)}var at=A(0);function _l(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jc(n)||Oc(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zn=0,ge=null,qe=null,lt=null,vl=!1,Zi=!1,fi=!1,bl=0,Ws=0,Ii=null,oy=0;function Fe(){throw Error(l(321))}function So(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!It(e[n],t[n]))return!1;return!0}function wo(e,t,n,i,u,o){return Zn=o,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?Id:qo,fi=!1,o=n(i,u),fi=!1,Zi&&(o=gd(t,n,i,u)),pd(e),o}function pd(e){q.H=tr;var t=qe!==null&&qe.next!==null;if(Zn=0,lt=qe=ge=null,vl=!1,Ws=0,Ii=null,t)throw Error(l(300));e===null||ut||(e=e.dependencies,e!==null&&cl(e)&&(ut=!0))}function gd(e,t,n,i){ge=e;var u=0;do{if(Zi&&(Ii=null),Ws=0,Zi=!1,25<=u)throw Error(l(301));if(u+=1,lt=qe=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}q.H=Wd,o=t(n,i)}while(Zi);return o}function cy(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Fs(t):t,e=e.useState()[0],(qe!==null?qe.memoizedState:null)!==e&&(ge.flags|=1024),t}function Eo(){var e=bl!==0;return bl=0,e}function To(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ao(e){if(vl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}vl=!1}Zn=0,lt=qe=ge=null,Zi=!1,Ws=bl=0,Ii=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?ge.memoizedState=lt=e:lt=lt.next=e,lt}function it(){if(qe===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=lt===null?ge.memoizedState:lt.next;if(t!==null)lt=t,qe=e;else{if(e===null)throw ge.alternate===null?Error(l(467)):Error(l(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},lt===null?ge.memoizedState=lt=e:lt=lt.next=e}return lt}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fs(e){var t=Ws;return Ws+=1,Ii===null&&(Ii=[]),e=rd(Ii,e,t),t=ge,(lt===null?t.memoizedState:lt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Id:qo),e}function wl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Fs(e);if(e.$$typeof===Q)return St(e)}throw Error(l(438,String(e)))}function jo(e){var t=null,n=ge.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=ge.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Sl(),ge.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=st;return t.index++,n}function In(e,t){return typeof t=="function"?t(e):t}function El(e){var t=it();return Oo(t,qe,e)}function Oo(e,t,n){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=n;var u=e.baseQueue,o=i.pending;if(o!==null){if(u!==null){var d=u.next;u.next=o.next,o.next=d}t.baseQueue=u=o,i.pending=null}if(o=e.baseState,u===null)e.memoizedState=o;else{t=u.next;var _=d=null,S=null,N=t,z=!1;do{var H=N.lane&-536870913;if(H!==N.lane?(Ae&H)===H:(Zn&H)===H){var k=N.revertLane;if(k===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),H===Yi&&(z=!0);else if((Zn&k)===k){N=N.next,k===Yi&&(z=!0);continue}else H={lane:0,revertLane:N.revertLane,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},S===null?(_=S=H,d=o):S=S.next=H,ge.lanes|=k,Ua|=k;H=N.action,fi&&n(o,H),o=N.hasEagerState?N.eagerState:n(o,H)}else k={lane:H,revertLane:N.revertLane,gesture:N.gesture,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},S===null?(_=S=k,d=o):S=S.next=k,ge.lanes|=H,Ua|=H;N=N.next}while(N!==null&&N!==t);if(S===null?d=o:S.next=_,!It(o,e.memoizedState)&&(ut=!0,z&&(n=Qi,n!==null)))throw n;e.memoizedState=o,e.baseState=d,e.baseQueue=S,i.lastRenderedState=o}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function xo(e){var t=it(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var i=n.dispatch,u=n.pending,o=t.memoizedState;if(u!==null){n.pending=null;var d=u=u.next;do o=e(o,d.action),d=d.next;while(d!==u);It(o,t.memoizedState)||(ut=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function yd(e,t,n){var i=ge,u=it(),o=Oe;if(o){if(n===void 0)throw Error(l(407));n=n()}else n=t();var d=!It((qe||u).memoizedState,n);if(d&&(u.memoizedState=n,ut=!0),u=u.queue,No(bd.bind(null,i,u,e),[e]),u.getSnapshot!==t||d||lt!==null&&lt.memoizedState.tag&1){if(i.flags|=2048,Wi(9,{destroy:void 0},vd.bind(null,i,u,n,t),null),He===null)throw Error(l(349));o||(Zn&127)!==0||_d(i,t,n)}return n}function _d(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t=Sl(),ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vd(e,t,n,i){t.value=n,t.getSnapshot=i,Sd(t)&&wd(e)}function bd(e,t,n){return n(function(){Sd(t)&&wd(e)})}function Sd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!It(e,n)}catch{return!0}}function wd(e){var t=ii(e,2);t!==null&&Kt(t,e,2)}function Co(e){var t=Dt();if(typeof e=="function"){var n=e;if(e=n(),fi){Ze(!0);try{n()}finally{Ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:e},t}function Ed(e,t,n,i){return e.baseState=n,Oo(e,qe,typeof i=="function"?i:In)}function hy(e,t,n,i,u){if(jl(e))throw Error(l(485));if(e=t.action,e!==null){var o={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){o.listeners.push(d)}};q.T!==null?n(!0):o.isTransition=!1,i(o),n=t.pending,n===null?(o.next=t.pending=o,Td(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Td(e,t){var n=t.action,i=t.payload,u=e.state;if(t.isTransition){var o=q.T,d={};q.T=d;try{var _=n(u,i),S=q.S;S!==null&&S(d,_),Ad(e,t,_)}catch(N){Ro(e,t,N)}finally{o!==null&&d.types!==null&&(o.types=d.types),q.T=o}}else try{o=n(u,i),Ad(e,t,o)}catch(N){Ro(e,t,N)}}function Ad(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){jd(e,t,i)},function(i){return Ro(e,t,i)}):jd(e,t,n)}function jd(e,t,n){t.status="fulfilled",t.value=n,Od(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Td(e,n)))}function Ro(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Od(t),t=t.next;while(t!==i)}e.action=null}function Od(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function xd(e,t){return t}function Cd(e,t){if(Oe){var n=He.formState;if(n!==null){e:{var i=ge;if(Oe){if(Qe){t:{for(var u=Qe,o=gn;u.nodeType!==8;){if(!o){u=null;break t}if(u=_n(u.nextSibling),u===null){u=null;break t}}o=u.data,u=o==="F!"||o==="F"?u:null}if(u){Qe=_n(u.nextSibling),i=u.data==="F!";break e}}Ta(i)}i=!1}i&&(t=n[0])}}return n=Dt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:t},n.queue=i,n=Jd.bind(null,ge,i),i.dispatch=n,i=Co(!1),o=zo.bind(null,ge,!1,i.queue),i=Dt(),u={state:t,dispatch:null,action:e,pending:null},i.queue=u,n=hy.bind(null,ge,u,o,n),u.dispatch=n,i.memoizedState=e,[t,n,!1]}function Rd(e){var t=it();return Nd(t,qe,e)}function Nd(e,t,n){if(t=Oo(e,t,xd)[0],e=El(In)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Fs(t)}catch(d){throw d===Xi?fl:d}else i=t;t=it();var u=t.queue,o=u.dispatch;return n!==t.memoizedState&&(ge.flags|=2048,Wi(9,{destroy:void 0},dy.bind(null,u,n),null)),[i,o,e]}function dy(e,t){e.action=t}function kd(e){var t=it(),n=qe;if(n!==null)return Nd(t,n,e);it(),t=t.memoizedState,n=it();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Wi(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=ge.updateQueue,t===null&&(t=Sl(),ge.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ud(){return it().memoizedState}function Tl(e,t,n,i){var u=Dt();ge.flags|=e,u.memoizedState=Wi(1|t,{destroy:void 0},n,i===void 0?null:i)}function Al(e,t,n,i){var u=it();i=i===void 0?null:i;var o=u.memoizedState.inst;qe!==null&&i!==null&&So(i,qe.memoizedState.deps)?u.memoizedState=Wi(t,o,n,i):(ge.flags|=e,u.memoizedState=Wi(1|t,o,n,i))}function Dd(e,t){Tl(8390656,8,e,t)}function No(e,t){Al(2048,8,e,t)}function fy(e){ge.flags|=4;var t=ge.updateQueue;if(t===null)t=Sl(),ge.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Md(e){var t=it().memoizedState;return fy({ref:t,nextImpl:e}),function(){if((Ue&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function zd(e,t){return Al(4,2,e,t)}function qd(e,t){return Al(4,4,e,t)}function Ld(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bd(e,t,n){n=n!=null?n.concat([e]):null,Al(4,4,Ld.bind(null,t,e),n)}function ko(){}function Hd(e,t){var n=it();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&So(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $d(e,t){var n=it();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&So(t,i[1]))return i[0];if(i=e(),fi){Ze(!0);try{e()}finally{Ze(!1)}}return n.memoizedState=[i,t],i}function Uo(e,t,n){return n===void 0||(Zn&1073741824)!==0&&(Ae&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Vf(),ge.lanes|=e,Ua|=e,n)}function Gd(e,t,n,i){return It(n,t)?n:Pi.current!==null?(e=Uo(e,n,i),It(e,t)||(ut=!0),e):(Zn&42)===0||(Zn&1073741824)!==0&&(Ae&261930)===0?(ut=!0,e.memoizedState=n):(e=Vf(),ge.lanes|=e,Ua|=e,t)}function Vd(e,t,n,i,u){var o=M.p;M.p=o!==0&&8>o?o:8;var d=q.T,_={};q.T=_,zo(e,!1,t,n);try{var S=u(),N=q.S;if(N!==null&&N(_,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=uy(S,i);er(e,t,z,an(e))}else er(e,t,i,an(e))}catch(H){er(e,t,{then:function(){},status:"rejected",reason:H},an())}finally{M.p=o,d!==null&&_.types!==null&&(d.types=_.types),q.T=d}}function my(){}function Do(e,t,n,i){if(e.tag!==5)throw Error(l(476));var u=Kd(e).queue;Vd(e,u,t,ne,n===null?my:function(){return Yd(e),n(i)})}function Kd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:ne},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Yd(e){var t=Kd(e);t.next===null&&(t=e.alternate.memoizedState),er(e,t.next.queue,{},an())}function Mo(){return St(yr)}function Qd(){return it().memoizedState}function Xd(){return it().memoizedState}function py(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=an();e=Oa(n);var i=xa(t,e,n);i!==null&&(Kt(i,t,n),Ps(i,t,n)),t={cache:oo()},e.payload=t;return}t=t.return}}function gy(e,t,n){var i=an();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},jl(e)?Pd(t,n):(n=Wu(e,t,n,i),n!==null&&(Kt(n,e,i),Zd(n,t,i)))}function Jd(e,t,n){var i=an();er(e,t,n,i)}function er(e,t,n,i){var u={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(jl(e))Pd(t,u);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,_=o(d,n);if(u.hasEagerState=!0,u.eagerState=_,It(_,d))return rl(e,t,u,0),He===null&&sl(),!1}catch{}if(n=Wu(e,t,u,i),n!==null)return Kt(n,e,i),Zd(n,t,i),!0}return!1}function zo(e,t,n,i){if(i={lane:2,revertLane:mc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},jl(e)){if(t)throw Error(l(479))}else t=Wu(e,n,i,2),t!==null&&Kt(t,e,2)}function jl(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function Pd(e,t){Zi=vl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zd(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,cn(e,n)}}var tr={readContext:St,use:wl,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useLayoutEffect:Fe,useInsertionEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useSyncExternalStore:Fe,useId:Fe,useHostTransitionStatus:Fe,useFormState:Fe,useActionState:Fe,useOptimistic:Fe,useMemoCache:Fe,useCacheRefresh:Fe};tr.useEffectEvent=Fe;var Id={readContext:St,use:wl,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Dd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Tl(4194308,4,Ld.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tl(4194308,4,e,t)},useInsertionEffect:function(e,t){Tl(4,2,e,t)},useMemo:function(e,t){var n=Dt();t=t===void 0?null:t;var i=e();if(fi){Ze(!0);try{e()}finally{Ze(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Dt();if(n!==void 0){var u=n(t);if(fi){Ze(!0);try{n(t)}finally{Ze(!1)}}}else u=t;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=gy.bind(null,ge,e),[i.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Co(e);var t=e.queue,n=Jd.bind(null,ge,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ko,useDeferredValue:function(e,t){var n=Dt();return Uo(n,e,t)},useTransition:function(){var e=Co(!1);return e=Vd.bind(null,ge,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=ge,u=Dt();if(Oe){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),He===null)throw Error(l(349));(Ae&127)!==0||_d(i,t,n)}u.memoizedState=n;var o={value:n,getSnapshot:t};return u.queue=o,Dd(bd.bind(null,i,o,e),[e]),i.flags|=2048,Wi(9,{destroy:void 0},vd.bind(null,i,o,n,t),null),n},useId:function(){var e=Dt(),t=He.identifierPrefix;if(Oe){var n=Ln,i=qn;n=(i&~(1<<32-xt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=bl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=oy++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mo,useFormState:Cd,useActionState:Cd,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,ge,!0,n),n.dispatch=t,[e,t]},useMemoCache:jo,useCacheRefresh:function(){return Dt().memoizedState=py.bind(null,ge)},useEffectEvent:function(e){var t=Dt(),n={impl:e};return t.memoizedState=n,function(){if((Ue&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},qo={readContext:St,use:wl,useCallback:Hd,useContext:St,useEffect:No,useImperativeHandle:Bd,useInsertionEffect:zd,useLayoutEffect:qd,useMemo:$d,useReducer:El,useRef:Ud,useState:function(){return El(In)},useDebugValue:ko,useDeferredValue:function(e,t){var n=it();return Gd(n,qe.memoizedState,e,t)},useTransition:function(){var e=El(In)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:yd,useId:Qd,useHostTransitionStatus:Mo,useFormState:Rd,useActionState:Rd,useOptimistic:function(e,t){var n=it();return Ed(n,qe,e,t)},useMemoCache:jo,useCacheRefresh:Xd};qo.useEffectEvent=Md;var Wd={readContext:St,use:wl,useCallback:Hd,useContext:St,useEffect:No,useImperativeHandle:Bd,useInsertionEffect:zd,useLayoutEffect:qd,useMemo:$d,useReducer:xo,useRef:Ud,useState:function(){return xo(In)},useDebugValue:ko,useDeferredValue:function(e,t){var n=it();return qe===null?Uo(n,e,t):Gd(n,qe.memoizedState,e,t)},useTransition:function(){var e=xo(In)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Fs(e),t]},useSyncExternalStore:yd,useId:Qd,useHostTransitionStatus:Mo,useFormState:kd,useActionState:kd,useOptimistic:function(e,t){var n=it();return qe!==null?Ed(n,qe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:jo,useCacheRefresh:Xd};Wd.useEffectEvent=Md;function Lo(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bo={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=an(),u=Oa(i);u.payload=t,n!=null&&(u.callback=n),t=xa(e,u,i),t!==null&&(Kt(t,e,i),Ps(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=an(),u=Oa(i);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=xa(e,u,i),t!==null&&(Kt(t,e,i),Ps(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=an(),i=Oa(n);i.tag=2,t!=null&&(i.callback=t),t=xa(e,i,n),t!==null&&(Kt(t,e,n),Ps(t,e,n))}};function Fd(e,t,n,i,u,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,d):t.prototype&&t.prototype.isPureReactComponent?!$s(n,i)||!$s(u,o):!0}function ef(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function mi(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n}function tf(e){il(e)}function nf(e){console.error(e)}function af(e){il(e)}function Ol(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function sf(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ho(e,t,n){return n=Oa(n),n.tag=3,n.payload={element:null},n.callback=function(){Ol(e,t)},n}function rf(e){return e=Oa(e),e.tag=3,e}function lf(e,t,n,i){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var o=i.value;e.payload=function(){return u(o)},e.callback=function(){sf(t,n,i)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){sf(t,n,i),typeof u!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})})}function yy(e,t,n,i,u){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ki(t,n,u,!0),n=Ft.current,n!==null){switch(n.tag){case 31:case 13:return yn===null?Bl():n.alternate===null&&et===0&&(et=3),n.flags&=-257,n.flags|=65536,n.lanes=u,i===ml?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),hc(e,i,u)),!1;case 22:return n.flags|=65536,i===ml?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),hc(e,i,u)),!1}throw Error(l(435,n.tag))}return hc(e,i,u),Bl(),!1}if(Oe)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,i!==io&&(e=Error(l(422),{cause:i}),Ks(fn(e,n)))):(i!==io&&(t=Error(l(423),{cause:i}),Ks(fn(t,n))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=fn(i,n),u=Ho(e.stateNode,i,u),go(e,u),et!==4&&(et=2)),!1;var o=Error(l(520),{cause:i});if(o=fn(o,n),or===null?or=[o]:or.push(o),et!==4&&(et=2),t===null)return!0;i=fn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=u&-u,n.lanes|=e,e=Ho(n.stateNode,i,e),go(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Da===null||!Da.has(o))))return n.flags|=65536,u&=-u,n.lanes|=u,u=rf(u),lf(u,e,n,i),go(n,u),!1}n=n.return}while(n!==null);return!1}var $o=Error(l(461)),ut=!1;function wt(e,t,n,i){t.child=e===null?cd(t,null,n,i):di(t,e.child,n,i)}function uf(e,t,n,i,u){n=n.render;var o=t.ref;if("ref"in i){var d={};for(var _ in i)_!=="ref"&&(d[_]=i[_])}else d=i;return ui(t),i=wo(e,t,n,d,o,u),_=Eo(),e!==null&&!ut?(To(e,t,u),Wn(e,t,u)):(Oe&&_&&no(t),t.flags|=1,wt(e,t,i,u),t.child)}function of(e,t,n,i,u){if(e===null){var o=n.type;return typeof o=="function"&&!Fu(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,cf(e,t,o,i,u)):(e=ul(n.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Po(e,u)){var d=o.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(d,i)&&e.ref===t.ref)return Wn(e,t,u)}return t.flags|=1,e=Qn(o,i),e.ref=t.ref,e.return=t,t.child=e}function cf(e,t,n,i,u){if(e!==null){var o=e.memoizedProps;if($s(o,i)&&e.ref===t.ref)if(ut=!1,t.pendingProps=i=o,Po(e,u))(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Wn(e,t,u)}return Go(e,t,n,i,u)}function hf(e,t,n,i){var u=i.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|n:n,e!==null){for(i=t.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;i=u&~o}else i=0,t.child=null;return df(e,t,o,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&dl(t,o!==null?o.cachePool:null),o!==null?fd(t,o):_o(),md(t);else return i=t.lanes=536870912,df(e,t,o!==null?o.baseLanes|n:n,n,i)}else o!==null?(dl(t,o.cachePool),fd(t,o),Ra(),t.memoizedState=null):(e!==null&&dl(t,null),_o(),Ra());return wt(e,t,u,n),t.child}function nr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function df(e,t,n,i,u){var o=ho();return o=o===null?null:{parent:rt._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},e!==null&&dl(t,null),_o(),md(t),e!==null&&Ki(e,t,i,!0),t.childLanes=u,null}function xl(e,t){return t=Rl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ff(e,t,n){return di(t,e.child,null,n),e=xl(t,t.pendingProps),e.flags|=2,en(t),t.memoizedState=null,e}function _y(e,t,n){var i=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Oe){if(i.mode==="hidden")return e=xl(t,i),t.lanes=536870912,nr(null,e);if(bo(t),(e=Qe)?(e=Am(e,gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:qn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},n=Ph(e),n.return=t,t.child=n,bt=t,Qe=null)):e=null,e===null)throw Ta(t);return t.lanes=536870912,null}return xl(t,i)}var o=e.memoizedState;if(o!==null){var d=o.dehydrated;if(bo(t),u)if(t.flags&256)t.flags&=-257,t=ff(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(ut||Ki(e,t,n,!1),u=(n&e.childLanes)!==0,ut||u){if(i=He,i!==null&&(d=Fa(i,n),d!==0&&d!==o.retryLane))throw o.retryLane=d,ii(e,d),Kt(i,e,d),$o;Bl(),t=ff(e,t,n)}else e=o.treeContext,Qe=_n(d.nextSibling),bt=t,Oe=!0,Ea=null,gn=!1,e!==null&&Wh(t,e),t=xl(t,i),t.flags|=4096;return t}return e=Qn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Cl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Go(e,t,n,i,u){return ui(t),n=wo(e,t,n,i,void 0,u),i=Eo(),e!==null&&!ut?(To(e,t,u),Wn(e,t,u)):(Oe&&i&&no(t),t.flags|=1,wt(e,t,n,u),t.child)}function mf(e,t,n,i,u,o){return ui(t),t.updateQueue=null,n=gd(t,i,n,u),pd(e),i=Eo(),e!==null&&!ut?(To(e,t,o),Wn(e,t,o)):(Oe&&i&&no(t),t.flags|=1,wt(e,t,n,o),t.child)}function pf(e,t,n,i,u){if(ui(t),t.stateNode===null){var o=Hi,d=n.contextType;typeof d=="object"&&d!==null&&(o=St(d)),o=new n(i,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Bo,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=i,o.state=t.memoizedState,o.refs={},mo(t),d=n.contextType,o.context=typeof d=="object"&&d!==null?St(d):Hi,o.state=t.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Lo(t,n,d,i),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(d=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),d!==o.state&&Bo.enqueueReplaceState(o,o.state,null),Is(t,i,o,u),Zs(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){o=t.stateNode;var _=t.memoizedProps,S=mi(n,_);o.props=S;var N=o.context,z=n.contextType;d=Hi,typeof z=="object"&&z!==null&&(d=St(z));var H=n.getDerivedStateFromProps;z=typeof H=="function"||typeof o.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,z||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(_||N!==d)&&ef(t,o,i,d),ja=!1;var k=t.memoizedState;o.state=k,Is(t,i,o,u),Zs(),N=t.memoizedState,_||k!==N||ja?(typeof H=="function"&&(Lo(t,n,H,i),N=t.memoizedState),(S=ja||Fd(t,n,S,i,k,N,d))?(z||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=N),o.props=i,o.state=N,o.context=d,i=S):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,po(e,t),d=t.memoizedProps,z=mi(n,d),o.props=z,H=t.pendingProps,k=o.context,N=n.contextType,S=Hi,typeof N=="object"&&N!==null&&(S=St(N)),_=n.getDerivedStateFromProps,(N=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==H||k!==S)&&ef(t,o,i,S),ja=!1,k=t.memoizedState,o.state=k,Is(t,i,o,u),Zs();var U=t.memoizedState;d!==H||k!==U||ja||e!==null&&e.dependencies!==null&&cl(e.dependencies)?(typeof _=="function"&&(Lo(t,n,_,i),U=t.memoizedState),(z=ja||Fd(t,n,z,i,k,U,S)||e!==null&&e.dependencies!==null&&cl(e.dependencies))?(N||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,U,S),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,U,S)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=U),o.props=i,o.state=U,o.context=S,i=z):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,Cl(e,t),i=(t.flags&128)!==0,o||i?(o=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&i?(t.child=di(t,e.child,null,u),t.child=di(t,null,n,u)):wt(e,t,n,u),t.memoizedState=o.state,e=t.child):e=Wn(e,t,u),e}function gf(e,t,n,i){return ri(),t.flags|=256,wt(e,t,n,i),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ko(e){return{baseLanes:e,cachePool:id()}}function Yo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=nn),e}function yf(e,t,n){var i=t.pendingProps,u=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),d&&(u=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(u?Ca(t):Ra(),(e=Qe)?(e=Am(e,gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:qn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},n=Ph(e),n.return=t,t.child=n,bt=t,Qe=null)):e=null,e===null)throw Ta(t);return Oc(e)?t.lanes=32:t.lanes=536870912,null}var _=i.children;return i=i.fallback,u?(Ra(),u=t.mode,_=Rl({mode:"hidden",children:_},u),i=si(i,u,n,null),_.return=t,i.return=t,_.sibling=i,t.child=_,i=t.child,i.memoizedState=Ko(n),i.childLanes=Yo(e,d,n),t.memoizedState=Vo,nr(null,i)):(Ca(t),Qo(t,_))}var S=e.memoizedState;if(S!==null&&(_=S.dehydrated,_!==null)){if(o)t.flags&256?(Ca(t),t.flags&=-257,t=Xo(e,t,n)):t.memoizedState!==null?(Ra(),t.child=e.child,t.flags|=128,t=null):(Ra(),_=i.fallback,u=t.mode,i=Rl({mode:"visible",children:i.children},u),_=si(_,u,n,null),_.flags|=2,i.return=t,_.return=t,i.sibling=_,t.child=i,di(t,e.child,null,n),i=t.child,i.memoizedState=Ko(n),i.childLanes=Yo(e,d,n),t.memoizedState=Vo,t=nr(null,i));else if(Ca(t),Oc(_)){if(d=_.nextSibling&&_.nextSibling.dataset,d)var N=d.dgst;d=N,i=Error(l(419)),i.stack="",i.digest=d,Ks({value:i,source:null,stack:null}),t=Xo(e,t,n)}else if(ut||Ki(e,t,n,!1),d=(n&e.childLanes)!==0,ut||d){if(d=He,d!==null&&(i=Fa(d,n),i!==0&&i!==S.retryLane))throw S.retryLane=i,ii(e,i),Kt(d,e,i),$o;jc(_)||Bl(),t=Xo(e,t,n)}else jc(_)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Qe=_n(_.nextSibling),bt=t,Oe=!0,Ea=null,gn=!1,e!==null&&Wh(t,e),t=Qo(t,i.children),t.flags|=4096);return t}return u?(Ra(),_=i.fallback,u=t.mode,S=e.child,N=S.sibling,i=Qn(S,{mode:"hidden",children:i.children}),i.subtreeFlags=S.subtreeFlags&65011712,N!==null?_=Qn(N,_):(_=si(_,u,n,null),_.flags|=2),_.return=t,i.return=t,i.sibling=_,t.child=i,nr(null,i),i=t.child,_=e.child.memoizedState,_===null?_=Ko(n):(u=_.cachePool,u!==null?(S=rt._currentValue,u=u.parent!==S?{parent:S,pool:S}:u):u=id(),_={baseLanes:_.baseLanes|n,cachePool:u}),i.memoizedState=_,i.childLanes=Yo(e,d,n),t.memoizedState=Vo,nr(e.child,i)):(Ca(t),n=e.child,e=n.sibling,n=Qn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=n,t.memoizedState=null,n)}function Qo(e,t){return t=Rl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Rl(e,t){return e=Wt(22,e,null,t),e.lanes=0,e}function Xo(e,t,n){return di(t,e.child,null,n),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _f(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),lo(e.return,t,n)}function Jo(e,t,n,i,u,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:u,treeForkCount:o}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=n,d.tailMode=u,d.treeForkCount=o)}function vf(e,t,n){var i=t.pendingProps,u=i.revealOrder,o=i.tail;i=i.children;var d=at.current,_=(d&2)!==0;if(_?(d=d&1|2,t.flags|=128):d&=1,J(at,d),wt(e,t,i,n),i=Oe?Vs:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_f(e,n,t);else if(e.tag===19)_f(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&_l(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),Jo(t,!1,u,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&_l(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}Jo(t,!0,n,null,o,i);break;case"together":Jo(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ki(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Po(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&cl(e)))}function vy(e,t,n){switch(t.tag){case 3:ht(t,t.stateNode.containerInfo),Aa(t,rt,e.memoizedState.cache),ri();break;case 27:case 5:ca(t);break;case 4:ht(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,bo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ca(t),t.flags|=128,null):(n&t.child.childLanes)!==0?yf(e,t,n):(Ca(t),e=Wn(e,t,n),e!==null?e.sibling:null);Ca(t);break;case 19:var u=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ki(e,t,n,!1),i=(n&t.childLanes)!==0),u){if(i)return vf(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),J(at,at.current),i)break;return null;case 22:return t.lanes=0,hf(e,t,n,t.pendingProps);case 24:Aa(t,rt,e.memoizedState.cache)}return Wn(e,t,n)}function bf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ut=!0;else{if(!Po(e,n)&&(t.flags&128)===0)return ut=!1,vy(e,t,n);ut=(e.flags&131072)!==0}else ut=!1,Oe&&(t.flags&1048576)!==0&&Ih(t,Vs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ci(t.elementType),t.type=e,typeof e=="function")Fu(e)?(i=mi(e,i),t.tag=1,t=pf(null,t,e,i,n)):(t.tag=0,t=Go(null,t,e,i,n));else{if(e!=null){var u=e.$$typeof;if(u===ie){t.tag=11,t=uf(null,t,e,i,n);break e}else if(u===te){t.tag=14,t=of(null,t,e,i,n);break e}}throw t=Qt(e)||e,Error(l(306,t,""))}}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,u=mi(i,t.pendingProps),pf(e,t,i,u,n);case 3:e:{if(ht(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var o=t.memoizedState;u=o.element,po(e,t),Is(t,i,null,n);var d=t.memoizedState;if(i=d.cache,Aa(t,rt,i),i!==o.cache&&uo(t,[rt],n,!0),Zs(),i=d.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=gf(e,t,i,n);break e}else if(i!==u){u=fn(Error(l(424)),t),Ks(u),t=gf(e,t,i,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Qe=_n(e.firstChild),bt=t,Oe=!0,Ea=null,gn=!0,n=cd(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ri(),i===u){t=Wn(e,t,n);break e}wt(e,t,i,n)}t=t.child}return t;case 26:return Cl(e,t),e===null?(n=Nm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Oe||(n=t.type,e=t.pendingProps,i=Ql(be.current).createElement(n),i[Ie]=t,i[Te]=e,Et(i,n,e),Ve(i),t.stateNode=i):t.memoizedState=Nm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ca(t),e===null&&Oe&&(i=t.stateNode=xm(t.type,t.pendingProps,be.current),bt=t,gn=!0,u=Qe,La(t.type)?(xc=u,Qe=_n(i.firstChild)):Qe=u),wt(e,t,t.pendingProps.children,n),Cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((u=i=Qe)&&(i=Py(i,t.type,t.pendingProps,gn),i!==null?(t.stateNode=i,bt=t,Qe=_n(i.firstChild),gn=!1,u=!0):u=!1),u||Ta(t)),ca(t),u=t.type,o=t.pendingProps,d=e!==null?e.memoizedProps:null,i=o.children,Ec(u,o)?i=null:d!==null&&Ec(u,d)&&(t.flags|=32),t.memoizedState!==null&&(u=wo(e,t,cy,null,null,n),yr._currentValue=u),Cl(e,t),wt(e,t,i,n),t.child;case 6:return e===null&&Oe&&((e=n=Qe)&&(n=Zy(n,t.pendingProps,gn),n!==null?(t.stateNode=n,bt=t,Qe=null,e=!0):e=!1),e||Ta(t)),null;case 13:return yf(e,t,n);case 4:return ht(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=di(t,null,i,n):wt(e,t,i,n),t.child;case 11:return uf(e,t,t.type,t.pendingProps,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Aa(t,t.type,i.value),wt(e,t,i.children,n),t.child;case 9:return u=t.type._context,i=t.pendingProps.children,ui(t),u=St(u),i=i(u),t.flags|=1,wt(e,t,i,n),t.child;case 14:return of(e,t,t.type,t.pendingProps,n);case 15:return cf(e,t,t.type,t.pendingProps,n);case 19:return vf(e,t,n);case 31:return _y(e,t,n);case 22:return hf(e,t,n,t.pendingProps);case 24:return ui(t),i=St(rt),e===null?(u=ho(),u===null&&(u=He,o=oo(),u.pooledCache=o,o.refCount++,o!==null&&(u.pooledCacheLanes|=n),u=o),t.memoizedState={parent:i,cache:u},mo(t),Aa(t,rt,u)):((e.lanes&n)!==0&&(po(e,t),Is(t,null,null,n),Zs()),u=e.memoizedState,o=t.memoizedState,u.parent!==i?(u={parent:i,cache:i},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Aa(t,rt,i)):(i=o.cache,Aa(t,rt,i),i!==u.cache&&uo(t,[rt],n,!0))),wt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Fn(e){e.flags|=4}function Zo(e,t,n,i,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Xf())e.flags|=8192;else throw hi=ml,fo}else e.flags&=-16777217}function Sf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zm(t))if(Xf())e.flags|=8192;else throw hi=ml,fo}function Nl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ha():536870912,e.lanes|=t,ns|=t)}function ar(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function by(e,t,n){var i=t.pendingProps;switch(ao(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return Xe(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Pn(rt),Ge(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Vi(t)?Fn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,so())),Xe(t),null;case 26:var u=t.type,o=t.memoizedState;return e===null?(Fn(t),o!==null?(Xe(t),Sf(t,o)):(Xe(t),Zo(t,u,null,i,n))):o?o!==e.memoizedState?(Fn(t),Xe(t),Sf(t,o)):(Xe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Fn(t),Xe(t),Zo(t,u,e,i,n)),null;case 27:if(zt(t),n=be.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Xe(t),null}e=I.current,Vi(t)?Fh(t):(e=xm(u,i,n),t.stateNode=e,Fn(t))}return Xe(t),null;case 5:if(zt(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return Xe(t),null}if(o=I.current,Vi(t))Fh(t);else{var d=Ql(be.current);switch(o){case 1:o=d.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:o=d.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":o=d.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":o=d.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof i.is=="string"?d.createElement("select",{is:i.is}):d.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o=typeof i.is=="string"?d.createElement(u,{is:i.is}):d.createElement(u)}}o[Ie]=t,o[Te]=i;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=o;e:switch(Et(o,u,i),u){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Fn(t)}}return Xe(t),Zo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Fn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=be.current,Vi(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,u=bt,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[Ie]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||ym(e.nodeValue,n)),e||Ta(t,!0)}else e=Ql(e).createTextNode(i),e[Ie]=t,t.stateNode=e}return Xe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Vi(t),n!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Ie]=t}else ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),e=!1}else n=so(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(en(t),t):(en(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Xe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Vi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[Ie]=t}else ri(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),u=!1}else u=so(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(en(t),t):(en(t),null)}return en(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==u&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Nl(t,t.updateQueue),Xe(t),null);case 4:return Ge(),e===null&&_c(t.stateNode.containerInfo),Xe(t),null;case 10:return Pn(t.type),Xe(t),null;case 19:if($(at),i=t.memoizedState,i===null)return Xe(t),null;if(u=(t.flags&128)!==0,o=i.rendering,o===null)if(u)ar(i,!1);else{if(et!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=_l(e),o!==null){for(t.flags|=128,ar(i,!1),e=o.updateQueue,t.updateQueue=e,Nl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Jh(n,e),n=n.sibling;return J(at,at.current&1|2),Oe&&Xn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Ot()>zl&&(t.flags|=128,u=!0,ar(i,!1),t.lanes=4194304)}else{if(!u)if(e=_l(o),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Nl(t,e),ar(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return Xe(t),null}else 2*Ot()-i.renderingStartTime>zl&&n!==536870912&&(t.flags|=128,u=!0,ar(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(e=i.last,e!==null?e.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ot(),e.sibling=null,n=at.current,J(at,u?n&1|2:n&1),Oe&&Xn(t,i.treeForkCount),e):(Xe(t),null);case 22:case 23:return en(t),vo(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),n=t.updateQueue,n!==null&&Nl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&$(oi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pn(rt),Xe(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Sy(e,t){switch(ao(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pn(rt),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return zt(t),null;case 31:if(t.memoizedState!==null){if(en(t),t.alternate===null)throw Error(l(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(en(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(at),null;case 4:return Ge(),null;case 10:return Pn(t.type),null;case 22:case 23:return en(t),vo(),e!==null&&$(oi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pn(rt),null;case 25:return null;default:return null}}function wf(e,t){switch(ao(t),t.tag){case 3:Pn(rt),Ge();break;case 26:case 27:case 5:zt(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&en(t);break;case 13:en(t);break;case 19:$(at);break;case 10:Pn(t.type);break;case 22:case 23:en(t),vo(),e!==null&&$(oi);break;case 24:Pn(rt)}}function ir(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var u=i.next;n=u;do{if((n.tag&e)===e){i=void 0;var o=n.create,d=n.inst;i=o(),d.destroy=i}n=n.next}while(n!==u)}}catch(_){ze(t,t.return,_)}}function Na(e,t,n){try{var i=t.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var o=u.next;i=o;do{if((i.tag&e)===e){var d=i.inst,_=d.destroy;if(_!==void 0){d.destroy=void 0,u=t;var S=n,N=_;try{N()}catch(z){ze(u,S,z)}}}i=i.next}while(i!==o)}}catch(z){ze(t,t.return,z)}}function Ef(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{dd(t,n)}catch(i){ze(e,e.return,i)}}}function Tf(e,t,n){n.props=mi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ze(e,t,i)}}function sr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(u){ze(e,t,u)}}function Bn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(u){ze(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){ze(e,t,u)}else n.current=null}function Af(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(u){ze(e,e.return,u)}}function Io(e,t,n){try{var i=e.stateNode;Vy(i,e.type,n,t),i[Te]=t}catch(u){ze(e,e.return,u)}}function jf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&La(e.type)||e.tag===4}function Wo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&La(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=p));else if(i!==4&&(i===27&&La(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Fo(e,t,n),e=e.sibling;e!==null;)Fo(e,t,n),e=e.sibling}function kl(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&La(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(kl(e,t,n),e=e.sibling;e!==null;)kl(e,t,n),e=e.sibling}function Of(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Et(t,i,n),t[Ie]=e,t[Te]=n}catch(o){ze(e,e.return,o)}}var ea=!1,ot=!1,ec=!1,xf=typeof WeakSet=="function"?WeakSet:Set,yt=null;function wy(e,t){if(e=e.containerInfo,Sc=Fl,e=Bh(e),Qu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var u=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var d=0,_=-1,S=-1,N=0,z=0,H=e,k=null;t:for(;;){for(var U;H!==n||u!==0&&H.nodeType!==3||(_=d+u),H!==o||i!==0&&H.nodeType!==3||(S=d+i),H.nodeType===3&&(d+=H.nodeValue.length),(U=H.firstChild)!==null;)k=H,H=U;for(;;){if(H===e)break t;if(k===n&&++N===u&&(_=d),k===o&&++z===i&&(S=d),(U=H.nextSibling)!==null)break;H=k,k=H.parentNode}H=U}n=_===-1||S===-1?null:{start:_,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(wc={focusedElem:e,selectionRange:n},Fl=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){switch(t=yt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)u=e[n],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,u=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var W=mi(n.type,u);e=i.getSnapshotBeforeUpdate(W,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(ue){ze(n,n.return,ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ac(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ac(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}}function Cf(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:na(e,n),i&4&&ir(5,n);break;case 1:if(na(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(d){ze(n,n.return,d)}else{var u=mi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){ze(n,n.return,d)}}i&64&&Ef(n),i&512&&sr(n,n.return);break;case 3:if(na(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{dd(e,t)}catch(d){ze(n,n.return,d)}}break;case 27:t===null&&i&4&&Of(n);case 26:case 5:na(e,n),t===null&&i&4&&Af(n),i&512&&sr(n,n.return);break;case 12:na(e,n);break;case 31:na(e,n),i&4&&kf(e,n);break;case 13:na(e,n),i&4&&Uf(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Ny.bind(null,n),Iy(e,n))));break;case 22:if(i=n.memoizedState!==null||ea,!i){t=t!==null&&t.memoizedState!==null||ot,u=ea;var o=ot;ea=i,(ot=t)&&!o?aa(e,n,(n.subtreeFlags&8772)!==0):na(e,n),ea=u,ot=o}break;case 30:break;default:na(e,n)}}function Rf(e){var t=e.alternate;t!==null&&(e.alternate=null,Rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,Ht=!1;function ta(e,t,n){for(n=n.child;n!==null;)Nf(e,t,n),n=n.sibling}function Nf(e,t,n){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(de,n)}catch{}switch(n.tag){case 26:ot||Bn(n,t),ta(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||Bn(n,t);var i=Pe,u=Ht;La(n.type)&&(Pe=n.stateNode,Ht=!1),ta(e,t,n),mr(n.stateNode),Pe=i,Ht=u;break;case 5:ot||Bn(n,t);case 6:if(i=Pe,u=Ht,Pe=null,ta(e,t,n),Pe=i,Ht=u,Pe!==null)if(Ht)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(n.stateNode)}catch(o){ze(n,t,o)}else try{Pe.removeChild(n.stateNode)}catch(o){ze(n,t,o)}break;case 18:Pe!==null&&(Ht?(e=Pe,Em(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),cs(e)):Em(Pe,n.stateNode));break;case 4:i=Pe,u=Ht,Pe=n.stateNode.containerInfo,Ht=!0,ta(e,t,n),Pe=i,Ht=u;break;case 0:case 11:case 14:case 15:Na(2,n,t),ot||Na(4,n,t),ta(e,t,n);break;case 1:ot||(Bn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Tf(n,t,i)),ta(e,t,n);break;case 21:ta(e,t,n);break;case 22:ot=(i=ot)||n.memoizedState!==null,ta(e,t,n),ot=i;break;default:ta(e,t,n)}}function kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{cs(e)}catch(n){ze(t,t.return,n)}}}function Uf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cs(e)}catch(n){ze(t,t.return,n)}}function Ey(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xf),t;default:throw Error(l(435,e.tag))}}function Ul(e,t){var n=Ey(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var u=ky.bind(null,e,i);i.then(u,u)}})}function $t(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var u=n[i],o=e,d=t,_=d;e:for(;_!==null;){switch(_.tag){case 27:if(La(_.type)){Pe=_.stateNode,Ht=!1;break e}break;case 5:Pe=_.stateNode,Ht=!1;break e;case 3:case 4:Pe=_.stateNode.containerInfo,Ht=!0;break e}_=_.return}if(Pe===null)throw Error(l(160));Nf(o,d,u),Pe=null,Ht=!1,o=u.alternate,o!==null&&(o.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Df(t,e),t=t.sibling}var jn=null;function Df(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$t(t,e),Gt(e),i&4&&(Na(3,e,e.return),ir(3,e),Na(5,e,e.return));break;case 1:$t(t,e),Gt(e),i&512&&(ot||n===null||Bn(n,n.return)),i&64&&ea&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var u=jn;if($t(t,e),Gt(e),i&512&&(ot||n===null||Bn(n,n.return)),i&4){var o=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":o=u.getElementsByTagName("title")[0],(!o||o[Rt]||o[Ie]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=u.createElement(i),u.head.insertBefore(o,u.querySelector("head > title"))),Et(o,i,n),o[Ie]=e,Ve(o),i=o;break e;case"link":var d=Dm("link","href",u).get(i+(n.href||""));if(d){for(var _=0;_<d.length;_++)if(o=d[_],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(_,1);break t}}o=u.createElement(i),Et(o,i,n),u.head.appendChild(o);break;case"meta":if(d=Dm("meta","content",u).get(i+(n.content||""))){for(_=0;_<d.length;_++)if(o=d[_],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(_,1);break t}}o=u.createElement(i),Et(o,i,n),u.head.appendChild(o);break;default:throw Error(l(468,i))}o[Ie]=e,Ve(o),i=o}e.stateNode=i}else Mm(u,e.type,e.stateNode);else e.stateNode=Um(u,i,e.memoizedProps);else o!==i?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,i===null?Mm(u,e.type,e.stateNode):Um(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Io(e,e.memoizedProps,n.memoizedProps)}break;case 27:$t(t,e),Gt(e),i&512&&(ot||n===null||Bn(n,n.return)),n!==null&&i&4&&Io(e,e.memoizedProps,n.memoizedProps);break;case 5:if($t(t,e),Gt(e),i&512&&(ot||n===null||Bn(n,n.return)),e.flags&32){u=e.stateNode;try{Sa(u,"")}catch(W){ze(e,e.return,W)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,Io(e,u,n!==null?n.memoizedProps:u)),i&1024&&(ec=!0);break;case 6:if($t(t,e),Gt(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(W){ze(e,e.return,W)}}break;case 3:if(Pl=null,u=jn,jn=Xl(t.containerInfo),$t(t,e),jn=u,Gt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{cs(t.containerInfo)}catch(W){ze(e,e.return,W)}ec&&(ec=!1,Mf(e));break;case 4:i=jn,jn=Xl(e.stateNode.containerInfo),$t(t,e),Gt(e),jn=i;break;case 12:$t(t,e),Gt(e);break;case 31:$t(t,e),Gt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ul(e,i)));break;case 13:$t(t,e),Gt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ml=Ot()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ul(e,i)));break;case 22:u=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,N=ea,z=ot;if(ea=N||u,ot=z||S,$t(t,e),ot=z,ea=N,Gt(e),i&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(n===null||S||ea||ot||pi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(o=S.stateNode,u)d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{_=S.stateNode;var H=S.memoizedProps.style,k=H!=null&&H.hasOwnProperty("display")?H.display:null;_.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(W){ze(S,S.return,W)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(W){ze(S,S.return,W)}}}else if(t.tag===18){if(n===null){S=t;try{var U=S.stateNode;u?Tm(U,!0):Tm(S.stateNode,!1)}catch(W){ze(S,S.return,W)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Ul(e,n))));break;case 19:$t(t,e),Gt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ul(e,i)));break;case 30:break;case 21:break;default:$t(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(jf(i)){n=i;break}i=i.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var u=n.stateNode,o=Wo(e);kl(e,o,u);break;case 5:var d=n.stateNode;n.flags&32&&(Sa(d,""),n.flags&=-33);var _=Wo(e);kl(e,_,d);break;case 3:case 4:var S=n.stateNode.containerInfo,N=Wo(e);Fo(e,N,S);break;default:throw Error(l(161))}}catch(z){ze(e,e.return,z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Mf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Cf(e,t.alternate,t),t=t.sibling}function pi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Na(4,t,t.return),pi(t);break;case 1:Bn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Tf(t,t.return,n),pi(t);break;case 27:mr(t.stateNode);case 26:case 5:Bn(t,t.return),pi(t);break;case 22:t.memoizedState===null&&pi(t);break;case 30:pi(t);break;default:pi(t)}e=e.sibling}}function aa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,u=e,o=t,d=o.flags;switch(o.tag){case 0:case 11:case 15:aa(u,o,n),ir(4,o);break;case 1:if(aa(u,o,n),i=o,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(N){ze(i,i.return,N)}if(i=o,u=i.updateQueue,u!==null){var _=i.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)hd(S[u],_)}catch(N){ze(i,i.return,N)}}n&&d&64&&Ef(o),sr(o,o.return);break;case 27:Of(o);case 26:case 5:aa(u,o,n),n&&i===null&&d&4&&Af(o),sr(o,o.return);break;case 12:aa(u,o,n);break;case 31:aa(u,o,n),n&&d&4&&kf(u,o);break;case 13:aa(u,o,n),n&&d&4&&Uf(u,o);break;case 22:o.memoizedState===null&&aa(u,o,n),sr(o,o.return);break;case 30:break;default:aa(u,o,n)}t=t.sibling}}function tc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ys(n))}function nc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ys(e))}function On(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zf(e,t,n,i),t=t.sibling}function zf(e,t,n,i){var u=t.flags;switch(t.tag){case 0:case 11:case 15:On(e,t,n,i),u&2048&&ir(9,t);break;case 1:On(e,t,n,i);break;case 3:On(e,t,n,i),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ys(e)));break;case 12:if(u&2048){On(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,d=o.id,_=o.onPostCommit;typeof _=="function"&&_(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ze(t,t.return,S)}}else On(e,t,n,i);break;case 31:On(e,t,n,i);break;case 13:On(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,d=t.alternate,t.memoizedState!==null?o._visibility&2?On(e,t,n,i):rr(e,t):o._visibility&2?On(e,t,n,i):(o._visibility|=2,Fi(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),u&2048&&tc(d,t);break;case 24:On(e,t,n,i),u&2048&&nc(t.alternate,t);break;default:On(e,t,n,i)}}function Fi(e,t,n,i,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,d=t,_=n,S=i,N=d.flags;switch(d.tag){case 0:case 11:case 15:Fi(o,d,_,S,u),ir(8,d);break;case 23:break;case 22:var z=d.stateNode;d.memoizedState!==null?z._visibility&2?Fi(o,d,_,S,u):rr(o,d):(z._visibility|=2,Fi(o,d,_,S,u)),u&&N&2048&&tc(d.alternate,d);break;case 24:Fi(o,d,_,S,u),u&&N&2048&&nc(d.alternate,d);break;default:Fi(o,d,_,S,u)}t=t.sibling}}function rr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,u=i.flags;switch(i.tag){case 22:rr(n,i),u&2048&&tc(i.alternate,i);break;case 24:rr(n,i),u&2048&&nc(i.alternate,i);break;default:rr(n,i)}t=t.sibling}}var lr=8192;function es(e,t,n){if(e.subtreeFlags&lr)for(e=e.child;e!==null;)qf(e,t,n),e=e.sibling}function qf(e,t,n){switch(e.tag){case 26:es(e,t,n),e.flags&lr&&e.memoizedState!==null&&o_(n,jn,e.memoizedState,e.memoizedProps);break;case 5:es(e,t,n);break;case 3:case 4:var i=jn;jn=Xl(e.stateNode.containerInfo),es(e,t,n),jn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=lr,lr=16777216,es(e,t,n),lr=i):es(e,t,n));break;default:es(e,t,n)}}function Lf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ur(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];yt=i,Hf(i,e)}Lf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Bf(e),e=e.sibling}function Bf(e){switch(e.tag){case 0:case 11:case 15:ur(e),e.flags&2048&&Na(9,e,e.return);break;case 3:ur(e);break;case 12:ur(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Dl(e)):ur(e);break;default:ur(e)}}function Dl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];yt=i,Hf(i,e)}Lf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Na(8,t,t.return),Dl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Dl(t));break;default:Dl(t)}e=e.sibling}}function Hf(e,t){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:Na(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ys(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,yt=i;else e:for(n=e;yt!==null;){i=yt;var u=i.sibling,o=i.return;if(Rf(i),i===n){yt=null;break e}if(u!==null){u.return=o,yt=u;break e}yt=o}}}var Ty={getCacheForType:function(e){var t=St(rt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return St(rt).controller.signal}},Ay=typeof WeakMap=="function"?WeakMap:Map,Ue=0,He=null,we=null,Ae=0,Me=0,tn=null,ka=!1,ts=!1,ac=!1,ia=0,et=0,Ua=0,gi=0,ic=0,nn=0,ns=0,or=null,Vt=null,sc=!1,Ml=0,$f=0,zl=1/0,ql=null,Da=null,dt=0,Ma=null,as=null,sa=0,rc=0,lc=null,Gf=null,cr=0,uc=null;function an(){return(Ue&2)!==0&&Ae!==0?Ae&-Ae:q.T!==null?mc():xs()}function Vf(){if(nn===0)if((Ae&536870912)===0||Oe){var e=on;on<<=1,(on&3932160)===0&&(on=262144),nn=e}else nn=536870912;return e=Ft.current,e!==null&&(e.flags|=32),nn}function Kt(e,t,n){(e===He&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(is(e,0),za(e,Ae,nn,!1)),da(e,n),((Ue&2)===0||e!==He)&&(e===He&&((Ue&2)===0&&(gi|=n),et===4&&za(e,Ae,nn,!1)),Hn(e))}function Kf(e,t,n){if((Ue&6)!==0)throw Error(l(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Kn(e,t),u=i?xy(e,t):cc(e,t,!0),o=i;do{if(u===0){ts&&!i&&za(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!jy(n)){u=cc(e,t,!1),o=!1;continue}if(u===2){if(o=t,e.errorRecoveryDisabledLanes&o)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var _=e;u=or;var S=_.current.memoizedState.isDehydrated;if(S&&(is(_,d).flags|=256),d=cc(_,d,!1),d!==2){if(ac&&!S){_.errorRecoveryDisabledLanes|=o,gi|=o,u=4;break e}o=Vt,Vt=u,o!==null&&(Vt===null?Vt=o:Vt.push.apply(Vt,o))}u=d}if(o=!1,u!==2)continue}}if(u===1){is(e,0),za(e,t,0,!0);break}e:{switch(i=e,o=u,o){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:za(i,t,nn,!ka);break e;case 2:Vt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(u=Ml+300-Ot(),10<u)){if(za(i,t,nn,!ka),Mn(i,0,!0)!==0)break e;sa=t,i.timeoutHandle=Sm(Yf.bind(null,i,n,Vt,ql,sc,t,nn,gi,ns,ka,o,"Throttled",-0,0),u);break e}Yf(i,n,Vt,ql,sc,t,nn,gi,ns,ka,o,null,-0,0)}}break}while(!0);Hn(e)}function Yf(e,t,n,i,u,o,d,_,S,N,z,H,k,U){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:p},qf(t,o,H);var W=(o&62914560)===o?Ml-Ot():(o&4194048)===o?$f-Ot():0;if(W=c_(H,W),W!==null){sa=o,e.cancelPendingCommit=W(Ff.bind(null,e,t,o,n,i,u,d,_,S,z,H,null,k,U)),za(e,o,d,!N);return}}Ff(e,t,o,n,i,u,d,_,S)}function jy(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var u=n[i],o=u.getSnapshot;u=u.value;try{if(!It(o(),u))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function za(e,t,n,i){t&=~ic,t&=~gi,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var u=t;0<u;){var o=31-xt(u),d=1<<o;i[o]=-1,u&=~d}n!==0&&Wa(e,n,t)}function Ll(){return(Ue&6)===0?(hr(0),!1):!0}function oc(){if(we!==null){if(Me===0)var e=we.return;else e=we,Jn=li=null,Ao(e),Ji=null,Xs=0,e=we;for(;e!==null;)wf(e.alternate,e),e=e.return;we=null}}function is(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qy(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),sa=0,oc(),He=e,we=n=Qn(e.current,null),Ae=t,Me=0,tn=null,ka=!1,ts=Kn(e,t),ac=!1,ns=nn=ic=gi=Ua=et=0,Vt=or=null,sc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var u=31-xt(i),o=1<<u;t|=e[u],i&=~o}return ia=t,sl(),n}function Qf(e,t){ge=null,q.H=tr,t===Xi||t===fl?(t=ld(),Me=3):t===fo?(t=ld(),Me=4):Me=t===$o?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,tn=t,we===null&&(et=1,Ol(e,fn(t,e.current)))}function Xf(){var e=Ft.current;return e===null?!0:(Ae&4194048)===Ae?yn===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?e===yn:!1}function Jf(){var e=q.H;return q.H=tr,e===null?tr:e}function Pf(){var e=q.A;return q.A=Ty,e}function Bl(){et=4,ka||(Ae&4194048)!==Ae&&Ft.current!==null||(ts=!0),(Ua&134217727)===0&&(gi&134217727)===0||He===null||za(He,Ae,nn,!1)}function cc(e,t,n){var i=Ue;Ue|=2;var u=Jf(),o=Pf();(He!==e||Ae!==t)&&(ql=null,is(e,t)),t=!1;var d=et;e:do try{if(Me!==0&&we!==null){var _=we,S=tn;switch(Me){case 8:oc(),d=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var N=Me;if(Me=0,tn=null,ss(e,_,S,N),n&&ts){d=0;break e}break;default:N=Me,Me=0,tn=null,ss(e,_,S,N)}}Oy(),d=et;break}catch(z){Qf(e,z)}while(!0);return t&&e.shellSuspendCounter++,Jn=li=null,Ue=i,q.H=u,q.A=o,we===null&&(He=null,Ae=0,sl()),d}function Oy(){for(;we!==null;)Zf(we)}function xy(e,t){var n=Ue;Ue|=2;var i=Jf(),u=Pf();He!==e||Ae!==t?(ql=null,zl=Ot()+500,is(e,t)):ts=Kn(e,t);e:do try{if(Me!==0&&we!==null){t=we;var o=tn;t:switch(Me){case 1:Me=0,tn=null,ss(e,t,o,1);break;case 2:case 9:if(sd(o)){Me=0,tn=null,If(t);break}t=function(){Me!==2&&Me!==9||He!==e||(Me=7),Hn(e)},o.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:sd(o)?(Me=0,tn=null,If(t)):(Me=0,tn=null,ss(e,t,o,7));break;case 5:var d=null;switch(we.tag){case 26:d=we.memoizedState;case 5:case 27:var _=we;if(d?zm(d):_.stateNode.complete){Me=0,tn=null;var S=_.sibling;if(S!==null)we=S;else{var N=_.return;N!==null?(we=N,Hl(N)):we=null}break t}}Me=0,tn=null,ss(e,t,o,5);break;case 6:Me=0,tn=null,ss(e,t,o,6);break;case 8:oc(),et=6;break e;default:throw Error(l(462))}}Cy();break}catch(z){Qf(e,z)}while(!0);return Jn=li=null,q.H=i,q.A=u,Ue=n,we!==null?0:(He=null,Ae=0,sl(),et)}function Cy(){for(;we!==null&&!Lr();)Zf(we)}function Zf(e){var t=bf(e.alternate,e,ia);e.memoizedProps=e.pendingProps,t===null?Hl(e):we=t}function If(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=mf(n,t,t.pendingProps,t.type,void 0,Ae);break;case 11:t=mf(n,t,t.pendingProps,t.type.render,t.ref,Ae);break;case 5:Ao(t);default:wf(n,t),t=we=Jh(t,ia),t=bf(n,t,ia)}e.memoizedProps=e.pendingProps,t===null?Hl(e):we=t}function ss(e,t,n,i){Jn=li=null,Ao(t),Ji=null,Xs=0;var u=t.return;try{if(yy(e,u,t,n,Ae)){et=1,Ol(e,fn(n,e.current)),we=null;return}}catch(o){if(u!==null)throw we=u,o;et=1,Ol(e,fn(n,e.current)),we=null;return}t.flags&32768?(Oe||i===1?e=!0:ts||(Ae&536870912)!==0?e=!1:(ka=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ft.current,i!==null&&i.tag===13&&(i.flags|=16384))),Wf(t,e)):Hl(t)}function Hl(e){var t=e;do{if((t.flags&32768)!==0){Wf(t,ka);return}e=t.return;var n=by(t.alternate,t,ia);if(n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);et===0&&(et=5)}function Wf(e,t){do{var n=Sy(e.alternate,e);if(n!==null){n.flags&=32767,we=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){we=e;return}we=e=n}while(e!==null);et=6,we=null}function Ff(e,t,n,i,u,o,d,_,S){e.cancelPendingCommit=null;do $l();while(dt!==0);if((Ue&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(o=t.lanes|t.childLanes,o|=Iu,Os(e,n,o,d,_,S),e===He&&(we=He=null,Ae=0),as=t,Ma=e,sa=n,rc=o,lc=u,Gf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Uy(Jt,function(){return im(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=q.T,q.T=null,u=M.p,M.p=2,d=Ue,Ue|=4;try{wy(e,t,n)}finally{Ue=d,M.p=u,q.T=i}}dt=1,em(),tm(),nm()}}function em(){if(dt===1){dt=0;var e=Ma,t=as,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=q.T,q.T=null;var i=M.p;M.p=2;var u=Ue;Ue|=4;try{Df(t,e);var o=wc,d=Bh(e.containerInfo),_=o.focusedElem,S=o.selectionRange;if(d!==_&&_&&_.ownerDocument&&Lh(_.ownerDocument.documentElement,_)){if(S!==null&&Qu(_)){var N=S.start,z=S.end;if(z===void 0&&(z=N),"selectionStart"in _)_.selectionStart=N,_.selectionEnd=Math.min(z,_.value.length);else{var H=_.ownerDocument||document,k=H&&H.defaultView||window;if(k.getSelection){var U=k.getSelection(),W=_.textContent.length,ue=Math.min(S.start,W),Be=S.end===void 0?ue:Math.min(S.end,W);!U.extend&&ue>Be&&(d=Be,Be=ue,ue=d);var j=qh(_,ue),T=qh(_,Be);if(j&&T&&(U.rangeCount!==1||U.anchorNode!==j.node||U.anchorOffset!==j.offset||U.focusNode!==T.node||U.focusOffset!==T.offset)){var R=H.createRange();R.setStart(j.node,j.offset),U.removeAllRanges(),ue>Be?(U.addRange(R),U.extend(T.node,T.offset)):(R.setEnd(T.node,T.offset),U.addRange(R))}}}}for(H=[],U=_;U=U.parentNode;)U.nodeType===1&&H.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<H.length;_++){var L=H[_];L.element.scrollLeft=L.left,L.element.scrollTop=L.top}}Fl=!!Sc,wc=Sc=null}finally{Ue=u,M.p=i,q.T=n}}e.current=t,dt=2}}function tm(){if(dt===2){dt=0;var e=Ma,t=as,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=q.T,q.T=null;var i=M.p;M.p=2;var u=Ue;Ue|=4;try{Cf(e,t.alternate,t)}finally{Ue=u,M.p=i,q.T=n}}dt=3}}function nm(){if(dt===4||dt===3){dt=0,Br();var e=Ma,t=as,n=sa,i=Gf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,as=Ma=null,am(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Da=null),_t(n),t=t.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(de,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=q.T,u=M.p,M.p=2,q.T=null;try{for(var o=e.onRecoverableError,d=0;d<i.length;d++){var _=i[d];o(_.value,{componentStack:_.stack})}}finally{q.T=t,M.p=u}}(sa&3)!==0&&$l(),Hn(e),u=e.pendingLanes,(n&261930)!==0&&(u&42)!==0?e===uc?cr++:(cr=0,uc=e):cr=0,hr(0)}}function am(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ys(t)))}function $l(){return em(),tm(),nm(),im()}function im(){if(dt!==5)return!1;var e=Ma,t=rc;rc=0;var n=_t(sa),i=q.T,u=M.p;try{M.p=32>n?32:n,q.T=null,n=lc,lc=null;var o=Ma,d=sa;if(dt=0,as=Ma=null,sa=0,(Ue&6)!==0)throw Error(l(331));var _=Ue;if(Ue|=4,Bf(o.current),zf(o,o.current,d,n),Ue=_,hr(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(de,o)}catch{}return!0}finally{M.p=u,q.T=i,am(e,t)}}function sm(e,t,n){t=fn(n,t),t=Ho(e.stateNode,t,2),e=xa(e,t,2),e!==null&&(da(e,2),Hn(e))}function ze(e,t,n){if(e.tag===3)sm(e,e,n);else for(;t!==null;){if(t.tag===3){sm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Da===null||!Da.has(i))){e=fn(n,e),n=rf(2),i=xa(t,n,2),i!==null&&(lf(n,i,t,e),da(i,2),Hn(i));break}}t=t.return}}function hc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Ay;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(n)||(ac=!0,u.add(n),e=Ry.bind(null,e,t,n),t.then(e,e))}function Ry(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,He===e&&(Ae&n)===n&&(et===4||et===3&&(Ae&62914560)===Ae&&300>Ot()-Ml?(Ue&2)===0&&is(e,0):ic|=n,ns===Ae&&(ns=0)),Hn(e)}function rm(e,t){t===0&&(t=ha()),e=ii(e,t),e!==null&&(da(e,t),Hn(e))}function Ny(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rm(e,n)}function ky(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),rm(e,n)}function Uy(e,t){return As(e,t)}var Gl=null,rs=null,dc=!1,Vl=!1,fc=!1,qa=0;function Hn(e){e!==rs&&e.next===null&&(rs===null?Gl=rs=e:rs=rs.next=e),Vl=!0,dc||(dc=!0,My())}function hr(e,t){if(!fc&&Vl){fc=!0;do for(var n=!1,i=Gl;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var o=0;else{var d=i.suspendedLanes,_=i.pingedLanes;o=(1<<31-xt(42|e)+1)-1,o&=u&~(d&~_),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,cm(i,o))}else o=Ae,o=Mn(i,i===He?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(o&3)===0||Kn(i,o)||(n=!0,cm(i,o));i=i.next}while(n);fc=!1}}function Dy(){lm()}function lm(){Vl=dc=!1;var e=0;qa!==0&&Yy()&&(e=qa);for(var t=Ot(),n=null,i=Gl;i!==null;){var u=i.next,o=um(i,t);o===0?(i.next=null,n===null?Gl=u:n.next=u,u===null&&(rs=n)):(n=i,(e!==0||(o&3)!==0)&&(Vl=!0)),i=u}dt!==0&&dt!==5||hr(e),qa!==0&&(qa=0)}function um(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var d=31-xt(o),_=1<<d,S=u[d];S===-1?((_&n)===0||(_&i)!==0)&&(u[d]=Vr(_,t)):S<=t&&(e.expiredLanes|=_),o&=~_}if(t=He,n=Ae,n=Mn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&js(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Kn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&js(i),_t(n)){case 2:case 8:n=Za;break;case 32:n=Jt;break;case 268435456:n=Hr;break;default:n=Jt}return i=om.bind(null,e),n=As(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&js(i),e.callbackPriority=2,e.callbackNode=null,2}function om(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if($l()&&e.callbackNode!==n)return null;var i=Ae;return i=Mn(e,e===He?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Kf(e,i,t),um(e,Ot()),e.callbackNode!=null&&e.callbackNode===n?om.bind(null,e):null)}function cm(e,t){if($l())return null;Kf(e,t,!0)}function My(){Xy(function(){(Ue&6)!==0?As(Vn,Dy):lm()})}function mc(){if(qa===0){var e=Yi;e===0&&(e=Un,Un<<=1,(Un&261888)===0&&(Un=256)),qa=e}return qa}function hm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Di(""+e)}function dm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function zy(e,t,n,i,u){if(t==="submit"&&n&&n.stateNode===u){var o=hm((u[Te]||null).action),d=i.submitter;d&&(t=(t=d[Te]||null)?hm(t.formAction):d.getAttribute("formAction"),t!==null&&(o=t,d=null));var _=new tl("action","action",null,i,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(qa!==0){var S=d?dm(u,d):new FormData(u);Do(n,{pending:!0,data:S,method:u.method,action:o},null,S)}}else typeof o=="function"&&(_.preventDefault(),S=d?dm(u,d):new FormData(u),Do(n,{pending:!0,data:S,method:u.method,action:o},o,S))},currentTarget:u}]})}}for(var pc=0;pc<Zu.length;pc++){var gc=Zu[pc],qy=gc.toLowerCase(),Ly=gc[0].toUpperCase()+gc.slice(1);An(qy,"on"+Ly)}An(Gh,"onAnimationEnd"),An(Vh,"onAnimationIteration"),An(Kh,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(ey,"onTransitionRun"),An(ty,"onTransitionStart"),An(ny,"onTransitionCancel"),An(Yh,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),En("onBeforeInput",["compositionend","keypress","textInput","paste"]),En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),By=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dr));function fm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],u=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var d=i.length-1;0<=d;d--){var _=i[d],S=_.instance,N=_.currentTarget;if(_=_.listener,S!==o&&u.isPropagationStopped())break e;o=_,u.currentTarget=N;try{o(u)}catch(z){il(z)}u.currentTarget=null,o=S}else for(d=0;d<i.length;d++){if(_=i[d],S=_.instance,N=_.currentTarget,_=_.listener,S!==o&&u.isPropagationStopped())break e;o=_,u.currentTarget=N;try{o(u)}catch(z){il(z)}u.currentTarget=null,o=S}}}}function Ee(e,t){var n=t[Cs];n===void 0&&(n=t[Cs]=new Set);var i=e+"__bubble";n.has(i)||(mm(t,e,2,!1),n.add(i))}function yc(e,t,n){var i=0;t&&(i|=4),mm(n,e,i,t)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function _c(e){if(!e[Kl]){e[Kl]=!0,_a.forEach(function(n){n!=="selectionchange"&&(By.has(n)||yc(n,!1,e),yc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kl]||(t[Kl]=!0,yc("selectionchange",!1,t))}}function mm(e,t,n,i){switch(Vm(t)){case 2:var u=f_;break;case 8:u=m_;break;default:u=Uc}n=u.bind(null,t,n,e),u=void 0,!hn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function vc(e,t,n,i,u){var o=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var _=i.stateNode.containerInfo;if(_===u)break;if(d===4)for(d=i.return;d!==null;){var S=d.tag;if((S===3||S===4)&&d.stateNode.containerInfo===u)return;d=d.return}for(;_!==null;){if(d=pa(_),d===null)return;if(S=d.tag,S===5||S===6||S===26||S===27){i=o=d;continue e}_=_.parentNode}}i=i.return}le(function(){var N=o,z=E(n),H=[];e:{var k=Qh.get(e);if(k!==void 0){var U=tl,W=e;switch(e){case"keypress":if(Bt(n)===0)break e;case"keydown":case"keyup":U=kg;break;case"focusin":W="focus",U=$u;break;case"focusout":W="blur",U=$u;break;case"beforeblur":case"afterblur":U=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=bg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=Mg;break;case Gh:case Vh:case Kh:U=Eg;break;case Yh:U=qg;break;case"scroll":case"scrollend":U=_g;break;case"wheel":U=Bg;break;case"copy":case"cut":case"paste":U=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Eh;break;case"toggle":case"beforetoggle":U=$g}var ue=(t&4)!==0,Be=!ue&&(e==="scroll"||e==="scrollend"),j=ue?k!==null?k+"Capture":null:k;ue=[];for(var T=N,R;T!==null;){var L=T;if(R=L.stateNode,L=L.tag,L!==5&&L!==26&&L!==27||R===null||j===null||(L=We(T,j),L!=null&&ue.push(fr(T,L,R))),Be)break;T=T.return}0<ue.length&&(k=new U(k,W,null,n,z),H.push({event:k,listeners:ue}))}}if((t&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",k&&n!==b&&(W=n.relatedTarget||n.fromElement)&&(pa(W)||W[ma]))break e;if((U||k)&&(k=z.window===z?z:(k=z.ownerDocument)?k.defaultView||k.parentWindow:window,U?(W=n.relatedTarget||n.toElement,U=N,W=W?pa(W):null,W!==null&&(Be=h(W),ue=W.tag,W!==Be||ue!==5&&ue!==27&&ue!==6)&&(W=null)):(U=null,W=N),U!==W)){if(ue=Sh,L="onMouseLeave",j="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Eh,L="onPointerLeave",j="onPointerEnter",T="pointer"),Be=U==null?k:ya(U),R=W==null?k:ya(W),k=new ue(L,T+"leave",U,n,z),k.target=Be,k.relatedTarget=R,L=null,pa(z)===N&&(ue=new ue(j,T+"enter",W,n,z),ue.target=R,ue.relatedTarget=Be,L=ue),Be=L,U&&W)t:{for(ue=Hy,j=U,T=W,R=0,L=j;L;L=ue(L))R++;L=0;for(var re=T;re;re=ue(re))L++;for(;0<R-L;)j=ue(j),R--;for(;0<L-R;)T=ue(T),L--;for(;R--;){if(j===T||T!==null&&j===T.alternate){ue=j;break t}j=ue(j),T=ue(T)}ue=null}else ue=null;U!==null&&pm(H,k,U,ue,!1),W!==null&&Be!==null&&pm(H,Be,W,ue,!0)}}e:{if(k=N?ya(N):window,U=k.nodeName&&k.nodeName.toLowerCase(),U==="select"||U==="input"&&k.type==="file")var Ne=Nh;else if(Ch(k))if(kh)Ne=Ig;else{Ne=Pg;var ee=Jg}else U=k.nodeName,!U||U.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?N&&Ms(N.elementType)&&(Ne=Nh):Ne=Zg;if(Ne&&(Ne=Ne(e,N))){Rh(H,Ne,n,z);break e}ee&&ee(e,k,N),e==="focusout"&&N&&k.type==="number"&&N.memoizedProps.value!=null&&Ds(k,"number",k.value)}switch(ee=N?ya(N):window,e){case"focusin":(Ch(ee)||ee.contentEditable==="true")&&(qi=ee,Xu=N,Gs=null);break;case"focusout":Gs=Xu=qi=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,Hh(H,n,z);break;case"selectionchange":if(Fg)break;case"keydown":case"keyup":Hh(H,n,z)}var _e;if(Vu)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else zi?Oh(e,n)&&(je="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(je="onCompositionStart");je&&(Th&&n.locale!=="ko"&&(zi||je!=="onCompositionStart"?je==="onCompositionEnd"&&zi&&(_e=Ut()):(kt=z,ye="value"in kt?kt.value:kt.textContent,zi=!0)),ee=Yl(N,je),0<ee.length&&(je=new wh(je,e,null,n,z),H.push({event:je,listeners:ee}),_e?je.data=_e:(_e=xh(n),_e!==null&&(je.data=_e)))),(_e=Vg?Kg(e,n):Yg(e,n))&&(je=Yl(N,"onBeforeInput"),0<je.length&&(ee=new wh("onBeforeInput","beforeinput",null,n,z),H.push({event:ee,listeners:je}),ee.data=_e)),zy(H,e,N,n,z)}fm(H,t)})}function fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yl(e,t){for(var n=t+"Capture",i=[];e!==null;){var u=e,o=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||o===null||(u=We(e,n),u!=null&&i.unshift(fr(e,u,o)),u=We(e,t),u!=null&&i.push(fr(e,u,o))),e.tag===3)return i;e=e.return}return[]}function Hy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pm(e,t,n,i,u){for(var o=t._reactName,d=[];n!==null&&n!==i;){var _=n,S=_.alternate,N=_.stateNode;if(_=_.tag,S!==null&&S===i)break;_!==5&&_!==26&&_!==27||N===null||(S=N,u?(N=We(n,o),N!=null&&d.unshift(fr(n,N,S))):u||(N=We(n,o),N!=null&&d.push(fr(n,N,S)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var $y=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function gm(e){return(typeof e=="string"?e:""+e).replace($y,`
`).replace(Gy,"")}function ym(e,t){return t=gm(t),gm(e)===t}function Le(e,t,n,i,u,o){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Sa(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Sa(e,""+i);break;case"className":ei(e,"class",i);break;case"tabIndex":ei(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(e,n,i);break;case"style":Fr(e,i,o);break;case"data":if(t!=="object"){ei(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Di(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Le(e,t,"name",u.name,u,null),Le(e,t,"formEncType",u.formEncType,u,null),Le(e,t,"formMethod",u.formMethod,u,null),Le(e,t,"formTarget",u.formTarget,u,null)):(Le(e,t,"encType",u.encType,u,null),Le(e,t,"method",u.method,u,null),Le(e,t,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Di(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=p);break;case"onScroll":i!=null&&Ee("scroll",e);break;case"onScrollEnd":i!=null&&Ee("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Di(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ee("beforetoggle",e),Ee("toggle",e),ki(e,"popover",i);break;case"xlinkActuate":Tn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Tn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Tn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Tn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Tn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Tn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Tn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ki(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=qu.get(n)||n,ki(e,n,i))}}function bc(e,t,n,i,u,o){switch(n){case"style":Fr(e,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(n=i.__html,n!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Sa(e,i):(typeof i=="number"||typeof i=="bigint")&&Sa(e,""+i);break;case"onScroll":i!=null&&Ee("scroll",e);break;case"onScrollEnd":i!=null&&Ee("scrollend",e);break;case"onClick":i!=null&&(e.onclick=p);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ni.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(u=n.endsWith("Capture"),t=n.slice(2,u?n.length-7:void 0),o=e[Te]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,u),typeof i=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,u);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):ki(e,n,i)}}}function Et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",e),Ee("load",e);var i=!1,u=!1,o;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(d!=null)switch(o){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Le(e,t,o,d,n,null)}}u&&Le(e,t,"srcSet",n.srcSet,n,null),i&&Le(e,t,"src",n.src,n,null);return;case"input":Ee("invalid",e);var _=o=d=u=null,S=null,N=null;for(i in n)if(n.hasOwnProperty(i)){var z=n[i];if(z!=null)switch(i){case"name":u=z;break;case"type":d=z;break;case"checked":S=z;break;case"defaultChecked":N=z;break;case"value":o=z;break;case"defaultValue":_=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(l(137,t));break;default:Le(e,t,i,z,n,null)}}Us(e,o,_,S,N,d,u,!1);return;case"select":Ee("invalid",e),i=d=o=null;for(u in n)if(n.hasOwnProperty(u)&&(_=n[u],_!=null))switch(u){case"value":o=_;break;case"defaultValue":d=_;break;case"multiple":i=_;default:Le(e,t,u,_,n,null)}t=o,n=d,e.multiple=!!i,t!=null?ba(e,!!i,t,!1):n!=null&&ba(e,!!i,n,!0);return;case"textarea":Ee("invalid",e),o=u=i=null;for(d in n)if(n.hasOwnProperty(d)&&(_=n[d],_!=null))switch(d){case"value":i=_;break;case"defaultValue":u=_;break;case"children":o=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:Le(e,t,d,_,n,null)}Ir(e,i,u,o);return;case"option":for(S in n)n.hasOwnProperty(S)&&(i=n[S],i!=null)&&(S==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":Le(e,t,S,i,n,null));return;case"dialog":Ee("beforetoggle",e),Ee("toggle",e),Ee("cancel",e),Ee("close",e);break;case"iframe":case"object":Ee("load",e);break;case"video":case"audio":for(i=0;i<dr.length;i++)Ee(dr[i],e);break;case"image":Ee("error",e),Ee("load",e);break;case"details":Ee("toggle",e);break;case"embed":case"source":case"link":Ee("error",e),Ee("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in n)if(n.hasOwnProperty(N)&&(i=n[N],i!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Le(e,t,N,i,n,null)}return;default:if(Ms(t)){for(z in n)n.hasOwnProperty(z)&&(i=n[z],i!==void 0&&bc(e,t,z,i,n,void 0));return}}for(_ in n)n.hasOwnProperty(_)&&(i=n[_],i!=null&&Le(e,t,_,i,n,null))}function Vy(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,o=null,d=null,_=null,S=null,N=null,z=null;for(U in n){var H=n[U];if(n.hasOwnProperty(U)&&H!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":S=H;default:i.hasOwnProperty(U)||Le(e,t,U,null,i,H)}}for(var k in i){var U=i[k];if(H=n[k],i.hasOwnProperty(k)&&(U!=null||H!=null))switch(k){case"type":o=U;break;case"name":u=U;break;case"checked":N=U;break;case"defaultChecked":z=U;break;case"value":d=U;break;case"defaultValue":_=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:U!==H&&Le(e,t,k,U,i,H)}}ks(e,d,_,S,N,z,o,u);return;case"select":U=d=_=k=null;for(o in n)if(S=n[o],n.hasOwnProperty(o)&&S!=null)switch(o){case"value":break;case"multiple":U=S;default:i.hasOwnProperty(o)||Le(e,t,o,null,i,S)}for(u in i)if(o=i[u],S=n[u],i.hasOwnProperty(u)&&(o!=null||S!=null))switch(u){case"value":k=o;break;case"defaultValue":_=o;break;case"multiple":d=o;default:o!==S&&Le(e,t,u,o,i,S)}t=_,n=d,i=U,k!=null?ba(e,!!n,k,!1):!!i!=!!n&&(t!=null?ba(e,!!n,t,!0):ba(e,!!n,n?[]:"",!1));return;case"textarea":U=k=null;for(_ in n)if(u=n[_],n.hasOwnProperty(_)&&u!=null&&!i.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Le(e,t,_,null,i,u)}for(d in i)if(u=i[d],o=n[d],i.hasOwnProperty(d)&&(u!=null||o!=null))switch(d){case"value":k=u;break;case"defaultValue":U=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==o&&Le(e,t,d,u,i,o)}Zr(e,k,U);return;case"option":for(var W in n)k=n[W],n.hasOwnProperty(W)&&k!=null&&!i.hasOwnProperty(W)&&(W==="selected"?e.selected=!1:Le(e,t,W,null,i,k));for(S in i)k=i[S],U=n[S],i.hasOwnProperty(S)&&k!==U&&(k!=null||U!=null)&&(S==="selected"?e.selected=k&&typeof k!="function"&&typeof k!="symbol":Le(e,t,S,k,i,U));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in n)k=n[ue],n.hasOwnProperty(ue)&&k!=null&&!i.hasOwnProperty(ue)&&Le(e,t,ue,null,i,k);for(N in i)if(k=i[N],U=n[N],i.hasOwnProperty(N)&&k!==U&&(k!=null||U!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(l(137,t));break;default:Le(e,t,N,k,i,U)}return;default:if(Ms(t)){for(var Be in n)k=n[Be],n.hasOwnProperty(Be)&&k!==void 0&&!i.hasOwnProperty(Be)&&bc(e,t,Be,void 0,i,k);for(z in i)k=i[z],U=n[z],!i.hasOwnProperty(z)||k===U||k===void 0&&U===void 0||bc(e,t,z,k,i,U);return}}for(var j in n)k=n[j],n.hasOwnProperty(j)&&k!=null&&!i.hasOwnProperty(j)&&Le(e,t,j,null,i,k);for(H in i)k=i[H],U=n[H],!i.hasOwnProperty(H)||k===U||k==null&&U==null||Le(e,t,H,k,i,U)}function _m(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ky(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var u=n[i],o=u.transferSize,d=u.initiatorType,_=u.duration;if(o&&_&&_m(d)){for(d=0,_=u.responseEnd,i+=1;i<n.length;i++){var S=n[i],N=S.startTime;if(N>_)break;var z=S.transferSize,H=S.initiatorType;z&&_m(H)&&(S=S.responseEnd,d+=z*(S<_?1:(_-N)/(S-N)))}if(--i,t+=8*(o+d)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sc=null,wc=null;function Ql(e){return e.nodeType===9?e:e.ownerDocument}function vm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tc=null;function Yy(){var e=window.event;return e&&e.type==="popstate"?e===Tc?!1:(Tc=e,!0):(Tc=null,!1)}var Sm=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,wm=typeof Promise=="function"?Promise:void 0,Xy=typeof queueMicrotask=="function"?queueMicrotask:typeof wm<"u"?function(e){return wm.resolve(null).then(e).catch(Jy)}:Sm;function Jy(e){setTimeout(function(){throw e})}function La(e){return e==="head"}function Em(e,t){var n=t,i=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(u),cs(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")mr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,mr(n);for(var o=n.firstChild;o;){var d=o.nextSibling,_=o.nodeName;o[Rt]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&o.rel.toLowerCase()==="stylesheet"||n.removeChild(o),o=d}}else n==="body"&&mr(e.ownerDocument.body);n=u}while(n);cs(t)}function Tm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Ac(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ac(n),Rs(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Py(e,t,n,i){for(;e.nodeType===1;){var u=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Rt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=_n(e.nextSibling),e===null)break}return null}function Zy(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=_n(e.nextSibling),e===null))return null;return e}function Am(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=_n(e.nextSibling),e===null))return null;return e}function jc(e){return e.data==="$?"||e.data==="$~"}function Oc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Iy(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var xc=null;function jm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return _n(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Om(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function xm(e,t,n){switch(t=Ql(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function mr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Rs(e)}var vn=new Map,Cm=new Set;function Xl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ra=M.d;M.d={f:Wy,r:Fy,D:e_,C:t_,L:n_,m:a_,X:s_,S:i_,M:r_};function Wy(){var e=ra.f(),t=Ll();return e||t}function Fy(e){var t=ga(e);t!==null&&t.tag===5&&t.type==="form"?Yd(t):ra.r(e)}var ls=typeof document>"u"?null:document;function Rm(e,t,n){var i=ls;if(i&&typeof t=="string"&&t){var u=Nt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof n=="string"&&(u+='[crossorigin="'+n+'"]'),Cm.has(u)||(Cm.add(u),e={rel:e,crossOrigin:n,href:t},i.querySelector(u)===null&&(t=i.createElement("link"),Et(t,"link",e),Ve(t),i.head.appendChild(t)))}}function e_(e){ra.D(e),Rm("dns-prefetch",e,null)}function t_(e,t){ra.C(e,t),Rm("preconnect",e,t)}function n_(e,t,n){ra.L(e,t,n);var i=ls;if(i&&e&&t){var u='link[rel="preload"][as="'+Nt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(u+='[imagesrcset="'+Nt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(u+='[imagesizes="'+Nt(n.imageSizes)+'"]')):u+='[href="'+Nt(e)+'"]';var o=u;switch(t){case"style":o=us(e);break;case"script":o=os(e)}vn.has(o)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),vn.set(o,e),i.querySelector(u)!==null||t==="style"&&i.querySelector(pr(o))||t==="script"&&i.querySelector(gr(o))||(t=i.createElement("link"),Et(t,"link",e),Ve(t),i.head.appendChild(t)))}}function a_(e,t){ra.m(e,t);var n=ls;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Nt(i)+'"][href="'+Nt(e)+'"]',o=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=os(e)}if(!vn.has(o)&&(e=x({rel:"modulepreload",href:e},t),vn.set(o,e),n.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(gr(o)))return}i=n.createElement("link"),Et(i,"link",e),Ve(i),n.head.appendChild(i)}}}function i_(e,t,n){ra.S(e,t,n);var i=ls;if(i&&e){var u=zn(i).hoistableStyles,o=us(e);t=t||"default";var d=u.get(o);if(!d){var _={loading:0,preload:null};if(d=i.querySelector(pr(o)))_.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=vn.get(o))&&Cc(e,n);var S=d=i.createElement("link");Ve(S),Et(S,"link",e),S._p=new Promise(function(N,z){S.onload=N,S.onerror=z}),S.addEventListener("load",function(){_.loading|=1}),S.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Jl(d,t,i)}d={type:"stylesheet",instance:d,count:1,state:_},u.set(o,d)}}}function s_(e,t){ra.X(e,t);var n=ls;if(n&&e){var i=zn(n).hoistableScripts,u=os(e),o=i.get(u);o||(o=n.querySelector(gr(u)),o||(e=x({src:e,async:!0},t),(t=vn.get(u))&&Rc(e,t),o=n.createElement("script"),Ve(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(u,o))}}function r_(e,t){ra.M(e,t);var n=ls;if(n&&e){var i=zn(n).hoistableScripts,u=os(e),o=i.get(u);o||(o=n.querySelector(gr(u)),o||(e=x({src:e,async:!0,type:"module"},t),(t=vn.get(u))&&Rc(e,t),o=n.createElement("script"),Ve(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(u,o))}}function Nm(e,t,n,i){var u=(u=be.current)?Xl(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=us(n.href),n=zn(u).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=us(n.href);var o=zn(u).hoistableStyles,d=o.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,d),(o=u.querySelector(pr(e)))&&!o._p&&(d.instance=o,d.state.loading=5),vn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vn.set(e,n),o||l_(u,e,n,d.state))),t&&i===null)throw Error(l(528,""));return d}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=os(n),n=zn(u).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function us(e){return'href="'+Nt(e)+'"'}function pr(e){return'link[rel="stylesheet"]['+e+"]"}function km(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function l_(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Et(t,"link",n),Ve(t),e.head.appendChild(t))}function os(e){return'[src="'+Nt(e)+'"]'}function gr(e){return"script[async]"+e}function Um(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Nt(n.href)+'"]');if(i)return t.instance=i,Ve(i),i;var u=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Ve(i),Et(i,"style",u),Jl(i,n.precedence,e),t.instance=i;case"stylesheet":u=us(n.href);var o=e.querySelector(pr(u));if(o)return t.state.loading|=4,t.instance=o,Ve(o),o;i=km(n),(u=vn.get(u))&&Cc(i,u),o=(e.ownerDocument||e).createElement("link"),Ve(o);var d=o;return d._p=new Promise(function(_,S){d.onload=_,d.onerror=S}),Et(o,"link",i),t.state.loading|=4,Jl(o,n.precedence,e),t.instance=o;case"script":return o=os(n.src),(u=e.querySelector(gr(o)))?(t.instance=u,Ve(u),u):(i=n,(u=vn.get(o))&&(i=x({},n),Rc(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),Ve(u),Et(u,"link",i),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Jl(i,n.precedence,e));return t.instance}function Jl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,o=u,d=0;d<i.length;d++){var _=i[d];if(_.dataset.precedence===t)o=_;else if(o!==u)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Cc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Pl=null;function Dm(e,t,n){if(Pl===null){var i=new Map,u=Pl=new Map;u.set(n,i)}else u=Pl,i=u.get(n),i||(i=new Map,u.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),u=0;u<n.length;u++){var o=n[u];if(!(o[Rt]||o[Ie]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var d=o.getAttribute(t)||"";d=e+d;var _=i.get(d);_?_.push(o):i.set(d,[o])}}return i}function Mm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function u_(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function o_(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=us(i.href),o=t.querySelector(pr(u));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Zl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,Ve(o);return}o=t.ownerDocument||t,i=km(i),(u=vn.get(u))&&Cc(i,u),o=o.createElement("link"),Ve(o);var d=o;d._p=new Promise(function(_,S){d.onload=_,d.onerror=S}),Et(o,"link",i),n.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Zl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Nc=0;function c_(e,t){return e.stylesheets&&e.count===0&&Wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Nc===0&&(Nc=62500*Ky());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Nc?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(u)}}:null}function Zl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Il=null;function Wl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Il=new Map,t.forEach(h_,e),Il=null,Zl.call(e))}function h_(e,t){if(!(t.state.loading&4)){var n=Il.get(e);if(n)var i=n.get(null);else{n=new Map,Il.set(e,n);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<u.length;o++){var d=u[o];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),i=d)}i&&n.set(null,i)}u=t.instance,d=u.getAttribute("data-precedence"),o=n.get(d)||i,o===i&&n.set(null,u),n.set(d,u),this.count++,i=Zl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),o?o.parentNode.insertBefore(u,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var yr={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function d_(e,t,n,i,u,o,d,_,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=o,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function qm(e,t,n,i,u,o,d,_,S,N,z,H){return e=new d_(e,t,n,d,S,N,z,H,_),t=1,o===!0&&(t|=24),o=Wt(3,null,null,t),e.current=o,o.stateNode=e,t=oo(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},mo(o),e}function Lm(e){return e?(e=Hi,e):Hi}function Bm(e,t,n,i,u,o){u=Lm(u),i.context===null?i.context=u:i.pendingContext=u,i=Oa(t),i.payload={element:n},o=o===void 0?null:o,o!==null&&(i.callback=o),n=xa(e,i,t),n!==null&&(Kt(n,e,t),Ps(n,e,t))}function Hm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kc(e,t){Hm(e,t),(e=e.alternate)&&Hm(e,t)}function $m(e){if(e.tag===13||e.tag===31){var t=ii(e,67108864);t!==null&&Kt(t,e,67108864),kc(e,67108864)}}function Gm(e){if(e.tag===13||e.tag===31){var t=an();t=qt(t);var n=ii(e,t);n!==null&&Kt(n,e,t),kc(e,t)}}var Fl=!0;function f_(e,t,n,i){var u=q.T;q.T=null;var o=M.p;try{M.p=2,Uc(e,t,n,i)}finally{M.p=o,q.T=u}}function m_(e,t,n,i){var u=q.T;q.T=null;var o=M.p;try{M.p=8,Uc(e,t,n,i)}finally{M.p=o,q.T=u}}function Uc(e,t,n,i){if(Fl){var u=Dc(i);if(u===null)vc(e,t,i,eu,n),Km(e,i);else if(g_(u,e,t,n,i))i.stopPropagation();else if(Km(e,i),t&4&&-1<p_.indexOf(e)){for(;u!==null;){var o=ga(u);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var d=Dn(o.pendingLanes);if(d!==0){var _=o;for(_.pendingLanes|=2,_.entangledLanes|=2;d;){var S=1<<31-xt(d);_.entanglements[1]|=S,d&=~S}Hn(o),(Ue&6)===0&&(zl=Ot()+500,hr(0))}}break;case 31:case 13:_=ii(o,2),_!==null&&Kt(_,o,2),Ll(),kc(o,2)}if(o=Dc(i),o===null&&vc(e,t,i,eu,n),o===u)break;u=o}u!==null&&i.stopPropagation()}else vc(e,t,i,null,n)}}function Dc(e){return e=E(e),Mc(e)}var eu=null;function Mc(e){if(eu=null,e=pa(e),e!==null){var t=h(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=f(t),e!==null)return e;e=null}else if(n===31){if(e=g(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return eu=e,null}function Vm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case Vn:return 2;case Za:return 8;case Jt:case kn:return 32;case Hr:return 268435456;default:return 32}default:return 32}}var zc=!1,Ba=null,Ha=null,$a=null,_r=new Map,vr=new Map,Ga=[],p_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Km(e,t){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":_r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(t.pointerId)}}function br(e,t,n,i,u,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[u]},t!==null&&(t=ga(t),t!==null&&$m(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function g_(e,t,n,i,u){switch(t){case"focusin":return Ba=br(Ba,e,t,n,i,u),!0;case"dragenter":return Ha=br(Ha,e,t,n,i,u),!0;case"mouseover":return $a=br($a,e,t,n,i,u),!0;case"pointerover":var o=u.pointerId;return _r.set(o,br(_r.get(o)||null,e,t,n,i,u)),!0;case"gotpointercapture":return o=u.pointerId,vr.set(o,br(vr.get(o)||null,e,t,n,i,u)),!0}return!1}function Ym(e){var t=pa(e.target);if(t!==null){var n=h(t);if(n!==null){if(t=n.tag,t===13){if(t=f(n),t!==null){e.blockedOn=t,fa(e.priority,function(){Gm(n)});return}}else if(t===31){if(t=g(n),t!==null){e.blockedOn=t,fa(e.priority,function(){Gm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dc(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);b=i,n.target.dispatchEvent(i),b=null}else return t=ga(n),t!==null&&$m(t),e.blockedOn=n,!1;t.shift()}return!0}function Qm(e,t,n){tu(e)&&n.delete(t)}function y_(){zc=!1,Ba!==null&&tu(Ba)&&(Ba=null),Ha!==null&&tu(Ha)&&(Ha=null),$a!==null&&tu($a)&&($a=null),_r.forEach(Qm),vr.forEach(Qm)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,zc||(zc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,y_)))}var au=null;function Xm(e){au!==e&&(au=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){au===e&&(au=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],u=e[t+2];if(typeof i!="function"){if(Mc(i||n)===null)continue;break}var o=ga(n);o!==null&&(e.splice(t,3),t-=3,Do(o,{pending:!0,data:u,method:n.method,action:i},i,u))}}))}function cs(e){function t(S){return nu(S,e)}Ba!==null&&nu(Ba,e),Ha!==null&&nu(Ha,e),$a!==null&&nu($a,e),_r.forEach(t),vr.forEach(t);for(var n=0;n<Ga.length;n++){var i=Ga[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ga.length&&(n=Ga[0],n.blockedOn===null);)Ym(n),n.blockedOn===null&&Ga.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var u=n[i],o=n[i+1],d=u[Te]||null;if(typeof o=="function")d||Xm(n);else if(d){var _=null;if(o&&o.hasAttribute("formAction")){if(u=o,d=o[Te]||null)_=d.formAction;else if(Mc(u)!==null)continue}else _=d.action;typeof _=="function"?n[i+1]=_:(n.splice(i,3),i-=3),Xm(n)}}}function Jm(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(d){return u=d})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function qc(e){this._internalRoot=e}iu.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,i=an();Bm(n,i,e,t,null,null)},iu.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bm(e.current,2,null,e,null,null),Ll(),t[ma]=null}};function iu(e){this._internalRoot=e}iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=xs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ga.length&&t!==0&&t<Ga[n].priority;n++);Ga.splice(n,0,e),n===0&&Ym(e)}};var Pm=a.version;if(Pm!=="19.2.4")throw Error(l(527,Pm,"19.2.4"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=y(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var __={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{de=su.inject(__),gt=su}catch{}}return wr.createRoot=function(e,t){if(!c(e))throw Error(l(299));var n=!1,i="",u=tf,o=nf,d=af;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=qm(e,1,!1,null,null,n,i,null,u,o,d,Jm),e[ma]=t.current,_c(e),new qc(t)},wr.hydrateRoot=function(e,t,n){if(!c(e))throw Error(l(299));var i=!1,u="",o=tf,d=nf,_=af,S=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),t=qm(e,1,!0,t,n??null,i,u,S,o,d,_,Jm),t.context=Lm(null),n=t.current,i=an(),i=qt(i),u=Oa(i),u.callback=null,xa(n,u,i),n=i,t.current.lanes=n,da(t,n),Hn(t),e[ma]=t.current,_c(e),new iu(t)},wr.version="19.2.4",wr}var sp;function x_(){if(sp)return Bc.exports;sp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Bc.exports=O_(),Bc.exports}var C_=x_(),P=_h();const R_=["https://solar.huawei.com/admin/asset/v1/pro/view/9005a18da2964ba2a0541ce4fbae4bef.pdf","https://solar.huawei.com/-/media/Solar/attachment/pdf/la/datasheet/SUN2000-30-40KTL-M3.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/1e029d00296a4b87a9823fd083db547e.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/ada802421c674daa9047aeec9d28a710.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/ada802421c674daa9047aeec9d28a710.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf","https://solar.huawei.com/download?p=%2F-%2Fmedia%2FSolarV4%2Fsolar-version2%2Feurope%2Fro%2Fprofessionals%2Fall-products%2Fproduct%2FLUNA2000-5-10-15-S0%2Fsupport%2FLUNA2000-5-10-15-S0-datasheet.pdf","https://solar.huawei.com/download?p=%2F-%2Fmedia%2FSolarV4%2Fsolar-version2%2Feurope%2Fro%2Fprofessionals%2Fall-products%2Fproduct%2FLUNA2000-5-10-15-S0%2Fsupport%2FLUNA2000-5-10-15-S0-datasheet.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/422945b897cd4c1fb5ce16e2c7931240.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/37973b9d0ac64f8bbac4d5dce45cda84.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/95c57a958fd54fdda8a6fa0c7f71c8d4.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/a1adf14392d644c1b432f62ea10fa0ff.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/a1adf14392d644c1b432f62ea10fa0ff.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/79676c3a0de542bf8e6ff9da6d177138.pdf","https://download.huawei.com/edownload/e/download.do?actionFlag=download&nid=EDOC1100020897&partNo=6001&mid=SUPE_DOC","https://download.huawei.com/edownload/e/download.do?actionFlag=download&nid=EDOC1100020897&partNo=6001&mid=SUPE_DOC","https://solar.huawei.com/admin/asset/v1/pro/view/7304f2b9c528458a98f242a8c4c3f672.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/7304f2b9c528458a98f242a8c4c3f672.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/38e8d9d6fdd44185abd71acfc620aa90.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/e3397de6d77c49ce903bea8a2dda7d06.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/fae1d0d46364459191f51ff78db88c3b.pdf","https://solar.huawei.com/admin/asset/v1/pro/view/40f074ec410d44a6a23afb10d55b18a4.pdf"],N_=[{pattern:/SUN2000-100KTL-M2/i,url:"https://solar.huawei.com/admin/asset/v1/pro/view/9005a18da2964ba2a0541ce4fbae4bef.pdf"},{pattern:/SUN2000-(12|15|17|20|25)K-MB0/i,url:"https://solar.huawei.com/admin/asset/v1/pro/view/c3ba89c365cb42ce92d9ba3c366253f1.pdf"},{pattern:/SUN2000-(5|6|8|10|12)K-MAP0/i,url:"https://solar.huawei.com/admin/asset/v1/pro/view/d44e17e9bfcf4481b361798f8039ab4d.pdf"},{pattern:/SUN2000-30KTL-M3/i,url:"https://solar.huawei.com/-/media/Solar/attachment/pdf/la/datasheet/SUN2000-30-40KTL-M3.pdf"},{pattern:/SUN2000-6KTL-L1/i,url:"https://solar.huawei.com/admin/asset/v1/pro/view/1e029d00296a4b87a9823fd083db547e.pdf"},{pattern:/SUN2000-(8|10)K-LC0/i,url:"https://solar.huawei.com/admin/asset/v1/pro/view/ada802421c674daa9047aeec9d28a710.pdf"}],Yp=(s,a)=>{const r=R_[a-1];return r||(N_.find(c=>c.pattern.test(s))?.url??null)},rh="https://yohand-byte.github.io/huawei-pricing-calculator/",k_=s=>Math.round(s*100)/100,U_=s=>{const a=s.toLowerCase();return a.includes("luna")||a.includes("battery")?"Batteries":a.includes("panel")||a.includes("pv module")?"Solar Panels":a.includes("sun2000")?"Inverters":"Accessories"},D_=s=>s.trim().replace(/\s+/g," "),Er=(s,a,r)=>{const l=s.match(new RegExp(`${a}:\\s*([0-9]+(?:\\.[0-9]+)?)`));return l?Number(l[1]):r},M_=s=>{const a=s.match(/const\s+defaultLocalCharges\s*=\s*\[([\s\S]*?)\];/);if(!a)return 0;const r=/\{[\s\S]*?amountAED:\s*([0-9.]+)[\s\S]*?included:\s*(true|false)[\s\S]*?\}/g;let l=0,c=r.exec(a[1]);for(;c;)c[2]==="true"&&(l+=Number(c[1])),c=r.exec(a[1]);return l},z_=s=>{const a=s.match(/const\s+shippingProductsSeed\s*=\s*\[([\s\S]*?)\];/);if(!a)return[];const r=a[1],l=/\{\s*no:\s*(\d+),\s*description:\s*'([^']+)',\s*qty:\s*(\d+),\s*unitPriceUSD:\s*([0-9.]+)/g,c=[];let h=0;const f=[];let g=l.exec(r);for(;g;){const X=Number(g[1]),Q=D_(g[2]),ie=Number(g[3]),xe=Number(g[4]);h+=ie,f.push({order:X,ref:Q,qty:ie,unitPriceUSD:xe}),g=l.exec(r)}const v=Er(s,"exchangeRate",1),y=Er(s,"freightQuoteEUR",0),w=Er(s,"customsCostsEUR",0),x=Er(s,"containerCount",1),O=Er(s,"aedToUsdRate",3.6725),C=M_(s),B=O>0?C/O*v:0,Y=(y+w+B)*x,K=h>0?Y/h:0;for(const X of f)c.find(Q=>Q.ref===X.ref)||c.push({ref:X.ref,buy_price_unit:k_(X.unitPriceUSD*v+K),category:U_(X.ref),initial_stock:X.qty,order:X.order,datasheet_url:Yp(X.ref,X.order),source:"remote"});return c},q_=async()=>{const s=await fetch(rh,{cache:"no-store"});if(!s.ok)throw new Error(`Catalog fetch failed (${s.status})`);const a=await s.text();return z_(a)},wu=s=>s.map((a,r)=>{const l=Number.isFinite(a.order)&&a.order>0?a.order:r+1,c=Yp(a.ref,l);return{...a,order:l,datasheet_url:c??a.datasheet_url??null}}),L_=[{min:0,max:5e3,stripe:.0399,wire:.0519},{min:5e3,max:1e4,stripe:.0365,wire:.0474},{min:1e4,max:25e3,stripe:.0314,wire:.0393},{min:25e3,max:8e4,stripe:.0261,wire:.0326},{min:8e4,max:15e4,stripe:.0179,wire:.0206},{min:15e4,max:null,stripe:.0103,wire:.0118}],B_=[{min:0,max:5e3,stripe:.0299,wire:.0389},{min:5e3,max:1e4,stripe:.0276,wire:.0359},{min:1e4,max:25e3,stripe:.0226,wire:.0282},{min:25e3,max:8e4,stripe:.0181,wire:.0226},{min:8e4,max:15e4,stripe:.0131,wire:.0151},{min:15e4,max:null,stripe:.0084,wire:.0097}],H_=[{min:0,max:5e3,stripe:.0488,wire:.0634},{min:5e3,max:1e4,stripe:.0421,wire:.0547},{min:1e4,max:25e3,stripe:.0363,wire:.0454},{min:25e3,max:8e4,stripe:.0301,wire:.0376},{min:8e4,max:1e5,stripe:.0206,wire:.0237},{min:1e5,max:null,stripe:.0119,wire:.0137}],la=(s,a)=>s==="Solartraders"&&a==="Solar Panels",ve=s=>Math.round((Number.isFinite(s)?s:0)*100)/100,$_=s=>Number.isFinite(s)?s<=0?ve(s):Math.ceil(s*100)/100:0,G_=(s,a)=>a.find(l=>{const c=s>=l.min,h=l.max===null||s<l.max;return c&&h})??a[a.length-1],V_=s=>s==="Solar Panels"?B_:s==="Accessories"?H_:L_,K_=s=>`${ve(s*100)}%`,Y_=(s,a,r)=>{const l=G_(r,V_(s)),c=a==="Wire"?l.wire:l.stripe,h=a==="Stripe"?5:0,f=r*c;return{commission_rate_display:K_(c),commission_eur:a==="Stripe"?$_(f):ve(f),payment_fee:h}},Q_=(s,a,r)=>{if(s!=="Solar Panels")return{commission_rate_display:"5%",commission_eur:ve(a*.05),payment_fee:0};const l=r??0;return l>=1e6?{commission_rate_display:"1 cent/Wp",commission_eur:ve(l*.01),payment_fee:0}:{commission_rate_display:"1.5 cent/Wp",commission_eur:ve(l*.015),payment_fee:0}},X_=({channel:s,category:a,payment_method:r,transaction_value:l,power_wp:c})=>s==="Sun.store"?Y_(a,r,l):s==="Solartraders"?Q_(a,l,c):{commission_rate_display:"0%",commission_eur:0,payment_fee:0},Ai=s=>{const a=ve(s.quantity*s.sell_price_unit_ht),r=ve(a+s.shipping_charged),l=X_({channel:s.channel,category:s.category,payment_method:s.payment_method,transaction_value:r,power_wp:s.power_wp}),c=ve(r-l.commission_eur-l.payment_fee),h=ve(s.quantity*s.buy_price_unit+s.shipping_real),f=ve(r-h),g=ve(c-h),v=r<=0?0:ve(g/r*100);return{sell_total_ht:a,transaction_value:r,commission_rate_display:l.commission_rate_display,commission_eur:l.commission_eur,payment_fee:l.payment_fee,net_received:c,total_cost:h,gross_margin:f,net_margin:g,net_margin_pct:v}},Qp=s=>/[";\n]/.test(s)?`"${s.replaceAll('"','""')}"`:s,Ye=s=>s==null?"":String(s),J_=s=>{const a=["id","date","client_or_tx","transaction_ref","channel","customer_country","product_ref","quantity","sell_price_unit_ht","sell_price_unit_ttc","sell_total_ht","shipping_charged","shipping_charged_ttc","shipping_real","shipping_real_ttc","transaction_value","payment_method","category","buy_price_unit","power_wp","commission_rate_display","commission_eur","payment_fee","net_received","total_cost","gross_margin","net_margin","net_margin_pct","attachments_count","created_at","updated_at"],r=s.map(l=>[l.id,l.date,l.client_or_tx,Ye(l.transaction_ref),l.channel,Ye(l.customer_country),l.product_ref,Ye(l.quantity),Ye(l.sell_price_unit_ht),Ye(l.sell_price_unit_ttc),Ye(l.sell_total_ht),Ye(l.shipping_charged),Ye(l.shipping_charged_ttc),Ye(l.shipping_real),Ye(l.shipping_real_ttc),Ye(l.transaction_value),l.payment_method,l.category,Ye(l.buy_price_unit),Ye(l.power_wp),l.commission_rate_display,Ye(l.commission_eur),Ye(l.payment_fee),Ye(l.net_received),Ye(l.total_cost),Ye(l.gross_margin),Ye(l.net_margin),Ye(l.net_margin_pct),Ye(l.attachments.length),l.created_at,l.updated_at]);return[a,...r].map(l=>l.map(c=>Qp(String(c))).join(";")).join(`
`)},P_=(s,a)=>{const r=["order","reference","category","buy_price_unit_eur","stock_initial","stock_current","status","datasheet_url"],l=s.map(c=>{const h=a[c.ref]??c.initial_stock,f=h<=0?"Rupture":h<=5?"Stock faible":"OK";return[Ye(c.order),c.ref,c.category,Ye(c.buy_price_unit),Ye(c.initial_stock),Ye(h),f,Ye(c.datasheet_url)]});return[r,...l].map(c=>c.map(h=>Qp(String(h))).join(";")).join(`
`)},Xp=(s,a,r)=>{const l=new Blob([r],{type:a}),c=document.createElement("a");c.href=URL.createObjectURL(l),c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(c.href)},rp=(s,a)=>{Xp(s,"text/csv;charset=utf-8",a)},Z_=(s,a)=>{Xp(s,"application/json;charset=utf-8",JSON.stringify(a,null,2))},Kc=s=>{const a=new Date;return a.setDate(a.getDate()+s),a.toISOString().slice(0,10)},Yc=()=>[],I_=[{date:Kc(-2),client_or_tx:"Client Demo A",transaction_ref:"TX-1001",channel:"Sun.store",customer_country:"France",product_ref:"SUN2000-12K-MB0",quantity:2,sell_price_unit_ht:1490,sell_price_unit_ttc:1788,shipping_charged:120,shipping_charged_ttc:144,shipping_real:80,shipping_real_ttc:96,payment_method:"Wire",category:"Inverters",buy_price_unit:1317,power_wp:null,attachments:Yc()},{date:Kc(-1),client_or_tx:"Client Demo B",transaction_ref:"ST-2001",channel:"Solartraders",customer_country:"Belgique",product_ref:"HUAWEI-PANEL-550WP",quantity:100,sell_price_unit_ht:58,sell_price_unit_ttc:null,shipping_charged:300,shipping_charged_ttc:null,shipping_real:220,shipping_real_ttc:null,payment_method:"Wire",category:"Solar Panels",buy_price_unit:45,power_wp:55e4,attachments:Yc()},{date:Kc(0),client_or_tx:"Client Demo C",transaction_ref:"DIR-3001",channel:"Direct",customer_country:"France",product_ref:"Smart dongle SDongleA-05",quantity:5,sell_price_unit_ht:70,sell_price_unit_ttc:84,shipping_charged:25,shipping_charged_ttc:30,shipping_real:20,shipping_real_ttc:24,payment_method:"Cash",category:"Accessories",buy_price_unit:41,power_wp:null,attachments:Yc()}],W_=()=>I_.map((s,a)=>{const r=new Date().toISOString();return{id:`seed-${a+1}`,...s,...Ai(s),created_at:r,updated_at:r}}),yi=5,lp=(s,a)=>{const r={};for(const l of s)r[l.ref]=l.initial_stock;for(const l of a)r[l.product_ref]!==void 0&&(r[l.product_ref]=r[l.product_ref]-l.quantity);return r},jt={sales:"sales_margin_tracker_sales_v1",catalog:"sales_margin_tracker_catalog_v2",stock:"sales_margin_tracker_stock_v2",backup:"sales_margin_tracker_backup_v2"},Jp=()=>typeof window<"u"&&typeof localStorage<"u",Yt=(s,a)=>{if(!Jp())return a;try{const r=localStorage.getItem(s);return r?JSON.parse(r):a}catch{return a}},sn=(s,a)=>{Jp()&&localStorage.setItem(s,JSON.stringify(a))},Qc=(s,a,r)=>({generated_at:new Date().toISOString(),sales:s,catalog:a,stock:r});function Cu(s,a){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)a.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(r[l[c]]=s[l[c]]);return r}function F_(s,a,r,l){function c(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function g(w){try{y(l.next(w))}catch(x){f(x)}}function v(w){try{y(l.throw(w))}catch(x){f(x)}}function y(w){w.done?h(w.value):c(w.value).then(g,v)}y((l=l.apply(s,a||[])).next())})}const ev=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class vh extends Error{constructor(a,r="FunctionsError",l){super(a),this.name=r,this.context=l}}class tv extends vh{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class up extends vh{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class op extends vh{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var lh;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(lh||(lh={}));class nv{constructor(a,{headers:r={},customFetch:l,region:c=lh.Any}={}){this.url=a,this.headers=r,this.region=c,this.fetch=ev(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return F_(this,arguments,void 0,function*(r,l={}){var c;let h,f;try{const{headers:g,method:v,body:y,signal:w,timeout:x}=l;let O={},{region:C}=l;C||(C=this.region);const B=new URL(`${this.url}/${r}`);C&&C!=="any"&&(O["x-region"]=C,B.searchParams.set("forceFunctionRegion",C));let V;y&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(O["Content-Type"]="application/octet-stream",V=y):typeof y=="string"?(O["Content-Type"]="text/plain",V=y):typeof FormData<"u"&&y instanceof FormData?V=y:(O["Content-Type"]="application/json",V=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?V=JSON.stringify(y):V=y;let Y=w;x&&(f=new AbortController,h=setTimeout(()=>f.abort(),x),w?(Y=f.signal,w.addEventListener("abort",()=>f.abort())):Y=f.signal);const K=yield this.fetch(B.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},O),this.headers),g),body:V,signal:Y}).catch(xe=>{throw new tv(xe)}),X=K.headers.get("x-relay-error");if(X&&X==="true")throw new up(K);if(!K.ok)throw new op(K);let Q=((c=K.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),ie;return Q==="application/json"?ie=yield K.json():Q==="application/octet-stream"||Q==="application/pdf"?ie=yield K.blob():Q==="text/event-stream"?ie=K:Q==="multipart/form-data"?ie=yield K.formData():ie=yield K.text(),{data:ie,error:null,response:K}}catch(g){return{data:null,error:g,response:g instanceof op||g instanceof up?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var av=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},iv=class{constructor(s){var a,r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(l=s.urlLengthLimit)!==null&&l!==void 0?l:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,v=null,y=h.status,w=h.statusText;if(h.ok){var x,O;if(r.method!=="HEAD"){var C;const K=await h.text();K===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((C=r.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?g=K:g=JSON.parse(K))}const V=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),Y=(O=h.headers.get("content-range"))===null||O===void 0?void 0:O.split("/");V&&Y&&Y.length>1&&(v=parseInt(Y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,y=406,w="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var B;const V=await h.text();try{f=JSON.parse(V),Array.isArray(f)&&h.status===404&&(g=[],f=null,y=200,w="OK")}catch{h.status===404&&V===""?(y=204,w="No Content"):f={message:V}}if(f&&r.isMaybeSingle&&(!(f==null||(B=f.details)===null||B===void 0)&&B.includes("0 rows"))&&(f=null,y=200,w="OK"),f&&r.shouldThrowOnError)throw new av(f)}return{error:f,data:g,count:v,status:y,statusText:w}});return this.shouldThrowOnError||(c=c.catch(h=>{var f;let g="",v="",y="";const w=h?.cause;if(w){var x,O,C,B;const K=(x=w?.message)!==null&&x!==void 0?x:"",X=(O=w?.code)!==null&&O!==void 0?O:"";g=`${(C=h?.name)!==null&&C!==void 0?C:"FetchError"}: ${h?.message}`,g+=`

Caused by: ${(B=w?.name)!==null&&B!==void 0?B:"Error"}: ${K}`,X&&(g+=` (${X})`),w?.stack&&(g+=`
${w.stack}`)}else{var V;g=(V=h?.stack)!==null&&V!==void 0?V:""}const Y=this.url.toString().length;return h?.name==="AbortError"||h?.code==="ABORT_ERR"?(y="",v="Request was aborted (timeout or manual cancellation)",Y>this.urlLengthLimit&&(v+=`. Note: Your request URL is ${Y} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(w?.name==="HeadersOverflowError"||w?.code==="UND_ERR_HEADERS_OVERFLOW")&&(y="",v="HTTP headers exceeded server limits (typically 16KB)",Y>this.urlLengthLimit&&(v+=`. Your request URL is ${Y} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:g,hint:v,code:y},data:null,count:null,status:0,statusText:""}})),c.then(s,a)}returns(){return this}overrideTypes(){return this}},sv=class extends iv{select(s){let a=!1;const r=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:r,foreignTable:l,referencedTable:c=l}={}){const h=c?`${c}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:r=a}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:r,referencedTable:l=r}={}){const c=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(h,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:r=!1,buffers:l=!1,wal:c=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,a?"verbose":null,r?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const cp=new RegExp("[,()]");var ys=class extends sv{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const r=Array.from(new Set(a)).map(l=>typeof l=="string"&&cp.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,a){const r=Array.from(new Set(a)).map(l=>typeof l=="string"&&cp.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:r,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${c}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,r])=>{this.url.searchParams.append(a,`eq.${r}`)}),this}not(s,a,r){return this.url.searchParams.append(s,`not.${a}.${r}`),this}or(s,{foreignTable:a,referencedTable:r=a}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,r){return this.url.searchParams.append(s,`${a}.${r}`),this}},rv=class{constructor(s,{headers:a={},schema:r,fetch:l,urlLengthLimit:c=8e3}){this.url=s,this.headers=new Headers(a),this.schema=r,this.fetch=l,this.urlLengthLimit=c}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,a){const{head:r=!1,count:l}=a??{},c=r?"HEAD":"GET";let h=!1;const f=(s??"*").split("").map(y=>/\s/.test(y)&&!h?"":(y==='"'&&(h=!h),y)).join(""),{url:g,headers:v}=this.cloneRequestState();return g.searchParams.set("select",f),l&&v.append("Prefer",`count=${l}`),new ys({method:c,url:g,headers:v,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:a,defaultToNull:r=!0}={}){var l;const c="POST",{url:h,headers:f}=this.cloneRequestState();if(a&&f.append("Prefer",`count=${a}`),r||f.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(g.length>0){const v=[...new Set(g)].map(y=>`"${y}"`);h.searchParams.set("columns",v.join(","))}}return new ys({method:c,url:h,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:a,ignoreDuplicates:r=!1,count:l,defaultToNull:c=!0}={}){var h;const f="POST",{url:g,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),a!==void 0&&g.searchParams.set("on_conflict",a),l&&v.append("Prefer",`count=${l}`),c||v.append("Prefer","missing=default"),Array.isArray(s)){const y=s.reduce((w,x)=>w.concat(Object.keys(x)),[]);if(y.length>0){const w=[...new Set(y)].map(x=>`"${x}"`);g.searchParams.set("columns",w.join(","))}}return new ys({method:f,url:g,headers:v,schema:this.schema,body:s,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:a}={}){var r;const l="PATCH",{url:c,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new ys({method:l,url:c,headers:h,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var a;const r="DELETE",{url:l,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new ys({method:r,url:l,headers:c,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};function Cr(s){"@babel/helpers - typeof";return Cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Cr(s)}function lv(s,a){if(Cr(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(Cr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function uv(s){var a=lv(s,"string");return Cr(a)=="symbol"?a:a+""}function ov(s,a,r){return(a=uv(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function hp(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function ru(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?hp(Object(r),!0).forEach(function(l){ov(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):hp(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}var cv=class Pp{constructor(a,{headers:r={},schema:l,fetch:c,timeout:h,urlLengthLimit:f=8e3}={}){this.url=a,this.headers=new Headers(r),this.schemaName=l,this.urlLengthLimit=f;const g=c??globalThis.fetch;h!==void 0&&h>0?this.fetch=(v,y)=>{const w=new AbortController,x=setTimeout(()=>w.abort(),h),O=y?.signal;if(O){if(O.aborted)return clearTimeout(x),g(v,y);const C=()=>{clearTimeout(x),w.abort()};return O.addEventListener("abort",C,{once:!0}),g(v,ru(ru({},y),{},{signal:w.signal})).finally(()=>{clearTimeout(x),O.removeEventListener("abort",C)})}return g(v,ru(ru({},y),{},{signal:w.signal})).finally(()=>clearTimeout(x))}:this.fetch=g}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new rv(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(a){return new Pp(this.url,{headers:this.headers,schema:a,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(a,r={},{head:l=!1,get:c=!1,count:h}={}){var f;let g;const v=new URL(`${this.url}/rpc/${a}`);let y;const w=C=>C!==null&&typeof C=="object"&&(!Array.isArray(C)||C.some(w)),x=l&&Object.values(r).some(w);x?(g="POST",y=r):l||c?(g=l?"HEAD":"GET",Object.entries(r).filter(([C,B])=>B!==void 0).map(([C,B])=>[C,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([C,B])=>{v.searchParams.append(C,B)})):(g="POST",y=r);const O=new Headers(this.headers);return x?O.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&O.set("Prefer",`count=${h}`),new ys({method:g,url:v,headers:O,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class hv{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const c=l.node,h=parseInt(c.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const l=this.getWebSocketConstructor();return new l(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const dv="2.95.3",fv=`realtime-js/${dv}`,mv="1.0.0",Zp="2.0.0",dp=Zp,uh=1e4,pv=1e3,gv=100;var Ka;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ka||(Ka={}));var ft;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ft||(ft={}));var Rn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Rn||(Rn={}));var oh;(function(s){s.websocket="websocket"})(oh||(oh={}));var wi;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(wi||(wi={}));class yv{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,r){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(a));let l=[a.join_ref,a.ref,a.topic,a.event,a.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(a){var r;return this._isArrayBuffer((r=a.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var r,l;const c=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(a){var r,l;const c=(l=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,r,l){var c,h;const f=a.topic,g=(c=a.ref)!==null&&c!==void 0?c:"",v=(h=a.join_ref)!==null&&h!==void 0?h:"",y=a.payload.event,w=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},x=Object.keys(w).length===0?"":JSON.stringify(w);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const O=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+g.length+f.length+y.length+x.length,C=new ArrayBuffer(this.HEADER_LENGTH+O);let B=new DataView(C),V=0;B.setUint8(V++,this.KINDS.userBroadcastPush),B.setUint8(V++,v.length),B.setUint8(V++,g.length),B.setUint8(V++,f.length),B.setUint8(V++,y.length),B.setUint8(V++,x.length),B.setUint8(V++,r),Array.from(v,K=>B.setUint8(V++,K.charCodeAt(0))),Array.from(g,K=>B.setUint8(V++,K.charCodeAt(0))),Array.from(f,K=>B.setUint8(V++,K.charCodeAt(0))),Array.from(y,K=>B.setUint8(V++,K.charCodeAt(0))),Array.from(x,K=>B.setUint8(V++,K.charCodeAt(0)));var Y=new Uint8Array(C.byteLength+l.byteLength);return Y.set(new Uint8Array(C),0),Y.set(new Uint8Array(l),C.byteLength),Y.buffer}decode(a,r){if(this._isArrayBuffer(a)){let l=this._binaryDecode(a);return r(l)}if(typeof a=="string"){const l=JSON.parse(a),[c,h,f,g,v]=l;return r({join_ref:c,ref:h,topic:f,event:g,payload:v})}return r({})}_binaryDecode(a){const r=new DataView(a),l=r.getUint8(0),c=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,r,c)}_decodeUserBroadcast(a,r,l){const c=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let v=this.HEADER_LENGTH+4;const y=l.decode(a.slice(v,v+c));v=v+c;const w=l.decode(a.slice(v,v+h));v=v+h;const x=l.decode(a.slice(v,v+f));v=v+f;const O=a.slice(v,a.byteLength),C=g===this.JSON_ENCODING?JSON.parse(l.decode(O)):O,B={type:this.BROADCAST_EVENT,event:w,payload:C};return f>0&&(B.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:B}}_isArrayBuffer(a){var r;return a instanceof ArrayBuffer||((r=a?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(a,r){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([l])=>r.includes(l)))}}class Ip{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ke||(Ke={}));const fp=(s,a,r={})=>{var l;const c=(l=r.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=_v(f,s,a,c),h),{}):{}},_v=(s,a,r,l)=>{const c=a.find(g=>g.name===s),h=c?.type,f=r[s];return h&&!l.includes(h)?Wp(h,f):ch(f)},Wp=(s,a)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return wv(a,r)}switch(s){case Ke.bool:return vv(a);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return bv(a);case Ke.json:case Ke.jsonb:return Sv(a);case Ke.timestamp:return Ev(a);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return ch(a);default:return ch(a)}},ch=s=>s,vv=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},bv=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},Sv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},wv=(s,a)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let h;const f=s.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>Wp(a,g))}return s},Ev=s=>typeof s=="string"?s.replace(" ","T"):s,Fp=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Xc{constructor(a,r,l={},c=uh){this.channel=a,this.event=r,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var l;return this._hasReceived(a)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var mp;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(mp||(mp={}));class Or{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Or.syncState(this.state,c,h,f),this.pendingDiffs.forEach(v=>{this.state=Or.syncDiff(this.state,v,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},c=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Or.syncDiff(this.state,c,h,f),g())}),this.onJoin((c,h,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:h,newPresences:f})}),this.onLeave((c,h,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,l,c){const h=this.cloneDeep(a),f=this.transformState(r),g={},v={};return this.map(h,(y,w)=>{f[y]||(v[y]=w)}),this.map(f,(y,w)=>{const x=h[y];if(x){const O=w.map(Y=>Y.presence_ref),C=x.map(Y=>Y.presence_ref),B=w.filter(Y=>C.indexOf(Y.presence_ref)<0),V=x.filter(Y=>O.indexOf(Y.presence_ref)<0);B.length>0&&(g[y]=B),V.length>0&&(v[y]=V)}else g[y]=w}),this.syncDiff(h,{joins:g,leaves:v},l,c)}static syncDiff(a,r,l,c){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(h,(g,v)=>{var y;const w=(y=a[g])!==null&&y!==void 0?y:[];if(a[g]=this.cloneDeep(v),w.length>0){const x=a[g].map(C=>C.presence_ref),O=w.filter(C=>x.indexOf(C.presence_ref)<0);a[g].unshift(...O)}l(g,w,v)}),this.map(f,(g,v)=>{let y=a[g];if(!y)return;const w=v.map(x=>x.presence_ref);y=y.filter(x=>w.indexOf(x.presence_ref)<0),a[g]=y,c(g,y,v),y.length===0&&delete a[g]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(l=>r(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,l)=>{const c=a[l];return"metas"in c?r[l]=c.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=c,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pp;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(pp||(pp={}));var xr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(xr||(xr={}));var ua;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class bs{constructor(a,r={config:{}},l){var c,h;if(this.topic=a,this.params=r,this.socket=l,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xc(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Ip(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Or(this),this.broadcastEndpointURL=Fp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var l,c,h;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:f,presence:g,private:v}}=this.params,y=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(C=>C.filter))!==null&&c!==void 0?c:[],w=!!this.bindings[xr.PRESENCE]&&this.bindings[xr.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,x={},O={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:w}),postgres_changes:y,private:v};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(C=>a?.(ua.CHANNEL_ERROR,C)),this._onClose(()=>a?.(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:O},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:C})=>{var B;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){a?.(ua.SUBSCRIBED);return}else{const V=this.bindings.postgres_changes,Y=(B=V?.length)!==null&&B!==void 0?B:0,K=[];for(let X=0;X<Y;X++){const Q=V[X],{filter:{event:ie,schema:xe,table:fe,filter:te}}=Q,$e=C&&C[X];if($e&&$e.event===ie&&bs.isFilterValueEqual($e.schema,xe)&&bs.isFilterValueEqual($e.table,fe)&&bs.isFilterValueEqual($e.filter,te))K.push(Object.assign(Object.assign({},Q),{id:$e.id}));else{this.unsubscribe(),this.state=ft.errored,a?.(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,a&&a(ua.SUBSCRIBED);return}}).receive("error",C=>{this.state=ft.errored,a?.(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{a?.(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,l){return this.state===ft.joined&&a===xr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,r,l)}async httpSend(a,r,l={}){var c;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(g.status===202)return{success:!0};let v=g.statusText;try{const y=await g.json();v=y.error||y.message||v}catch{}return Promise.reject(new Error(v))}async send(a,r={}){var l,c;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,v;const y=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((v=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||v===void 0)&&v.ack)&&h("ok"),y.receive("ok",()=>h("ok")),y.receive("error",()=>h("error")),y.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Xc(this,Rn.leave,{},a),l.receive("ok",()=>{r(),c("ok")}).receive("timeout",()=>{r(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(a,r,l){const c=new AbortController,h=setTimeout(()=>c.abort(),l),f=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:c.signal}));return clearTimeout(h),f}_push(a,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Xc(this,a,r,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>gv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,l){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,l){var c,h;const f=a.toLocaleLowerCase(),{close:g,error:v,leave:y,join:w}=Rn;if(l&&[g,v,y,w].indexOf(f)>=0&&l!==this._joinRef())return;let O=this._onMessage(f,r,l);if(r&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(C=>{var B,V,Y;return((B=C.filter)===null||B===void 0?void 0:B.event)==="*"||((Y=(V=C.filter)===null||V===void 0?void 0:V.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===f}).map(C=>C.callback(O,l)):(h=this.bindings[f])===null||h===void 0||h.filter(C=>{var B,V,Y,K,X,Q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const ie=C.id,xe=(B=C.filter)===null||B===void 0?void 0:B.event;return ie&&((V=r.ids)===null||V===void 0?void 0:V.includes(ie))&&(xe==="*"||xe?.toLocaleLowerCase()===((Y=r.data)===null||Y===void 0?void 0:Y.type.toLocaleLowerCase()))}else{const ie=(X=(K=C?.filter)===null||K===void 0?void 0:K.event)===null||X===void 0?void 0:X.toLocaleLowerCase();return ie==="*"||ie===((Q=r?.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof O=="object"&&"ids"in O){const B=O.data,{schema:V,table:Y,commit_timestamp:K,type:X,errors:Q}=B;O=Object.assign(Object.assign({},{schema:V,table:Y,commit_timestamp:K,eventType:X,new:{},old:{},errors:Q}),this._getPayloadRecords(B))}C.callback(O,l)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,l){const c=a.toLocaleLowerCase(),h={type:c,filter:r,callback:l};return this.bindings[c]?this.bindings[c].push(h):this.bindings[c]=[h],this}_off(a,r){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var h;return!(((h=c.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&bs.isEqual(c.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(a[l]!==r[l])return!1;return!0}static isFilterValueEqual(a,r){return(a??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Rn.close,{},a)}_onError(a){this._on(Rn.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=fp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=fp(a.columns,a.old_record)),r}}const Jc=()=>{},lu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Tv=[1e3,2e3,5e3,1e4],Av=1e4,jv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ov{constructor(a,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uh,this.transport=null,this.heartbeatIntervalMs=lu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jc,this.ref=0,this.reconnectTimer=null,this.vsn=dp,this.logger=Jc,this.conn=null,this.sendBuffer=[],this.serializer=new yv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...h)=>c(...h):(...h)=>fetch(...h),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${oh.websocket}`,this.httpEndpoint=Fp(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hv.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return r==="ok"&&this._remove(a),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,l){this.logger(a,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Ka.connecting:return wi.Connecting;case Ka.open:return wi.Open;case Ka.closing:return wi.Closing;default:return wi.Closed}}isConnected(){return this.connectionState()===wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const l=`realtime:${a}`,c=this.getChannels().find(h=>h.topic===l);if(c)return c;{const h=new bs(`realtime:${a}`,r,this);return this.channels.push(h),h}}push(a){const{topic:r,event:l,payload:c,ref:h}=a,f=()=>{this.encode(a,g=>{var v;(v=this.conn)===null||v===void 0||v.send(g)})};this.log("push",`${r} ${l} (${h})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(pv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},lu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",y)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:c,payload:h,ref:f}=r,g=f?`(${f})`:"",v=h.status||"";this.log("receive",`${v} ${l} ${c} ${g}`.trim(),h),this.channels.filter(y=>y._isMember(l)).forEach(y=>y._trigger(c,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===Ka.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ka.open||this.conn.readyState===Ka.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(a=>a._trigger(Rn.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const l=a.match(/\?/)?"&":"?",c=new URLSearchParams(r);return`${a}${l}${c}`}_workerObjectUrl(a){let r;if(a)r=a;else{const l=new Blob([jv],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r,l=!1;if(a)r=a,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(c=>{const h={access_token:r,version:fv};r&&c.updateJoinPayload(h),c.joinedOnce&&c._isJoined()&&c._push(Rn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(r)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ip(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,l,c,h,f,g,v,y,w,x,O,C;switch(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=a?.timeout)!==null&&l!==void 0?l:uh,this.heartbeatIntervalMs=(c=a?.heartbeatIntervalMs)!==null&&c!==void 0?c:lu.HEARTBEAT_INTERVAL,this.worker=(h=a?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=a?.heartbeatCallback)!==null&&g!==void 0?g:Jc,this.vsn=(v=a?.vsn)!==null&&v!==void 0?v:dp,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=a?.reconnectAfterMs)!==null&&y!==void 0?y:(B=>Tv[B-1]||Av),this.vsn){case mv:this.encode=(w=a?.encode)!==null&&w!==void 0?w:((B,V)=>V(JSON.stringify(B))),this.decode=(x=a?.decode)!==null&&x!==void 0?x:((B,V)=>V(JSON.parse(B)));break;case Zp:this.encode=(O=a?.encode)!==null&&O!==void 0?O:this.serializer.encode.bind(this.serializer),this.decode=(C=a?.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}var Rr=class extends Error{constructor(s,a){super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&a.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xv(s,a,r){const l=new URL(a,s);if(r)for(const[c,h]of Object.entries(r))h!==void 0&&l.searchParams.set(c,h);return l.toString()}async function Cv(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Rv(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:c,body:h,headers:f}){const g=xv(s.baseUrl,l,c),v=await Cv(s.auth),y=await a(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...v,...f},body:h?JSON.stringify(h):void 0}),w=await y.text(),x=(y.headers.get("content-type")||"").includes("application/json"),O=x&&w?JSON.parse(w):w;if(!y.ok){const C=x?O:void 0,B=C?.error;throw new Rr(B?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:B?.type,icebergCode:B?.code,details:C})}return{status:y.status,headers:y.headers,data:O}}}}function uu(s){return s.join("")}var Nv=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:uu(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,a){const r={namespace:s.namespace,properties:a?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${uu(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${uu(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${uu(s.namespace)}`}),!0}catch(a){if(a instanceof Rr&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(r){if(r instanceof Rr&&r.status===409)return;throw r}}};function hs(s){return s.join("")}var kv=class{constructor(s,a="",r){this.client=s,this.prefix=a,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables`,body:a,headers:r})).data.metadata}async updateTable(s,a){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(a?.purge??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hs(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(r){if(r instanceof Rr&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(r){if(r instanceof Rr&&r.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw r}}},Uv=class{constructor(s){let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Rv({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new Nv(this.client,a),this.tableOps=new kv(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},Ru=class extends Error{constructor(s,a="storage",r,l){super(s),this.__isStorageError=!0,this.namespace=a,this.name=a==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=l}};function Nu(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var ou=class extends Ru{constructor(s,a,r,l="storage"){super(s,l,a,r),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=a,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eg=class extends Ru{constructor(s,a,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=a}};const Dv=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),Mv=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},hh=s=>{if(Array.isArray(s))return s.map(r=>hh(r));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([r,l])=>{const c=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[c]=hh(l)}),a},zv=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Nr(s){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Nr(s)}function qv(s,a){if(Nr(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(Nr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function Lv(s){var a=qv(s,"string");return Nr(a)=="symbol"?a:a+""}function Bv(s,a,r){return(a=Lv(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function gp(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function ce(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?gp(Object(r),!0).forEach(function(l){Bv(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):gp(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const yp=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},Hv=async(s,a,r,l)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!r?.noResolveJson){const c=s,h=c.status||500;if(typeof c.json=="function")c.json().then(f=>{const g=f?.statusCode||f?.code||h+"";a(new ou(yp(f),h,g,l))}).catch(()=>{if(l==="vectors"){const f=h+"";a(new ou(c.statusText||`HTTP ${h} error`,h,f,l))}else{const f=h+"";a(new ou(c.statusText||`HTTP ${h} error`,h,f,l))}});else{const f=h+"";a(new ou(c.statusText||`HTTP ${h} error`,h,f,l))}}else a(new eg(yp(s),s,l))},$v=(s,a,r,l)=>{const c={method:s,headers:a?.headers||{}};return s==="GET"||s==="HEAD"||!l?ce(ce({},c),r):(Mv(l)?(c.headers=ce({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(l)):c.body=l,a?.duplex&&(c.duplex=a.duplex),ce(ce({},c),r))};async function Tr(s,a,r,l,c,h,f){return new Promise((g,v)=>{s(r,$v(a,l,c,h)).then(y=>{if(!y.ok)throw y;if(l?.noResolveJson)return y;if(f==="vectors"){const w=y.headers.get("content-type");if(y.headers.get("content-length")==="0"||y.status===204)return{};if(!w||!w.includes("application/json"))return{}}return y.json()}).then(y=>g(y)).catch(y=>Hv(y,v,l,f))})}function tg(s="storage"){return{get:async(a,r,l,c)=>Tr(a,"GET",r,l,c,void 0,s),post:async(a,r,l,c,h)=>Tr(a,"POST",r,c,h,l,s),put:async(a,r,l,c,h)=>Tr(a,"PUT",r,c,h,l,s),head:async(a,r,l,c)=>Tr(a,"HEAD",r,ce(ce({},l),{},{noResolveJson:!0}),c,void 0,s),remove:async(a,r,l,c,h)=>Tr(a,"DELETE",r,c,h,l,s)}}const Gv=tg("storage"),{get:kr,post:Cn,put:dh,head:Vv,remove:bh}=Gv,ln=tg("vectors");var ws=class{constructor(s,a={},r,l="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.fetch=Dv(r),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var a=this;try{return{data:await s(),error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(Nu(r))return{data:null,error:r};throw r}}},Kv=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Nu(a))return{data:null,error:a};throw a}}};let ng;ng=Symbol.toStringTag;var Yv=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[ng]="BlobDownloadBuilder",this.promise=null}asStream(){return new Kv(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Nu(a))return{data:null,error:a};throw a}}};const Qv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_p={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Xv=class extends ws{constructor(s,a={},r,l){super(s,a,l,"storage"),this.bucketId=r}async uploadOrUpdate(s,a,r,l){var c=this;return c.handleOperation(async()=>{let h;const f=ce(ce({},_p),l);let g=ce(ce({},c.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),v&&h.append("metadata",c.encodeMetadata(v)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),v&&!h.has("metadata")&&h.append("metadata",c.encodeMetadata(v))):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,v&&(g["x-metadata"]=c.toBase64(c.encodeMetadata(v))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(g=ce(ce({},g),l.headers));const y=c._removeEmptyFolders(a),w=c._getFinalPath(y),x=await(s=="PUT"?dh:Cn)(c.fetch,`${c.url}/object/${w}`,h,ce({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{path:y,id:x.Id,fullPath:x.Key}})}async upload(s,a,r){return this.uploadOrUpdate("POST",s,a,r)}async uploadToSignedUrl(s,a,r,l){var c=this;const h=c._removeEmptyFolders(s),f=c._getFinalPath(h),g=new URL(c.url+`/object/upload/sign/${f}`);return g.searchParams.set("token",a),c.handleOperation(async()=>{let v;const y=ce({upsert:_p.upsert},l),w=ce(ce({},c.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&r instanceof Blob?(v=new FormData,v.append("cacheControl",y.cacheControl),v.append("",r)):typeof FormData<"u"&&r instanceof FormData?(v=r,v.append("cacheControl",y.cacheControl)):(v=r,w["cache-control"]=`max-age=${y.cacheControl}`,w["content-type"]=y.contentType),{path:h,fullPath:(await dh(c.fetch,g.toString(),v,{headers:w})).Key}})}async createSignedUploadUrl(s,a){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(s);const c=ce({},r.headers);a?.upsert&&(c["x-upsert"]="true");const h=await Cn(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:c}),f=new URL(r.url+h.url),g=f.searchParams.get("token");if(!g)throw new Ru("No token returned by API");return{signedUrl:f.toString(),path:s,token:g}})}async update(s,a,r){return this.uploadOrUpdate("PUT",s,a,r)}async move(s,a,r){var l=this;return l.handleOperation(async()=>await Cn(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:l.headers}))}async copy(s,a,r){var l=this;return l.handleOperation(async()=>({path:(await Cn(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(s,a,r){var l=this;return l.handleOperation(async()=>{let c=l._getFinalPath(s),h=await Cn(l.fetch,`${l.url}/object/sign/${c}`,ce({expiresIn:a},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${l.url}${h.signedURL}${f}`)}})}async createSignedUrls(s,a,r){var l=this;return l.handleOperation(async()=>{const c=await Cn(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:a,paths:s},{headers:l.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return c.map(f=>ce(ce({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${h}`):null}))})}download(s,a,r){const l=typeof a?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(a?.transform||{}),h=c?`?${c}`:"",f=this._getFinalPath(s),g=()=>kr(this.fetch,`${this.url}/${l}/${f}${h}`,{headers:this.headers,noResolveJson:!0},r);return new Yv(g,this.shouldThrowOnError)}async info(s){var a=this;const r=a._getFinalPath(s);return a.handleOperation(async()=>hh(await kr(a.fetch,`${a.url}/object/info/${r}`,{headers:a.headers})))}async exists(s){var a=this;const r=a._getFinalPath(s);try{return await Vv(a.fetch,`${a.url}/object/${r}`,{headers:a.headers}),{data:!0,error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Nu(l)&&l instanceof eg){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,a){const r=this._getFinalPath(s),l=[],c=a?.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&l.push(c);const h=typeof a?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(a?.transform||{});f!==""&&l.push(f);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(s){var a=this;return a.handleOperation(async()=>await bh(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}))}async list(s,a,r){var l=this;return l.handleOperation(async()=>{const c=ce(ce(ce({},Qv),a),{},{prefix:s||""});return await Cn(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},r)})}async listV2(s,a){var r=this;return r.handleOperation(async()=>{const l=ce({},s);return await Cn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},a)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const Jv="2.95.3",zr={"X-Client-Info":`storage-js/${Jv}`};var Pv=class extends ws{constructor(s,a={},r,l){const c=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase."));const h=c.href.replace(/\/$/,""),f=ce(ce({},zr),a);super(h,f,r,"storage")}async listBuckets(s){var a=this;return a.handleOperation(async()=>{const r=a.listBucketOptionsToQueryString(s);return await kr(a.fetch,`${a.url}/bucket${r}`,{headers:a.headers})})}async getBucket(s){var a=this;return a.handleOperation(async()=>await kr(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}))}async createBucket(s,a={public:!1}){var r=this;return r.handleOperation(async()=>await Cn(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,a){var r=this;return r.handleOperation(async()=>await dh(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var a=this;return a.handleOperation(async()=>await Cn(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}))}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await bh(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}))}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},Zv=class extends ws{constructor(s,a={},r){const l=s.replace(/\/$/,""),c=ce(ce({},zr),a);super(l,c,r,"storage")}async createBucket(s){var a=this;return a.handleOperation(async()=>await Cn(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}))}async listBuckets(s){var a=this;return a.handleOperation(async()=>{const r=new URLSearchParams;s?.limit!==void 0&&r.set("limit",s.limit.toString()),s?.offset!==void 0&&r.set("offset",s.offset.toString()),s?.sortColumn&&r.set("sortColumn",s.sortColumn),s?.sortOrder&&r.set("sortOrder",s.sortOrder),s?.search&&r.set("search",s.search);const l=r.toString(),c=l?`${a.url}/bucket?${l}`:`${a.url}/bucket`;return await kr(a.fetch,c,{headers:a.headers})})}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await bh(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}))}from(s){var a=this;if(!zv(s))throw new Ru("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Uv({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(c,h){const f=c[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(c,g),error:null}}catch(v){if(l)throw v;return{data:null,error:v}}}}})}},Iv=class extends ws{constructor(s,a={},r){const l=s.replace(/\/$/,""),c=ce(ce({},zr),{},{"Content-Type":"application/json"},a);super(l,c,r,"vectors")}async createIndex(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{})}async getIndex(s,a){var r=this;return r.handleOperation(async()=>await ln.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:r.headers}))}async listIndexes(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}))}async deleteIndex(s,a){var r=this;return r.handleOperation(async()=>await ln.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:r.headers})||{})}},Wv=class extends ws{constructor(s,a={},r){const l=s.replace(/\/$/,""),c=ce(ce({},zr),{},{"Content-Type":"application/json"},a);super(l,c,r,"vectors")}async putVectors(s){var a=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{})}async getVectors(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}))}async listVectors(s){var a=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}))}async queryVectors(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}))}async deleteVectors(s){var a=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{})}},Fv=class extends ws{constructor(s,a={},r){const l=s.replace(/\/$/,""),c=ce(ce({},zr),{},{"Content-Type":"application/json"},a);super(l,c,r,"vectors")}async createBucket(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{})}async getBucket(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}))}async listBuckets(s={}){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}))}async deleteBucket(s){var a=this;return a.handleOperation(async()=>await ln.post(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{})}},e0=class extends Fv{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new t0(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,r=this;return a().call(r,s)}async getBucket(s){var a=()=>super.getBucket,r=this;return a().call(r,s)}async listBuckets(s={}){var a=()=>super.listBuckets,r=this;return a().call(r,s)}async deleteBucket(s){var a=()=>super.deleteBucket,r=this;return a().call(r,s)}},t0=class extends Iv{constructor(s,a,r,l){super(s,a,l),this.vectorBucketName=r}async createIndex(s){var a=()=>super.createIndex,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,r=this;return a().call(r,r.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,r=this;return a().call(r,r.vectorBucketName,s)}index(s){return new n0(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},n0=class extends Wv{constructor(s,a,r,l,c){super(s,a,c),this.vectorBucketName=r,this.indexName=l}async putVectors(s){var a=()=>super.putVectors,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var a=()=>super.getVectors,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,r=this;return a().call(r,ce(ce({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},a0=class extends Pv{constructor(s,a={},r,l){super(s,a,r,l)}from(s){return new Xv(this.url,this.headers,s,this.fetch)}get vectors(){return new e0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zv(this.url+"/iceberg",this.headers,this.fetch)}};const ag="2.95.3",_s=30*1e3,fh=3,Pc=fh*_s,i0="http://localhost:9999",s0="supabase.auth.token",r0={"X-Client-Info":`gotrue-js/${ag}`},mh="X-Supabase-Api-Version",ig={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u0=600*1e3;class Ur extends Error{constructor(a,r,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function ae(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class o0 extends Ur{constructor(a,r,l){super(a,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function c0(s){return ae(s)&&s.name==="AuthApiError"}class Ei extends Ur{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class oa extends Ur{constructor(a,r,l,c){super(a,l,c),this.name=r,this.status=l}}class rn extends oa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zc(s){return ae(s)&&s.name==="AuthSessionMissingError"}class ds extends oa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cu extends oa{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class hu extends oa{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function h0(s){return ae(s)&&s.name==="AuthImplicitGrantRedirectError"}class vp extends oa{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class d0 extends oa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ph extends oa{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function Ic(s){return ae(s)&&s.name==="AuthRetryableFetchError"}class bp extends oa{constructor(a,r,l){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class gh extends oa{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sp=` 	
\r=`.split(""),f0=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<Sp.length;a+=1)s[Sp[a].charCodeAt(0)]=-2;for(let a=0;a<Eu.length;a+=1)s[Eu[a].charCodeAt(0)]=a;return s})();function wp(s,a,r){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(Eu[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;r(Eu[l]),a.queuedBits-=6}}function sg(s,a,r){const l=f0[s];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Ep(s){const a=[],r=f=>{a.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},h=f=>{g0(f,l,r)};for(let f=0;f<s.length;f+=1)sg(s.charCodeAt(f),c,h);return a.join("")}function m0(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function p0(s,a){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|c)+65536,r+=1}m0(l,a)}}function g0(s,a,r){if(a.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function Ss(s){const a=[],r={queue:0,queuedBits:0},l=c=>{a.push(c)};for(let c=0;c<s.length;c+=1)sg(s.charCodeAt(c),r,l);return new Uint8Array(a)}function y0(s){const a=[];return p0(s,r=>a.push(r)),new Uint8Array(a)}function Ti(s){const a=[],r={queue:0,queuedBits:0},l=c=>{a.push(c)};return s.forEach(c=>wp(c,r,l)),wp(null,r,l),a.join("")}function _0(s){return Math.round(Date.now()/1e3)+s}function v0(){return Symbol("auth-callback")}const At=()=>typeof window<"u"&&typeof document<"u",_i={tested:!1,writable:!1},rg=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_i.tested)return _i.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),_i.tested=!0,_i.writable=!0}catch{_i.tested=!0,_i.writable=!1}return _i.writable};function b0(s){const a={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((c,h)=>{a[h]=c})}catch{}return r.searchParams.forEach((l,c)=>{a[c]=l}),a}const lg=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),S0=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",vs=async(s,a,r)=>{await s.setItem(a,JSON.stringify(r))},vi=async(s,a)=>{const r=await s.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tt=async(s,a)=>{await s.removeItem(a)};class ku{constructor(){this.promise=new ku.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}ku.promiseConstructor=Promise;function du(s){const a=s.split(".");if(a.length!==3)throw new gh("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!l0.test(a[l]))throw new gh("JWT not in base64url format");return{header:JSON.parse(Ep(a[0])),payload:JSON.parse(Ep(a[1])),signature:Ss(a[2]),raw:{header:a[0],payload:a[1]}}}async function w0(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function E0(s,a){return new Promise((l,c)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await s(h);if(!a(h,null,f)){l(f);return}}catch(f){if(!a(h,f)){c(f);return}}})()})}function T0(s){return("0"+s.toString(16)).substr(-2)}function A0(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let c="";for(let h=0;h<56;h++)c+=r.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(a),Array.from(a,T0).join("")}async function j0(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),c=new Uint8Array(l);return Array.from(c).map(h=>String.fromCharCode(h)).join("")}async function O0(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await j0(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fs(s,a,r=!1){const l=A0();let c=l;r&&(c+="/PASSWORD_RECOVERY"),await vs(s,`${a}-code-verifier`,c);const h=await O0(l);return[h,l===h?"plain":"s256"]}const x0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function C0(s){const a=s.headers.get(mh);if(!a||!a.match(x0))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function R0(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function N0(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const k0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ms(s){if(!k0.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wc(){const s={};return new Proxy(s,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function U0(s,a){return new Proxy(s,{get:(r,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,c)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,l,c)}})}function Tp(s){return JSON.parse(JSON.stringify(s))}const Si=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),D0=[502,503,504];async function Ap(s){var a;if(!S0(s))throw new ph(Si(s),0);if(D0.includes(s.status))throw new ph(Si(s),s.status);let r;try{r=await s.json()}catch(h){throw new Ei(Si(h),h)}let l;const c=C0(s);if(c&&c.getTime()>=ig["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new bp(Si(r),s.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new rn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new bp(Si(r),s.status,r.weak_password.reasons);throw new o0(Si(r),s.status||500,l)}const M0=(s,a,r,l)=>{const c={method:s,headers:a?.headers||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),r))};async function oe(s,a,r,l){var c;const h=Object.assign({},l?.headers);h[mh]||(h[mh]=ig["2024-01-01"].name),l?.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const f=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await z0(s,a,r+g,{headers:h,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(v):{data:Object.assign({},v),error:null}}async function z0(s,a,r,l,c,h){const f=M0(a,l,c,h);let g;try{g=await s(r,Object.assign({},f))}catch(v){throw console.error(v),new ph(Si(v),0)}if(g.ok||await Ap(g),l?.noResolveJson)return g;try{return await g.json()}catch(v){await Ap(v)}}function xn(s){var a;let r=null;B0(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=_0(s.expires_in)));const l=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:r,user:l},error:null}}function jp(s){const a=xn(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(a.data.weak_password=s.weak_password),a}function Ya(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function q0(s){return{data:s,error:null}}function L0(s){const{action_link:a,email_otp:r,hashed_token:l,redirect_to:c,verification_type:h}=s,f=Cu(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:r,hashed_token:l,redirect_to:c,verification_type:h},v=Object.assign({},f);return{data:{properties:g,user:v},error:null}}function Op(s){return s}function B0(s){return s.access_token&&s.refresh_token&&s.expires_in}const Fc=["global","local","others"];class H0{constructor({url:a="",headers:r={},fetch:l}){this.url=a,this.headers=r,this.fetch=lg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=Fc[0]){if(Fc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fc.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(ae(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ya})}catch(l){if(ae(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:r}=a,l=Cu(a,["options"]),c=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:L0,redirectTo:r?.redirectTo})}catch(r){if(ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Ya})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,l,c,h,f,g,v;try{const y={nextPage:null,lastPage:0,total:0},w=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&h!==void 0?h:""},xform:Op});if(w.error)throw w.error;const x=await w.json(),O=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(v=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return C.length>0&&(C.forEach(B=>{const V=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(B.split(";")[1].split("=")[1]);y[`${Y}Page`]=V}),y.total=parseInt(O)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(ae(y))return{data:{users:[]},error:y};throw y}}async getUserById(a){ms(a);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Ya})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){ms(a);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:Ya})}catch(l){if(ae(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,r=!1){ms(a);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ya})}catch(l){if(ae(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){ms(a.userId);try{const{data:r,error:l}=await oe(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:r,error:l}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteFactor(a){ms(a.userId),ms(a.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,l,c,h,f,g,v;try{const y={nextPage:null,lastPage:0,total:0},w=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&h!==void 0?h:""},xform:Op});if(w.error)throw w.error;const x=await w.json(),O=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(v=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&v!==void 0?v:[];return C.length>0&&(C.forEach(B=>{const V=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(B.split(";")[1].split("=")[1]);y[`${Y}Page`]=V}),y.total=parseInt(O)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(ae(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(a){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(ae(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}}function xp(s={}){return{getItem:a=>s[a]||null,setItem:(a,r)=>{s[a]=r},removeItem:a=>{delete s[a]}}}const ps={debug:!!(globalThis&&rg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ug extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class $0 extends ug{}async function G0(s,a,r){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await r()}finally{ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(a===0)throw ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new $0(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ps.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function V0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function og(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function K0(s){return parseInt(s,16)}function Y0(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function Q0(s){var a;const{chainId:r,domain:l,expirationTime:c,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:v,resources:y,scheme:w,uri:x,version:O}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(O!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${O}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const C=og(s.address),B=w?`${w}://${l}`:l,V=s.statement?`${s.statement}
`:"",Y=`${B} wants you to sign in with your Ethereum account:
${C}

${V}`;let K=`URI: ${x}
Version: ${O}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(c&&(K+=`
Expiration Time: ${c.toISOString()}`),g&&(K+=`
Not Before: ${g.toISOString()}`),v&&(K+=`
Request ID: ${v}`),y){let X=`
Resources:`;for(const Q of y){if(!Q||typeof Q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Q}`);X+=`
- ${Q}`}K+=X}return`${Y}
${K}`}class ct extends Error{constructor({message:a,code:r,cause:l,name:c}){var h;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=c??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class Tu extends ct{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function X0({error:s,options:a}){var r,l,c;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=h.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(cg(f)){if(h.rp.id!==f)return new ct({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function J0({error:s,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ct({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(cg(l)){if(r.rpId!==l)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class P0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Z0=new P0;function I0(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:r,excludeCredentials:l}=s,c=Cu(s,["challenge","user","excludeCredentials"]),h=Ss(a).buffer,f=Object.assign(Object.assign({},r),{id:Ss(r.id).buffer}),g=Object.assign(Object.assign({},c),{challenge:h,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let v=0;v<l.length;v++){const y=l[v];g.excludeCredentials[v]=Object.assign(Object.assign({},y),{id:Ss(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return g}function W0(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:r}=s,l=Cu(s,["challenge","allowCredentials"]),c=Ss(a).buffer,h=Object.assign(Object.assign({},l),{challenge:c});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Ss(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function F0(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Ti(new Uint8Array(s.response.attestationObject)),clientDataJSON:Ti(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function eb(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Ti(new Uint8Array(c.authenticatorData)),clientDataJSON:Ti(new Uint8Array(c.clientDataJSON)),signature:Ti(new Uint8Array(c.signature)),userHandle:c.userHandle?Ti(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function cg(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Cp(){var s,a;return!!(At()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function tb(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Tu("Browser returned unexpected credential type",a)}:{data:null,error:new Tu("Empty credential response",a)}}catch(a){return{data:null,error:X0({error:a,options:s})}}}async function nb(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Tu("Browser returned unexpected credential type",a)}:{data:null,error:new Tu("Empty credential response",a)}}catch(a){return{data:null,error:J0({error:a,options:s})}}}const ab={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ib={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Au(...s){const a=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),r=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of s)if(c)for(const h in c){const f=c[h];if(f!==void 0)if(Array.isArray(f))l[h]=f;else if(r(f))l[h]=f;else if(a(f)){const g=l[h];a(g)?l[h]=Au(g,f):l[h]=Au(f)}else l[h]=f}return l}function sb(s,a){return Au(ab,s,a||{})}function rb(s,a){return Au(ib,s,a||{})}class lb{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:l,signal:c},h){var f;try{const{data:g,error:v}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!g)return{data:null,error:v};const y=c??Z0.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:w}=g.webauthn.credential_options.publicKey;if(!w.name){const x=l;if(x)w.name=`${w.id}:${x}`;else{const C=(await this.client.getUser()).data.user,B=((f=C?.user_metadata)===null||f===void 0?void 0:f.name)||C?.email||C?.id||"User";w.name=`${w.id}:${B}`}}w.displayName||(w.displayName=w.name)}switch(g.webauthn.type){case"create":{const w=sb(g.webauthn.credential_options.publicKey,h?.create),{data:x,error:O}=await tb({publicKey:w,signal:y});return x?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:x}},error:null}:{data:null,error:O}}case"request":{const w=rb(g.webauthn.credential_options.publicKey,h?.request),{data:x,error:O}=await nb(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:w,signal:y}));return x?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:x}},error:null}:{data:null,error:O}}}}catch(g){return ae(g)?{data:null,error:g}:{data:null,error:new Ei("Unexpected error in challenge",g)}}}async _verify({challengeId:a,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},h){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn authentication")};try{if(!Cp())return{data:null,error:new Ei("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:l},signal:c},{request:h});if(!f)return{data:null,error:g};const{webauthn:v}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:v.type,rpId:r,rpOrigins:l,credential_response:v.credential_response}})}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new Ei("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},h){if(!r)return{data:null,error:new Ur("rpId is required for WebAuthn registration")};try{if(!Cp())return{data:null,error:new Ei("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(w=>{var x;return(x=w.data)===null||x===void 0?void 0:x.all.find(O=>O.factor_type==="webauthn"&&O.friendly_name===a&&O.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:g};const{data:v,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:c},{create:h});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:r,rpOrigins:l,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:y}}catch(f){return ae(f)?{data:null,error:f}:{data:null,error:new Ei("Unexpected error in register",f)}}}}V0();const ub={url:i0,storageKey:s0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Rp(s,a,r){return await r()}const gs={};class Dr{get jwks(){var a,r;return(r=(a=gs[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=gs[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){gs[this.storageKey]=Object.assign(Object.assign({},gs[this.storageKey]),{cachedAt:a})}constructor(a){var r,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},ub),a);if(this.storageKey=h.storageKey,this.instanceID=(r=Dr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Dr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&At()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new H0({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=lg(h.fetch),this.lock=h.lock||Rp,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&At()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=G0:this.lock=Rp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:rg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xp(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=xp(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ag}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},l="none";if(At()&&(r=b0(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),At()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),h0(h)){const v=(a=h.details)===null||a===void 0?void 0:a.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:g}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ae(r)?this._returnResult({error:r}):this._returnResult({error:new Ei("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,l,c;try{const h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:xn}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const v=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(h){if(ae(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var r,l,c;try{let h;if("email"in a){const{email:w,password:x,options:O}=a;let C=null,B=null;this.flowType==="pkce"&&([C,B]=await fs(this.storage,this.storageKey)),h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:w,password:x,data:(r=O?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:C,code_challenge_method:B},xform:xn})}else if("phone"in a){const{phone:w,password:x,options:O}=a;h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:x,data:(l=O?.data)!==null&&l!==void 0?l:{},channel:(c=O?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:xn})}else throw new cu("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await Tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const v=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(h){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let r;if("email"in a){const{email:h,password:f,options:g}=a;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:jp})}else if("phone"in a){const{phone:h,password:f,options:g}=a;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:jp})}else throw new cu("You must provide either an email or phone number and a password");const{data:l,error:c}=r;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new ds;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,l,c,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,l,c,h,f,g,v,y,w,x,O;let C,B;if("message"in a)C=a.message,B=a.signature;else{const{chain:V,wallet:Y,statement:K,options:X}=a;let Q;if(At())if(typeof Y=="object")Q=Y;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")Q=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!X?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=Y}const ie=new URL((r=X?.url)!==null&&r!==void 0?r:window.location.href),xe=await Q.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!xe||xe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const fe=og(xe[0]);let te=(l=X?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!te){const Z=await Q.request({method:"eth_chainId"});te=K0(Z)}const $e={domain:ie.host,address:fe,statement:K,uri:ie.href,version:"1",chainId:te,nonce:(c=X?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(h=X?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=X?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(v=X?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(y=X?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(w=X?.signInWithEthereum)===null||w===void 0?void 0:w.resources};C=Q0($e),B=await Q.request({method:"personal_sign",params:[Y0(C),fe]})}try{const{data:V,error:Y}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:B},!((x=a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(O=a.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:xn});if(Y)throw Y;if(!V||!V.session||!V.user){const K=new ds;return this._returnResult({data:{user:null,session:null},error:K})}return V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),this._returnResult({data:Object.assign({},V),error:Y})}catch(V){if(ae(V))return this._returnResult({data:{user:null,session:null},error:V});throw V}}async signInWithSolana(a){var r,l,c,h,f,g,v,y,w,x,O,C;let B,V;if("message"in a)B=a.message,V=a.signature;else{const{chain:Y,wallet:K,statement:X,options:Q}=a;let ie;if(At())if(typeof K=="object")ie=K;else{const fe=window;if("solana"in fe&&typeof fe.solana=="object"&&("signIn"in fe.solana&&typeof fe.solana.signIn=="function"||"signMessage"in fe.solana&&typeof fe.solana.signMessage=="function"))ie=fe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=K}const xe=new URL((r=Q?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ie&&ie.signIn){const fe=await ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Q?.signInWithSolana),{version:"1",domain:xe.host,uri:xe.href}),X?{statement:X}:null));let te;if(Array.isArray(fe)&&fe[0]&&typeof fe[0]=="object")te=fe[0];else if(fe&&typeof fe=="object"&&"signedMessage"in fe&&"signature"in fe)te=fe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)B=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),V=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ie)||typeof ie.signMessage!="function"||!("publicKey"in ie)||typeof ie!="object"||!ie.publicKey||!("toBase58"in ie.publicKey)||typeof ie.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");B=[`${xe.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...X?["",X,""]:[""],"Version: 1",`URI: ${xe.href}`,`Issued At: ${(c=(l=Q?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((h=Q?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${Q.signInWithSolana.notBefore}`]:[],...!((f=Q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${Q.signInWithSolana.expirationTime}`]:[],...!((g=Q?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${Q.signInWithSolana.chainId}`]:[],...!((v=Q?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${Q.signInWithSolana.nonce}`]:[],...!((y=Q?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${Q.signInWithSolana.requestId}`]:[],...!((x=(w=Q?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||x===void 0)&&x.length?["Resources",...Q.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const fe=await ie.signMessage(new TextEncoder().encode(B),"utf8");if(!fe||!(fe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");V=fe}}try{const{data:Y,error:K}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:B,signature:Ti(V)},!((O=a.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(C=a.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:xn});if(K)throw K;if(!Y||!Y.session||!Y.user){const X=new ds;return this._returnResult({data:{user:null,session:null},error:X})}return Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),this._returnResult({data:Object.assign({},Y),error:K})}catch(Y){if(ae(Y))return this._returnResult({data:{user:null,session:null},error:Y});throw Y}}async _exchangeCodeForSession(a){const r=await vi(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new d0;const{data:h,error:f}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:xn});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new ds;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:c??null}),error:f})}catch(h){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:r,provider:l,token:c,access_token:h,nonce:f}=a,g=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:xn}),{data:v,error:y}=g;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!v||!v.session||!v.user){const w=new ds;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:y})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,l,c,h,f;try{if("email"in a){const{email:g,options:v}=a;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await fs(this.storage,this.storageKey));const{error:x}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=v?.data)!==null&&r!==void 0?r:{},create_user:(l=v?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:w},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in a){const{phone:g,options:v}=a,{data:y,error:w}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(c=v?.data)!==null&&c!==void 0?c:{},create_user:(h=v?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(f=v?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:w})}throw new cu("You must provide either an email or phone number.")}catch(g){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(a){var r,l;try{let c,h;"options"in a&&(c=(r=a.options)===null||r===void 0?void 0:r.redirectTo,h=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:c,xform:xn});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,y=f.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(c){if(ae(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(a){var r,l,c,h,f;try{let g=null,v=null;this.flowType==="pkce"&&([g,v]=await fs(this.storage,this.storageKey));const y=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:v}),headers:this.headers,xform:q0});return!((h=y.data)===null||h===void 0)&&h.url&&At()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(g){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;if(l)throw l;if(!r)throw new rn;const{error:c}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(a){if(ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:l,type:c,options:h}=a,{error:f}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:l,type:c,options:h}=a,{data:f,error:g}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new cu("You must provide either an email or phone number and a type")}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await vi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<Pc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const f=await vi(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=Wc()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=U0(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:c,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(a){try{return a?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Ya}):await this._useSession(async r=>{var l,c,h;const{data:f,error:g}=r;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rn}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0,xform:Ya})})}catch(r){if(ae(r))return Zc(r)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async l=>{const{data:c,error:h}=l;if(h)throw h;if(!c.session)throw new rn;const f=c.session;let g=null,v=null;this.flowType==="pkce"&&a.email!=null&&([g,v]=await fs(this.storage,this.storageKey));const{data:y,error:w}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:v}),jwt:f.access_token,xform:Ya});if(w)throw w;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new rn;const r=Date.now()/1e3;let l=r,c=!0,h=null;const{payload:f}=du(a.access_token);if(f.exp&&(l=f.exp,c=l<=r),c){const{data:g,error:v}=await this._callRefreshToken(a.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:v}=await this._getUser(a.access_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});h={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var l;if(!a){const{data:f,error:g}=r;if(g)throw g;a=(l=f.session)!==null&&l!==void 0?l:void 0}if(!a?.refresh_token)throw new rn;const{data:c,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ae(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!At())throw new hu("No browser detected.");if(a.error||a.error_description||a.error_code)throw new hu(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new vp("No code detected.");const{data:X,error:Q}=await this._exchangeCodeForSession(a.code);if(Q)throw Q;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:X.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:h,refresh_token:f,expires_in:g,expires_at:v,token_type:y}=a;if(!h||!g||!f||!y)throw new hu("No session defined in URL");const w=Math.round(Date.now()/1e3),x=parseInt(g);let O=w+x;v&&(O=parseInt(v));const C=O-w;C*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${x}s`);const B=O-x;w-B>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",B,O,w):w-B<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",B,O,w);const{data:V,error:Y}=await this._getUser(h);if(Y)throw Y;const K={provider_token:l,provider_refresh_token:c,access_token:h,expires_in:x,expires_at:O,refresh_token:f,token_type:y,user:V.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:a.type},error:null})}catch(l){if(ae(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await vi(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:c,error:h}=r;if(h&&!Zc(h))return this._returnResult({error:h});const f=(l=c.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,a);if(g&&!(c0(g)&&(g.status===404||g.status===401||g.status===403)||Zc(g)))return this._returnResult({error:g})}return a!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=v0(),l={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async r=>{var l,c;try{const{data:{session:h},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,r={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await fs(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:l,error:c}=await this._useSession(async h=>{var f,g,v,y,w;const{data:x,error:O}=h;if(O)throw O;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(v=a.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",C,{headers:this.headers,jwt:(w=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&w!==void 0?w:void 0})});if(c)throw c;return At()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:a.provider,url:l?.url},error:null})}catch(l){if(ae(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var l;try{const{error:c,data:{session:h}}=r;if(c)throw c;const{options:f,provider:g,token:v,access_token:y,nonce:w}=a,x=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:v,access_token:y,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:xn}),{data:O,error:C}=x;return C?this._returnResult({data:{user:null,session:null},error:C}):!O||!O.session||!O.user?this._returnResult({data:{user:null,session:null},error:new ds}):(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("USER_UPDATED",O.session)),this._returnResult({data:O,error:C}))}catch(c){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ae(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var l,c;const{data:h,error:f}=r;if(f)throw f;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await E0(async c=>(c>0&&await w0(200*Math.pow(2,c-1)),this._debug(r,"refreshing attempt",c),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:xn})),(c,h)=>{const f=200*Math.pow(2,c);return h&&Ic(h)&&Date.now()+f-l<_s})}catch(l){if(this._debug(r,"error",l),ae(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",l),At()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await vi(this.storage,this.storageKey);if(c&&this.userStorage){let f=await vi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await vs(this.userStorage,this.storageKey+"-user",f)),c.user=(a=f?.user)!==null&&a!==void 0?a:Wc()}else if(c&&!c.user&&!c.user){const f=await vi(this.storage,this.storageKey+"-user");f&&f?.user?(c.user=f.user,await Tt(this.storage,this.storageKey+"-user"),await vs(this.storage,this.storageKey,c)):c.user=Wc()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const h=((r=c.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pc;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${Pc}s`),h){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Ic(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(c.access_token);!g&&f?.user?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var r,l;if(!a)throw new rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new ku;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new rn;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(c,"error",h),ae(h)){const f={data:null,error:h};return Ic(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,r,l=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,r)}catch(v){h.push(v)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await Tt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},a),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await vs(this.userStorage,this.storageKey+"-user",{user:r.user});const c=Object.assign({},r);delete c.user;const h=Tp(c);await vs(this.storage,this.storageKey,h)}else{const c=Tp(r);await vs(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&At()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-a)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${_s}ms, refresh threshold is ${fh} ticks`),c<=fh&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof ug)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(a){this._debug("#visibilityChangedCallback","error",a)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,l){const c=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,f]=await fs(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(g.toString())}if(l?.queryParams){const h=new URLSearchParams(l.queryParams);c.push(h.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var l;const{data:c,error:h}=r;return h?this._returnResult({data:null,error:h}):await oe(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var l,c;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:v,error:y}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});return y?this._returnResult({data:null,error:y}):(a.factorType==="totp"&&v.type==="totp"&&(!((c=v?.totp)===null||c===void 0)&&c.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?F0(a.webauthn.credential_response):eb(a.webauthn.credential_response)})}:{code:a.code}),{data:g,error:v}=await oe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:v}))})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await oe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:I0(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:W0(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=r?.factors)!==null&&a!==void 0?a:[])c.all.push(h),h.status==="verified"&&c[h.factor_type].push(h);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(a){var r,l,c,h;if(a)try{const{payload:C}=du(a);let B=null;C.aal&&(B=C.aal);let V=B;const{data:{user:Y},error:K}=await this.getUser(a);if(K)return this._returnResult({data:null,error:K});((l=(r=Y?.factors)===null||r===void 0?void 0:r.filter(ie=>ie.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(V="aal2");const Q=C.amr||[];return{data:{currentLevel:B,nextLevel:V,currentAuthenticationMethods:Q},error:null}}catch(C){if(ae(C))return this._returnResult({data:null,error:C});throw C}const{data:{session:f},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:v}=du(f.access_token);let y=null;v.aal&&(y=v.aal);let w=y;((h=(c=f.user.factors)===null||c===void 0?void 0:c.filter(C=>C.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(w="aal2");const O=v.amr||[];return{data:{currentLevel:y,nextLevel:w,currentAuthenticationMethods:O},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:l},error:c}=r;return c?this._returnResult({data:null,error:c}):l?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new rn})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:c},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!c)return this._returnResult({data:null,error:new rn});const f=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&At()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ae(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,r){try{return await this._useSession(async l=>{const{data:{session:c},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!c)return this._returnResult({data:null,error:new rn});const f=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&At()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(ae(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;return l?this._returnResult({data:null,error:l}):r?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new rn})})}catch(a){if(ae(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async r=>{const{data:{session:l},error:c}=r;return c?this._returnResult({data:null,error:c}):l?(await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new rn})})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(a,r={keys:[]}){let l=r.keys.find(g=>g.kid===a);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(g=>g.kid===a),l&&this.jwks_cached_at+u0>c)return l;const{data:h,error:f}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=c,l=h.keys.find(g=>g.kid===a),!l)?null:l}async getClaims(a,r={}){try{let l=a;if(!l){const{data:C,error:B}=await this.getSession();if(B||!C.session)return this._returnResult({data:null,error:B});l=C.session.access_token}const{header:c,payload:h,signature:f,raw:{header:g,payload:v}}=du(l);r?.allowExpired||R0(h.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:C}=await this.getUser(l);if(C)throw C;return{data:{claims:h,header:c,signature:f},error:null}}const w=N0(c.alg),x=await crypto.subtle.importKey("jwk",y,w,!0,["verify"]);if(!await crypto.subtle.verify(w,x,f,y0(`${g}.${v}`)))throw new gh("Invalid JWT signature");return{data:{claims:h,header:c,signature:f},error:null}}catch(l){if(ae(l))return this._returnResult({data:null,error:l});throw l}}}Dr.nextInstanceID={};const ob=Dr,cb="2.95.3";let jr="";typeof Deno<"u"?jr="deno":typeof document<"u"?jr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jr="react-native":jr="node";const hb={"X-Client-Info":`supabase-js-${jr}/${cb}`},db={headers:hb},fb={schema:"public"},mb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pb={};function Mr(s){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Mr(s)}function gb(s,a){if(Mr(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,a);if(Mr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function yb(s){var a=gb(s,"string");return Mr(a)=="symbol"?a:a+""}function _b(s,a,r){return(a=yb(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r,s}function Np(s,a){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function nt(s){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Np(Object(r),!0).forEach(function(l){_b(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Np(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const vb=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),bb=()=>Headers,Sb=(s,a,r)=>{const l=vb(r),c=bb();return async(h,f)=>{var g;const v=(g=await a())!==null&&g!==void 0?g:s;let y=new c(f?.headers);return y.has("apikey")||y.set("apikey",s),y.has("Authorization")||y.set("Authorization",`Bearer ${v}`),l(h,nt(nt({},f),{},{headers:y}))}};function wb(s){return s.endsWith("/")?s:s+"/"}function Eb(s,a){var r,l;const{db:c,auth:h,realtime:f,global:g}=s,{db:v,auth:y,realtime:w,global:x}=a,O={db:nt(nt({},v),c),auth:nt(nt({},y),h),realtime:nt(nt({},w),f),storage:{},global:nt(nt(nt({},x),g),{},{headers:nt(nt({},(r=x?.headers)!==null&&r!==void 0?r:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?O.accessToken=s.accessToken:delete O.accessToken,O}function Tb(s){const a=s?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wb(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ab=class extends ob{constructor(s){super(s)}},jb=class{constructor(s,a,r){var l,c;this.supabaseUrl=s,this.supabaseKey=a;const h=Tb(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:fb,realtime:pb,auth:nt(nt({},mb),{},{storageKey:f}),global:db},v=Eb(r??{},g);if(this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(w,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=v.auth)!==null&&y!==void 0?y:{},this.headers,v.global.fetch)}this.fetch=Sb(a,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new cv(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch,timeout:v.db.timeout,urlLengthLimit:v.db.urlLengthLimit}),this.storage=new a0(this.storageUrl.href,this.headers,this.fetch,r?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new nv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,r)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,r;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:l,userStorage:c,storageKey:h,flowType:f,lock:g,debug:v,throwOnError:y},w,x){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ab({url:this.authUrl.href,headers:nt(nt({},O),w),storageKey:h,autoRefreshToken:s,persistSession:a,detectSessionInUrl:r,storage:l,userStorage:c,flowType:f,lock:g,debug:v,throwOnError:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Ov(this.realtimeUrl.href,nt(nt({},s),{},{params:nt(nt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(s,a,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ob=(s,a,r)=>new jb(s,a,r);function xb(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const a=s.version;if(a==null)return!1;const r=a.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}xb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ju="https://lahtdxvbcscinoxyyjgw.supabase.co".trim()??"",Ou="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxhaHRkeHZiY3NjaW5veHl5amd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4NTI3ODAsImV4cCI6MjA4NjQyODc4MH0.xk-cckHYE5hNWHCnPwRtDBonkui1ivmSxxNONC72ka0".trim()??"",hg="sales_margin_state".trim()||"sales_margin_state",Xa="huawei-sales-margin-tracker-prod".trim()||"default-store",dg="sales_margin_messages",fg="sales_margin_push_subscriptions",kp=ju?`${ju}/functions/v1/chat-push-notify`:"",mg="BGB8Qmwq6F9mCBsf_nAk7bAjm5wjUSFP9BvyAVJJAPeF7DJGr4ZixAvDWyI-W-aXhmiijfZcOxsEDPkDQ9SHWI0".trim()??"",pg=ju.length>0&&Ou.length>0,Cb=mg,Rb=mg.length>0;let eh=null;const Es=()=>{if(!pg)throw new Error("Supabase non configure (VITE_SUPABASE_URL / VITE_SUPABASE_ANON_KEY).");return eh||(eh=Ob(ju,Ou,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},global:{headers:{"x-store-id":Xa}}})),eh},Nb=s=>{if(!s||typeof s!="object")return!1;const a=s;return typeof a.generated_at=="string"&&Array.isArray(a.sales)&&Array.isArray(a.catalog)&&!!a.stock&&typeof a.stock=="object"},kb=async()=>{const s=Es(),{data:a,error:r}=await s.from(hg).select("id,payload,updated_at").eq("id",Xa).maybeSingle();if(r)throw new Error(r.message);if(!a)return null;if(!Nb(a.payload))throw new Error("Payload cloud invalide.");return a.payload},th=async s=>{const a=Es(),{data:r,error:l}=await a.from(hg).upsert({id:Xa,payload:s},{onConflict:"id"}).select("updated_at").single();if(l)throw new Error(l.message);return r.updated_at},Up=async(s=150)=>{const a=Es(),{data:r,error:l}=await a.from(dg).select("id,store_id,author,body,device_id,created_at").eq("store_id",Xa).order("created_at",{ascending:!0}).limit(s).returns();if(l)throw new Error(l.message);return(r??[]).map(c=>({id:c.id,store_id:c.store_id,author:c.author,body:c.body,device_id:c.device_id,created_at:c.created_at}))},Ub=async s=>{const a=s.author.trim(),r=s.body.trim();if(a.length===0||r.length===0)throw new Error("Nom et message requis.");const l=Es(),{data:c,error:h}=await l.from(dg).insert({store_id:Xa,author:a.slice(0,60),body:r.slice(0,4e3),device_id:s.device_id.trim().slice(0,80)}).select("id,store_id,author,body,device_id,created_at").single();if(h)throw new Error(h.message);return{id:c.id,store_id:c.store_id,author:c.author,body:c.body,device_id:c.device_id,created_at:c.created_at}},Db=async s=>{const a=s.endpoint.trim();if(!a)throw new Error("Endpoint push invalide.");const r=Es(),{error:l}=await r.from(fg).upsert({store_id:Xa,device_id:s.device_id.trim().slice(0,80),endpoint:a,p256dh:s.p256dh,auth:s.auth,user_agent:s.user_agent?.slice(0,255)??null,enabled:!0},{onConflict:"store_id,device_id,endpoint",ignoreDuplicates:!1});if(l)throw new Error(l.message)},Mb=async s=>{const a=Es(),{error:r}=await a.from(fg).delete().eq("store_id",Xa).eq("endpoint",s);if(r)throw new Error(r.message)},Dp=async s=>{if(!kp)throw new Error("URL fonction push non configuree.");const a=await fetch(kp,{method:"POST",headers:{"content-type":"application/json",apikey:Ou,authorization:`Bearer ${Ou}`,"x-store-id":Xa},body:JSON.stringify(s)});if(!a.ok){const r=await a.text();throw new Error(`Push HTTP ${a.status}: ${r}`)}},fu=["Sun.store","Solartraders","Direct","Other"],mu=["Inverters","Solar Panels","Batteries","Accessories"],Mp=["Stripe","Wire","PayPal","Cash"],zp=["Albanie","Allemagne","Andorre","Armenie","Autriche","Azerbaidjan","Belgique","Bielorussie","Bosnie-Herzegovine","Bulgarie","Chypre","Croatie","Danemark","Espagne","Estonie","Finlande","France","Georgie","Grece","Hongrie","Irlande","Islande","Italie","Kosovo","Lettonie","Liechtenstein","Lituanie","Luxembourg","Macedoine du Nord","Malte","Moldavie","Monaco","Montenegro","Norvege","Pays-Bas","Pologne","Portugal","Republique tcheque","Roumanie","Royaume-Uni","Russie","Saint-Marin","Serbie","Slovaquie","Slovenie","Suede","Suisse","Turquie","Ukraine","Vatican"],gg="sales_margin_tracker_theme_v1",yg="France",zb=.2,qb=5,xu="",Lb="__hr",pu="sales_margin_tracker_chat_author_v1",qp="sales_margin_tracker_chat_device_id_v1",Lp="sales_margin_tracker_chat_last_seen_v1",Bb=5e3,Bp=/(?:^|\s)@([A-Za-z0-9._/-]*)$/,Hb=/(@[A-Za-z0-9][A-Za-z0-9._/-]*)/g,$b=/(\d{2,5})(?:\s*)W(?:P)?\b/i,Gb={Albanie:"AL",Allemagne:"DE",Andorre:"AD",Armenie:"AM",Autriche:"AT",Azerbaidjan:"AZ",Belgique:"BE",Bielorussie:"BY","Bosnie-Herzegovine":"BA",Bulgarie:"BG",Chypre:"CY",Croatie:"HR",Danemark:"DK",Espagne:"ES",Estonie:"EE",Finlande:"FI",France:"FR",Georgie:"GE",Grece:"GR",Hongrie:"HU",Irlande:"IE",Islande:"IS",Italie:"IT",Kosovo:"XK",Lettonie:"LV",Liechtenstein:"LI",Lituanie:"LT",Luxembourg:"LU","Macedoine du Nord":"MK",Malte:"MT",Moldavie:"MD",Monaco:"MC",Montenegro:"ME",Norvege:"NO","Pays-Bas":"NL",Pologne:"PL",Portugal:"PT","Republique tcheque":"CZ",Roumanie:"RO","Royaume-Uni":"GB",Russie:"RU","Saint-Marin":"SM",Serbie:"RS",Slovaquie:"SK",Slovenie:"SI",Suede:"SE",Suisse:"CH",Turquie:"TR",Ukraine:"UA",Vatican:"VA"},Vb={channel:"All",category:"All",date_from:"",date_to:"",query:"",stock_status:"all"},Su=s=>s.toISOString().slice(0,10),gu=()=>({date:Su(new Date),client_or_tx:"",transaction_ref:"",channel:"Sun.store",customer_country:xu,product_ref:"",quantity:1,sell_price_unit_ht:0,sell_price_unit_ttc:null,shipping_charged:0,shipping_charged_ttc:null,shipping_real:0,shipping_real_ttc:null,payment_method:"Wire",category:"Inverters",buy_price_unit:0,power_wp:null,attachments:[]}),Se=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:2}).format(Number.isFinite(s)?s:0),yu=s=>`${ve(s)}%`,bi=s=>{const a=new Date(s);return Number.isNaN(a.getTime())?s:new Intl.DateTimeFormat("fr-FR",{dateStyle:"short",timeStyle:"medium"}).format(a)},Hp=s=>{if(!s)return 0;const a=Date.parse(s);return Number.isFinite(a)?a:0},Ar=(s,a)=>{const r=s.trim();if(!r)return null;const l=r.match($b);if(!l)return null;const c=Number(l[1]),h=Math.max(0,Number(a));return!Number.isFinite(c)||c<=0||!Number.isFinite(h)||h<=0?null:ve(c*h)},_u=(s,a)=>{if(a.length===0)return[];const r=ve(Number.isFinite(s)?s:0),l=Math.round(r*100);if(l===0)return a.map(()=>0);const c=a.map(O=>O>0?O:0),f=c.reduce((O,C)=>O+C,0)>0?c:a.map(()=>1),g=f.reduce((O,C)=>O+C,0),v=f.map(O=>l*O/g),y=v.map(O=>Math.floor(O));let w=l-y.reduce((O,C)=>O+C,0);const x=v.map((O,C)=>({index:C,remainder:O-y[C]})).sort((O,C)=>C.remainder-O.remainder);for(let O=0;O<x.length&&w>0;O+=1)y[x[O].index]+=1,w-=1;return y.map(O=>ve(O/100))},nh=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`sale-${Date.now()}-${Math.random().toString(36).slice(2)}`,ah=(s,a,r)=>{const l=new Date().toISOString();return{id:s,...a,...Ai(a),created_at:r??l,updated_at:l}},$p=s=>new Promise((a,r)=>{const l=new FileReader;l.onload=()=>{const c=typeof l.result=="string"?l.result:"",h=c.includes(",")?c.split(",")[1]:c;a({id:`${s.name}-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,name:s.name,size:s.size,mime:s.type||"application/octet-stream",base64:h})},l.onerror=()=>r(new Error("Lecture de fichier impossible.")),l.readAsDataURL(s)}),vu=s=>{const a=document.createElement("a");a.href=`data:${s.mime};base64,${s.base64}`,a.download=s.name,document.body.appendChild(a),a.click(),document.body.removeChild(a)},Kb=(s,a)=>{const r=atob(s),l=new Uint8Array(r.length);for(let c=0;c<r.length;c+=1)l[c]=r.charCodeAt(c);return new Blob([l],{type:a||"application/octet-stream"})},Yb=s=>{const a=`${s}`.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-a.length%4)%4),l=a+r,c=atob(l),h=new Uint8Array(c.length);for(let f=0;f<c.length;f+=1)h[f]=c.charCodeAt(f);return h.buffer},Gp=s=>s.mime==="application/pdf"||s.name.toLowerCase().endsWith(".pdf"),Vp=s=>s.mime.startsWith("image/"),$n=s=>{const a=Number(s);return Number.isFinite(a)?a:0},ih=s=>{if(s.trim()==="")return null;const a=Number(s);return Number.isFinite(a)?a:null},Qa=s=>{if(s==null||s==="")return null;const a=Number(s);return Number.isFinite(a)?a:null},mt=s=>s===yg,tt=s=>ve(s*(1+zb)),Qb=s=>{const a=s.trim().toUpperCase();return/^[A-Z]{2}$/.test(a)?String.fromCodePoint(...Array.from(a).map(r=>127397+r.charCodeAt(0))):""},sh=s=>{const a=Gb[s];return a?Qb(a):""},bu=s=>typeof s.customer_country=="string"&&s.customer_country.length>0?s.customer_country:Qa(s.sell_price_unit_ttc)!==null||Qa(s.shipping_charged_ttc)!==null||Qa(s.shipping_real_ttc)!==null?yg:xu,Xb=s=>{const a=s.filter((c,h)=>s.indexOf(c)===h);if(a.length===0)return"-";if(a.length===1)return`1 ref: ${a[0]}`;const r=a.slice(0,2).join(" + "),l=a.length-2;return l>0?`${a.length} refs: ${r} +${l}`:`${a.length} refs: ${r}`},yh=s=>({...s,transaction_ref:typeof s.transaction_ref=="string"?s.transaction_ref:"",customer_country:bu(s),sell_price_unit_ttc:mt(bu(s))?tt(s.sell_price_unit_ht):Qa(s.sell_price_unit_ttc),shipping_charged_ttc:mt(bu(s))?tt(s.shipping_charged):Qa(s.shipping_charged_ttc),shipping_real_ttc:mt(bu(s))?tt(s.shipping_real):Qa(s.shipping_real_ttc)}),Jb=()=>{const s=Yt(jt.sales,[]);if(s.length>0)return s.map(r=>{const l=yh(r);return{...r,...l,...Ai(l)}});const a=Yt(jt.backup,null);return a&&Array.isArray(a.sales)&&a.sales.length>0?a.sales.map(r=>{const l=yh(r);return{...r,...l,...Ai(l)}}):W_()},Pb=()=>{const s=wu(Yt(jt.catalog,[]));if(s.length>0)return s;const a=Yt(jt.backup,null);return a&&Array.isArray(a.catalog)&&a.catalog.length>0?wu(a.catalog):[]},Zb=()=>{const s=Yt(jt.stock,{});if(Object.keys(s).length>0)return s;const a=Yt(jt.backup,null);return a&&a.stock&&typeof a.stock=="object"?a.stock:{}},Ib=()=>{const s=Yt(jt.backup,null);return s&&typeof s.generated_at=="string"&&s.generated_at.length>0?s.generated_at:null},Wb=()=>Yt(gg,null)==="light"?"light":"dark",Kp={danger:{icon:"!",subtitle:"Action irreversible. Verifiez avant de continuer."},warn:{icon:"!",subtitle:"Veuillez confirmer cette operation."}};function Fb(){const s=pg,[a,r]=P.useState("dashboard"),[l,c]=P.useState(()=>Wb()),[h,f]=P.useState(()=>Pb()),[g,v]=P.useState(()=>Jb()),[y,w]=P.useState(()=>Zb()),[x,O]=P.useState(()=>Ib()),[C,B]=P.useState(()=>!s),[V,Y]=P.useState(()=>s?"Supabase: initialisation...":"Supabase: non configure (mode local)"),[K,X]=P.useState(Vb),[Q,ie]=P.useState(""),[xe,fe]=P.useState(!1),[te,$e]=P.useState("All"),[Z,st]=P.useState(()=>gu()),[Mt,pt]=P.useState(null),[Gn,Qt]=P.useState(!1),[Xt,q]=P.useState(!1),[M,ne]=P.useState(null),[pe,De]=P.useState(null),[A,$]=P.useState(""),[J,I]=P.useState(null),[he,be]=P.useState(()=>Yt(pu,"")),[Re,ht]=P.useState(()=>Yt(pu,"")),[Ge,ca]=P.useState(()=>Yt(pu,"").trim().length<2),[zt,ji]=P.useState([]),[Ja,bn]=P.useState(""),[un,Pa]=P.useState(!1),[qr,Ts]=P.useState(0),[Nn,As]=P.useState(()=>Yt(Lp,"")),[js,Lr]=P.useState(!1),[Br,Ot]=P.useState(!1),[Oi,Vn]=P.useState(!1),[Za,Jt]=P.useState(!1),[kn]=P.useState(()=>{const p=Yt(qp,"");if(p)return p;const b=nh();return sn(qp,b),b}),[Hr,xi]=P.useState("Sync catalogue en attente..."),[Ci,de]=P.useState(""),[gt,Ze]=P.useState(""),xt=P.useRef(null),$r=P.useRef(null),Ia=P.useRef(null),Gr=P.useRef(!1),Un=P.useRef(new Set),on=P.useMemo(()=>{const p=new Map;for(const b of h)p.set(b.ref,b);return p},[h]),Ri=P.useMemo(()=>{const p=new Map;for(const b of h)p.set(b.ref.toUpperCase(),b.ref);return p},[h]),Dn=P.useMemo(()=>[...h].sort((p,b)=>p.ref.localeCompare(b.ref)),[h]),Mn=P.useMemo(()=>[...h].sort((p,b)=>(p.order??9999)-(b.order??9999)),[h]),Kn=P.useMemo(()=>{const p=Ja.match(Bp);return p?p[1]??"":null},[Ja]),Vr=P.useMemo(()=>{if(Kn===null)return[];const p=Kn.toUpperCase(),b=Mn.map(G=>G.ref);if(!p)return b;const E=b.filter(G=>G.toUpperCase().startsWith(p)),D=b.filter(G=>!G.toUpperCase().startsWith(p)&&G.toUpperCase().includes(p));return[...E,...D]},[Kn,Mn]),ha=s&&Rb&&typeof window<"u"&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window,Yn=P.useCallback(async()=>{if(!("serviceWorker"in navigator))throw new Error("Service worker indisponible.");const p="/huawei-sales-margin-tracker/sw.js";let b=await navigator.serviceWorker.getRegistration();if(b||(b=await navigator.serviceWorker.register(p)),b.active)return b;const E=4e3,D=new Promise((G,F)=>{window.setTimeout(()=>F(new Error("Service worker pas pret. Recharge la page.")),E)});return await Promise.race([navigator.serviceWorker.ready,D])},[]),da=P.useCallback(async()=>{if(!ha){Vn(!1);return}try{const b=await(await Yn()).pushManager.getSubscription();Vn(!!b)}catch{Vn(!1)}},[ha,Yn]);P.useEffect(()=>{let p=!1;return(async()=>{xi("Sync catalogue distant...");try{const E=await q_();if(p)return;if(E.length===0){xi("Catalogue distant vide. Catalogue local conserve.");return}f(wu(E)),xi(`Catalogue sync OK: ${E.length} references.`)}catch(E){p||xi(`Echec import distant: ${String(E.message)}`)}})(),()=>{p=!0}},[]),P.useEffect(()=>{if(!s)return;let p=!1;return(async()=>{Y("Supabase: lecture du backup cloud...");try{const E=Yt(jt.backup,null),D=await kb();if(p)return;if(D){const G=Hp(D.generated_at),F=Hp(E?.generated_at);if(!E||G>F){const le=D.sales.map(hn=>{const Zt=yh(hn);return{...hn,...Zt,...Ai(Zt)}}),We=wu(D.catalog),Je=D.stock&&typeof D.stock=="object"?D.stock:lp(We,le);v(le),f(We),w(Je),sn(jt.sales,le),sn(jt.catalog,We),sn(jt.stock,Je),sn(jt.backup,D),O(D.generated_at),Ze("Donnees Supabase restaurees."),Y(`Supabase: backup cloud charge (${bi(D.generated_at)})`)}else{const le=await th(E);p||Y(`Supabase: cloud aligne (${bi(le)})`)}}else if(E){const G=await th(E);p||Y(`Supabase: backup local publie (${bi(G)})`)}else Y("Supabase: aucun backup detecte.")}catch(E){p||Y(`Supabase: erreur (${String(E.message)})`)}finally{p||B(!0)}})(),()=>{p=!0}},[s]),P.useEffect(()=>{w(lp(h,g))},[h,g]),P.useEffect(()=>{sn(jt.sales,g)},[g]),P.useEffect(()=>{sn(jt.catalog,h)},[h]),P.useEffect(()=>{sn(jt.stock,y)},[y]),P.useEffect(()=>{sn(gg,l)},[l]),P.useEffect(()=>{if(!gt)return;const p=window.setTimeout(()=>Ze(""),4e3);return()=>window.clearTimeout(p)},[gt]),P.useEffect(()=>{if(!Ci)return;const p=window.setTimeout(()=>de(""),6e3);return()=>window.clearTimeout(p)},[Ci]),P.useEffect(()=>{if(!pe){$("");return}const p=Kb(pe.base64,pe.mime),b=URL.createObjectURL(p);return $(b),()=>{URL.revokeObjectURL(b)}},[pe]),P.useEffect(()=>{sn(pu,he.trim())},[he]),P.useEffect(()=>{if(!s)return;let p=!1;const b=async(D=!0)=>{D||Lr(!0);try{const G=await Up();p||ji(G)}catch(G){p||de(`Messagerie indisponible: ${String(G.message)}`)}finally{!p&&!D&&Lr(!1)}};b(!1);const E=window.setInterval(()=>{b(!0)},Bb);return()=>{p=!0,window.clearInterval(E)}},[s]),P.useEffect(()=>{if(!un)return;const p=xt.current;p&&(p.scrollTop=p.scrollHeight)},[un,zt]),P.useEffect(()=>{un&&da()},[un,da]),P.useEffect(()=>{sn(Lp,Nn)},[Nn]),P.useEffect(()=>{if(un){const b=zt.at(-1)?.created_at??"";b&&b!==Nn&&As(b),Ts(0);return}const p=zt.filter(b=>b.device_id===kn?!1:Nn?b.created_at>Nn:!0).length;Ts(p)},[zt,un,kn,Nn]);const Os=P.useCallback(async()=>{if(typeof window>"u")return null;const p=window.AudioContext||window.webkitAudioContext;if(!p)return null;if(Ia.current||(Ia.current=new p),Ia.current.state==="suspended")try{await Ia.current.resume()}catch{return null}return Ia.current},[]),Wa=P.useCallback(async()=>{const p=await Os();if(!p)return;const b=p.currentTime,E=[0,.14];for(const D of E){const G=p.createOscillator(),F=p.createGain();G.type="sine",G.frequency.setValueAtTime(880,b+D),F.gain.setValueAtTime(1e-4,b+D),F.gain.exponentialRampToValueAtTime(.12,b+D+.01),F.gain.exponentialRampToValueAtTime(1e-4,b+D+.11),G.connect(F),F.connect(p.destination),G.start(b+D),G.stop(b+D+.12)}},[Os]);P.useEffect(()=>{if(typeof window>"u"||!("serviceWorker"in navigator))return;const p=b=>{const E=b.data;!E||E.type!=="SM_PUSH_DEBUG"||(Ze(E.title?`Push recu: ${E.title}`:"Push recu."),Wa())};return navigator.serviceWorker.addEventListener("message",p),()=>{navigator.serviceWorker.removeEventListener("message",p)}},[Wa]),P.useEffect(()=>{const p=zt.filter(E=>E.device_id!==kn);if(!Gr.current){Un.current=new Set(p.map(E=>E.id)),Gr.current=!0;return}const b=p.filter(E=>!Un.current.has(E.id));if(b.length!==0){for(const E of b)Un.current.add(E.id);if(Un.current.size>500){const E=p.slice(-300).map(D=>D.id);Un.current=new Set(E)}Wa(),typeof navigator<"u"&&"vibrate"in navigator&&navigator.vibrate([120,80,120])}},[zt,kn,Wa]),P.useEffect(()=>{const p=Qc(g,h,y);sn(jt.backup,p),O(p.generated_at)},[g,h,y]),P.useEffect(()=>{if(!s||!C)return;const p=Qc(g,h,y),b=window.setTimeout(()=>{(async()=>{try{const E=await th(p);Y(`Supabase: sync auto OK (${bi(E)})`)}catch(E){Y(`Supabase: sync auto KO (${String(E.message)})`)}})()},1200);return()=>{window.clearTimeout(b)}},[s,C,g,h,y]);const cn=P.useMemo(()=>Mt?g.find(p=>p.id===Mt)??null:null,[Mt,g]),Fa=P.useMemo(()=>{const p=K.query.trim().toLowerCase();return g.filter(b=>{if(K.channel!=="All"&&b.channel!==K.channel||K.category!=="All"&&b.category!==K.category||K.date_from&&b.date<K.date_from||K.date_to&&b.date>K.date_to||p&&!b.client_or_tx.toLowerCase().includes(p)&&!b.transaction_ref.toLowerCase().includes(p)&&!b.product_ref.toLowerCase().includes(p))return!1;if(K.stock_status!=="all"){const E=y[b.product_ref];return E===void 0?!1:K.stock_status==="low"?E>0&&E<=yi:E<=0}return!0})},[K,g,y]),qt=P.useMemo(()=>{const p=new Map;for(const b of Fa){const E=`${b.date}::${b.client_or_tx}::${b.transaction_ref}::${b.channel}`,D=p.get(E);if(!D){const F=y[b.product_ref],se=new Set,le=new Set;F!==void 0&&(F<=0?le.add(b.product_ref):F<=yi&&se.add(b.product_ref)),p.set(E,{date:b.date,client_or_tx:b.client_or_tx,transaction_ref:b.transaction_ref,customer_country:b.customer_country,channel:b.channel,refs:new Set([b.product_ref]),low_stock_refs:se,out_stock_refs:le,quantity:b.quantity,weighted_sell_unit_total:b.sell_price_unit_ht*b.quantity,sell_total_ht:b.sell_total_ht,transaction_value:b.transaction_value,commission_eur:b.commission_eur,payment_fee_sum:b.payment_fee,net_received:b.net_received,net_margin:b.net_margin,attachments_count:b.attachments.length,first_sale:b});continue}D.refs.add(b.product_ref);const G=y[b.product_ref];G!==void 0&&(G<=0?D.out_stock_refs.add(b.product_ref):G<=yi&&D.low_stock_refs.add(b.product_ref)),D.quantity+=b.quantity,D.weighted_sell_unit_total+=b.sell_price_unit_ht*b.quantity,D.sell_total_ht+=b.sell_total_ht,D.transaction_value+=b.transaction_value,D.commission_eur+=b.commission_eur,D.payment_fee_sum+=b.payment_fee,D.net_received+=b.net_received,D.net_margin+=b.net_margin,D.attachments_count+=b.attachments.length}return Array.from(p.entries()).map(([b,E])=>{const D=Array.from(E.refs),G=D.length,F=Xb(D),se=E.quantity>0?ve(E.weighted_sell_unit_total/E.quantity):0,le=E.payment_fee_sum>0&&E.channel==="Sun.store"?qb:0,We=E.payment_fee_sum-le,Je=ve(E.net_received+We),hn=ve(E.net_margin+We),Zt=E.transaction_value>0?ve(hn/E.transaction_value*100):0;return{key:b,date:E.date,client_or_tx:E.client_or_tx,transaction_ref:E.transaction_ref,customer_country:E.customer_country,channel:E.channel,refs_count:G,product_display:F,low_stock_refs:Array.from(E.low_stock_refs).sort((kt,ye)=>kt.localeCompare(ye)),out_stock_refs:Array.from(E.out_stock_refs).sort((kt,ye)=>kt.localeCompare(ye)),quantity:E.quantity,sell_price_unit_ht:se,sell_total_ht:ve(E.sell_total_ht),transaction_value:ve(E.transaction_value),commission_eur:ve(E.commission_eur),payment_fee:ve(le),net_received:Je,net_margin:hn,net_margin_pct:Zt,attachments_count:E.attachments_count,first_sale:E.first_sale}}).sort((b,E)=>{if(b.date!==E.date)return E.date.localeCompare(b.date);const D=b.client_or_tx.localeCompare(E.client_or_tx);return D!==0?D:b.transaction_ref.localeCompare(E.transaction_ref)})},[Fa,y]),_t=P.useMemo(()=>{const p=qt.reduce((se,le)=>se+le.transaction_value,0),b=qt.reduce((se,le)=>se+le.net_margin,0),E=qt.reduce((se,le)=>se+le.commission_eur,0),D=qt.reduce((se,le)=>se+le.payment_fee,0),G=qt.reduce((se,le)=>se+le.quantity,0),F=fu.map(se=>{const le=qt.filter(We=>We.channel===se);return{channel:se,count:le.length,revenue:le.reduce((We,Je)=>We+Je.transaction_value,0),netMargin:le.reduce((We,Je)=>We+Je.net_margin,0),commissions:le.reduce((We,Je)=>We+Je.commission_eur,0)}});return{totalRevenue:ve(p),totalNetMargin:ve(b),avgNetMarginPct:p>0?ve(b/p*100):0,salesCount:qt.length,totalMaterialsSold:G,totalCommissions:ve(E),totalPlatformFees:ve(D),breakdown:F}},[qt]),xs=P.useMemo(()=>{const p=new Map;for(const b of Fa){const E=p.get(b.product_ref)??{revenue:0,qty:0};p.set(b.product_ref,{revenue:E.revenue+b.transaction_value,qty:E.qty+b.quantity})}return Array.from(p.entries()).map(([b,E])=>({product:b,...E})).sort((b,E)=>E.revenue-b.revenue).slice(0,5)},[Fa]),fa=P.useMemo(()=>{const p=Q.trim().toLowerCase();return Mn.map(b=>{const E=y[b.ref]??b.initial_stock,D=E<=0?"RUPTURE":E<=yi?"FAIBLE":"OK";return{...b,currentStock:E,status:D}}).filter(b=>te!=="All"&&b.category!==te||xe&&b.currentStock>yi?!1:p?b.ref.toLowerCase().includes(p)||b.category.toLowerCase().includes(p):!0)},[Mn,y,Q,xe,te]),Sn=P.useMemo(()=>fa.filter(p=>p.currentStock<=yi).slice(0,6),[fa]),Ie=P.useMemo(()=>on.get(Z.product_ref.trim())??null,[on,Z.product_ref]),Te=P.useMemo(()=>mt(Z.customer_country),[Z.customer_country]),ma=P.useMemo(()=>Te?tt(Z.sell_price_unit_ht):null,[Te,Z.sell_price_unit_ht]),Cs=P.useMemo(()=>Te?tt(Z.shipping_charged):null,[Te,Z.shipping_charged]),Uu=P.useMemo(()=>Te?tt(Z.shipping_real):null,[Te,Z.shipping_real]),Pt=P.useMemo(()=>Ai(Z),[Z]),wn=P.useMemo(()=>{if(!M)return null;const p=M.lines.map(D=>{const G=ve(D.quantity*D.sell_price_unit_ht);return G>0?G:Math.max(1,D.quantity)}),b=_u(M.shipping_charged_order,p),E=_u(M.shipping_real_order,p);return M.lines.reduce((D,G,F)=>{const se={date:M.date,client_or_tx:M.client_or_tx,transaction_ref:M.transaction_ref,channel:M.channel,customer_country:M.customer_country,product_ref:G.product_ref.trim(),quantity:G.quantity,sell_price_unit_ht:G.sell_price_unit_ht,sell_price_unit_ttc:mt(M.customer_country)?tt(G.sell_price_unit_ht):null,shipping_charged:b[F]??0,shipping_charged_ttc:mt(M.customer_country)?tt(b[F]??0):null,shipping_real:E[F]??0,shipping_real_ttc:mt(M.customer_country)?tt(E[F]??0):null,payment_method:M.payment_method,category:G.category,buy_price_unit:G.buy_price_unit,power_wp:la(M.channel,G.category)?Ar(G.product_ref.trim(),G.quantity)??G.power_wp:null},le=Ai(se);return D.quantity+=G.quantity,D.sell_total_ht+=le.sell_total_ht,D.transaction_value+=le.transaction_value,D.commission_eur+=le.commission_eur,D.payment_fee+=le.payment_fee,D.net_received+=le.net_received,D.total_cost+=le.total_cost,D.net_margin+=le.net_margin,D},{quantity:0,sell_total_ht:0,transaction_value:0,commission_eur:0,payment_fee:0,net_received:0,total_cost:0,net_margin:0})},[M]),Rt=(p,b)=>{st(E=>({...E,[p]:b}))},Rs=p=>{const b=p.trim(),E=on.get(b);st(D=>{const G={...D,product_ref:p};return E&&(G.buy_price_unit=E.buy_price_unit,G.category=E.category),G})},pa=()=>{pt(null),st(gu()),de(""),Ze(""),Qt(!0)},ga=p=>g.filter(b=>b.date===p.date&&b.client_or_tx===p.client_or_tx&&b.transaction_ref===p.transaction_ref&&b.channel===p.channel),ya=p=>{const b=ga(p);if(b.length===0){de("Commande introuvable.");return}const E=b[0],D=ve(b.reduce((se,le)=>se+le.shipping_charged,0)),G=ve(b.reduce((se,le)=>se+le.shipping_real,0)),F=new Map;for(const se of b)for(const le of se.attachments)F.has(le.id)||F.set(le.id,le);ne({date:E.date,client_or_tx:E.client_or_tx,transaction_ref:E.transaction_ref??"",channel:E.channel,customer_country:E.customer_country,payment_method:E.payment_method,shipping_charged_order:D,shipping_real_order:G,attachments:Array.from(F.values()),source_sale_ids:b.map(se=>se.id),lines:b.map(se=>({id:se.id,product_ref:se.product_ref,category:se.category,quantity:se.quantity,buy_price_unit:se.buy_price_unit,sell_price_unit_ht:se.sell_price_unit_ht,shipping_charged:se.shipping_charged,shipping_real:se.shipping_real,power_wp:se.power_wp}))}),q(!0),de(""),Ze("")},zn=()=>{q(!1),ne(null)},Ve=(p,b)=>{ne(E=>E&&{...E,[p]:b})},_a=(p,b,E)=>{ne(D=>D&&{...D,lines:D.lines.map(G=>G.id===p?{...G,[b]:E}:G)})},Ni=({title:p,message:b,confirmLabel:E,tone:D="danger",onConfirm:G})=>{I({title:p,message:b,confirmLabel:E,tone:D,onConfirm:G})},En=()=>{I(null)},va=()=>{if(!J)return;const p=J.onConfirm;I(null),p()},Du=(p,b)=>{const E=b.trim(),D=on.get(E);ne(G=>G&&{...G,lines:G.lines.map(F=>F.id!==p?F:D?{...F,product_ref:b,category:D.category,buy_price_unit:D.buy_price_unit}:{...F,product_ref:b})})},Kr=()=>{ne(p=>p&&{...p,lines:[...p.lines,{id:`order-line-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,product_ref:"",category:"Inverters",quantity:1,buy_price_unit:0,sell_price_unit_ht:0,shipping_charged:0,shipping_real:0,power_wp:null}]})},Yr=p=>{if(!M)return;const E=M.lines.find(D=>D.id===p)?.product_ref?.trim()||"cette reference";Ni({title:"Supprimer une reference",message:`Confirmer la suppression de ${E} ?`,confirmLabel:"Supprimer",tone:"danger",onConfirm:()=>{ne(D=>D&&(D.lines.length<=1?{...D,lines:D.lines.map(G=>G.id===p?{...G,product_ref:"",category:"Inverters",quantity:1,buy_price_unit:0,sell_price_unit_ht:0,shipping_charged:0,shipping_real:0,power_wp:null}:G)}:{...D,lines:D.lines.filter(G=>G.id!==p)}))}})},Qr=()=>{Qt(!1),pt(null),st(gu()),ei()},ki=()=>{const p=new URL(window.location.href);p.searchParams.set(Lb,`${Date.now()}`),window.location.replace(p.toString())},ei=()=>{window.setTimeout(()=>{ki()},350)},Tn=p=>{if(!p.date)return"Date obligatoire.";if(!p.client_or_tx.trim())return"Client obligatoire.";if(!p.transaction_ref.trim())return"Transaction # obligatoire.";if(!p.product_ref.trim())return"Produit obligatoire.";if(!p.customer_country.trim())return"Pays client obligatoire.";if(p.quantity<=0)return"Quantite > 0 requise.";if(mt(p.customer_country)){if(p.sell_price_unit_ht<0)return"Prix vente unit. HT invalide.";if(p.shipping_charged<0)return"Prix frais de port HT invalide.";if(p.shipping_real<0)return"Cout frais de port HT invalide."}if(la(p.channel,p.category)){const D=Ar(p.product_ref,p.quantity)??p.power_wp;if(D===null||D<=0)return"Puissance Wp introuvable: ajoute la valeur dans la reference produit (ex: 550WP)."}const b=on.get(p.product_ref.trim());if(b){let E=y[b.ref]??0;if(cn&&cn.product_ref===b.ref&&(E+=cn.quantity),p.quantity>E)return`Stock insuffisant pour ${b.ref} (disponible: ${E}).`}return null},Lt=p=>{p.preventDefault(),de(""),Ze("");const b={...Z,client_or_tx:Z.client_or_tx.trim(),transaction_ref:Z.transaction_ref.trim(),product_ref:Z.product_ref.trim(),customer_country:Z.customer_country,quantity:Math.max(0,Number(Z.quantity)),sell_price_unit_ht:Number(Z.sell_price_unit_ht),sell_price_unit_ttc:mt(Z.customer_country)?tt(Number(Z.sell_price_unit_ht)):Qa(Z.sell_price_unit_ttc),shipping_charged:Number(Z.shipping_charged),shipping_charged_ttc:mt(Z.customer_country)?tt(Number(Z.shipping_charged)):null,shipping_real:Number(Z.shipping_real),shipping_real_ttc:mt(Z.customer_country)?tt(Number(Z.shipping_real)):null,buy_price_unit:Number(Z.buy_price_unit),power_wp:la(Z.channel,Z.category)?Ar(Z.product_ref,Number(Z.quantity))??Qa(Z.power_wp):null},E=Tn(b);if(E){de(E);return}if(cn){const D=ah(cn.id,b,cn.created_at);v(G=>G.map(F=>F.id===cn.id?D:F)),Ze("Vente modifiee.")}else{const D=ah(nh(),b);v(G=>[D,...G]),Ze("Vente ajoutee.")}Qt(!1),pt(null),st(gu())},Xr=p=>{if(p.preventDefault(),!M)return;const b={date:M.date,client_or_tx:M.client_or_tx.trim(),transaction_ref:M.transaction_ref.trim(),channel:M.channel,customer_country:M.customer_country,payment_method:M.payment_method};if(!b.date){de("Date obligatoire.");return}if(!b.client_or_tx){de("Client obligatoire.");return}if(!b.transaction_ref){de("Transaction # obligatoire.");return}if(!b.customer_country){de("Pays client obligatoire.");return}if(M.shipping_charged_order<0||M.shipping_real_order<0){de("Les montants de transport commande doivent etre >= 0.");return}if(M.lines.length===0){de("La commande doit contenir au moins un produit.");return}const E=g.filter(ye=>M.source_sale_ids.includes(ye.id)),D=new Map(E.map(ye=>[ye.id,ye]));if(D.size!==M.source_sale_ids.length){de("Incoherence detectee sur la commande. Reouvre la commande puis reessaie.");return}const G=new Map;for(const ye of E){const Ce=ye.product_ref.trim();G.set(Ce,(G.get(Ce)??0)+ye.quantity)}const F=new Map;for(const ye of M.lines){const Ce=ye.product_ref.trim();if(!Ce){de("Chaque ligne doit avoir une reference produit.");return}if(ye.quantity<=0){de(`Quantite invalide pour ${Ce}.`);return}if(ye.buy_price_unit<0||ye.sell_price_unit_ht<0){de(`Montant negatif non autorise pour ${Ce}.`);return}if(la(b.channel,ye.category)){const Bt=Ar(Ce,ye.quantity)??ye.power_wp;if(Bt===null||Bt<=0){de(`Puissance Wp introuvable pour ${Ce} (ex: 550WP).`);return}}F.set(Ce,(F.get(Ce)??0)+ye.quantity)}const se=M.lines.map(ye=>{const Ce=ve(ye.quantity*ye.sell_price_unit_ht);return Ce>0?Ce:Math.max(1,ye.quantity)}),le=_u(M.shipping_charged_order,se),We=_u(M.shipping_real_order,se);for(const[ye,Ce]of F.entries()){if(!on.get(ye))continue;const Bt=(y[ye]??0)+(G.get(ye)??0);if(Ce>Bt){de(`Stock insuffisant pour ${ye} (disponible: ${Bt}).`);return}}const Je=mt(b.customer_country),hn=new Map,Zt=[],kt=new Set;for(const[ye,Ce]of M.lines.entries()){const Ut=D.get(Ce.id)??null,Bt=Ut?Ut.id:nh();kt.add(Bt);const Mi=la(b.channel,Ce.category)?Ar(Ce.product_ref.trim(),Ce.quantity)??Ce.power_wp:null,el={date:b.date,client_or_tx:b.client_or_tx,transaction_ref:b.transaction_ref,channel:b.channel,customer_country:b.customer_country,product_ref:Ce.product_ref.trim(),quantity:Ce.quantity,sell_price_unit_ht:Ce.sell_price_unit_ht,sell_price_unit_ttc:Je?tt(Ce.sell_price_unit_ht):null,shipping_charged:le[ye]??0,shipping_charged_ttc:Je?tt(le[ye]??0):null,shipping_real:We[ye]??0,shipping_real_ttc:Je?tt(We[ye]??0):null,payment_method:b.payment_method,category:Ce.category,buy_price_unit:Ce.buy_price_unit,power_wp:Mi,attachments:ye===0?M.attachments:[]},vt=ah(Bt,el,Ut?.created_at);Ut?hn.set(Bt,vt):Zt.push(vt)}v(ye=>{const Ce=ye.filter(Ut=>!M.source_sale_ids.includes(Ut.id)||kt.has(Ut.id)).map(Ut=>hn.get(Ut.id)??Ut);return[...Zt,...Ce]}),zn(),de(""),Ze(`Commande modifiee (${M.lines.length} ligne(s)).`),ei()},Mu=async p=>{if(!(!p||p.length===0))try{const b=await Promise.all(Array.from(p).map(E=>$p(E)));st(E=>({...E,attachments:[...E.attachments,...b]}))}catch{de("Impossible de joindre au moins un fichier.")}},Ns=p=>{const E=Z.attachments.find(D=>D.id===p)?.name||"cette piece jointe";Ni({title:"Supprimer une piece jointe",message:`Supprimer ${E} ?`,confirmLabel:"Supprimer",tone:"danger",onConfirm:()=>{st(D=>({...D,attachments:D.attachments.filter(G=>G.id!==p)}))}})},Jr=async p=>{if(!(!p||p.length===0))try{const b=await Promise.all(Array.from(p).map(E=>$p(E)));ne(E=>E&&{...E,attachments:[...E.attachments,...b]})}catch{de("Impossible de joindre au moins un fichier.")}},Ui=p=>{if(!M)return;const E=M.attachments.find(D=>D.id===p)?.name||"cette piece jointe";Ni({title:"Supprimer une piece jointe",message:`Supprimer ${E} ?`,confirmLabel:"Supprimer",tone:"danger",onConfirm:()=>{ne(D=>D&&{...D,attachments:D.attachments.filter(G=>G.id!==p)})}})},Pr=p=>{De(p)},Nt=()=>{De(null)},ks=()=>{const p=J_(g);rp(`sales-margin-tracker-${Su(new Date)}.csv`,p)},Us=()=>{const p=P_(Mn,y);rp(`catalog-stock-${Su(new Date)}.csv`,p)},Ds=()=>{const p=Qc(g,h,y);sn(jt.backup,p),Z_(`sales-margin-backup-${Su(new Date)}.json`,p)},ba=async()=>{if(!ha){de("Push non supporte sur ce navigateur/appareil.");return}Jt(!0);try{if(await Notification.requestPermission()!=="granted"){de("Autorisation notifications refusee.");return}const b=await Yn(),G=(await b.pushManager.getSubscription()??await b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yb(Cb)})).toJSON(),F=G.endpoint??"",se=G.keys?.p256dh??"",le=G.keys?.auth??"";if(!F||!se||!le)throw new Error("Subscription push incomplete.");await Db({device_id:kn,endpoint:F,p256dh:se,auth:le,user_agent:typeof navigator<"u"?navigator.userAgent:null}),Vn(!0),Ze("Notifications push activees.")}catch(p){de(`Activation push impossible: ${String(p.message)}`)}finally{Jt(!1)}},Zr=async()=>{if(!ha){Vn(!1);return}Jt(!0);try{const b=await(await Yn()).pushManager.getSubscription();if(b){const E=b.endpoint;await b.unsubscribe(),await Mb(E)}Vn(!1),Ze("Notifications push desactivees.")}catch(p){de(`Desactivation push impossible: ${String(p.message)}`)}finally{Jt(!1)}},Ir=async()=>{if(typeof window>"u"||!("Notification"in window)){de("Notifications non supportees sur ce navigateur/appareil.");return}if(!("serviceWorker"in navigator)){de("Service worker indisponible sur ce navigateur/appareil.");return}Jt(!0);try{if((Notification.permission==="granted"?"granted":await Notification.requestPermission())!=="granted"){de("Autorisation notifications refusee (Chrome/macOS).");return}const b=await Yn(),E="Test  Huawei Sales Manager",D="Si tu vois ceci, Chrome/macOS autorise bien les notifications pour l'app.",G="/huawei-sales-margin-tracker/favicon-192.png";let F=!1;try{const se=new Notification(E,{body:D,icon:G});se.onshow=()=>{F=!0,Ze("Notification affichee (OK).")},se.onerror=()=>{F=!0,de("Notification bloquee par macOS/Chrome. Verifie Reglages Systeme > Notifications > Chrome et les permissions du site.")}}catch{}await b.showNotification(E,{body:D,icon:G,badge:G,tag:"local-test"}),window.setTimeout(async()=>{if(!F)try{(await b.getNotifications({tag:"local-test"})).length>0?Ze("Notification envoyee (visible dans le centre de notifications)."):de("Notification envoyee mais non affichee. Verifie macOS: Notifications Chrome autorisees + Focus/Ne pas deranger.")}catch{de("Notification envoyee mais non confirmee. Verifie macOS: Notifications Chrome autorisees + Focus/Ne pas deranger.")}},900)}catch(p){const b=(()=>{try{return[`permission=${typeof Notification<"u"?Notification.permission:"n/a"}`,`secure=${typeof window<"u"?String(window.isSecureContext):"n/a"}`,`sw_controller=${navigator.serviceWorker?.controller?.scriptURL??"none"}`].join(" | ")}catch{return""}})();de(`Test notification impossible: ${String(p.message)} ${b}`.trim())}finally{Jt(!1)}},Sa=async()=>{if(!s){de("Push cloud indisponible: configure Supabase.");return}if(!Oi){de("Active d abord Push ON sur cet appareil.");return}Jt(!0);try{await Dp({author:"System",body:`Ping push (${bi(new Date().toISOString())})`,sender_device_id:"",url:window.location.href}),Ze("Ping push envoye (serveur).")}catch(p){de(`Ping push impossible: ${String(p.message)}`)}finally{Jt(!1)}},zu=async p=>{if(p.preventDefault(),!s){de("Messagerie cloud indisponible: configure Supabase.");return}const b=he.trim(),E=Ja.trim();if(b.length<2){de("Renseigne ton prenom (2 caracteres minimum).");return}if(E.length!==0){Ot(!0);try{await Ub({author:b,body:E,device_id:kn});try{const G=typeof window<"u"?`${window.location.origin}/huawei-sales-margin-tracker/`:void 0;await Dp({author:b,body:E,sender_device_id:kn,url:G})}catch(G){de(`Push non envoye: ${String(G.message)}`)}bn("");const D=await Up();ji(D)}catch(D){de(`Envoi message impossible: ${String(D.message)}`)}finally{Ot(!1)}}},Wr=()=>{const p=Re.trim();if(p.length<2){de("Pseudo trop court (minimum 2 caracteres).");return}be(p),ht(p),ca(!1)},Fr=p=>{bn(b=>b.replace(Bp,E=>`${E.startsWith(" ")?" ":""}@${p} `)),window.requestAnimationFrame(()=>{$r.current?.focus()})},Ms=p=>{ie(p),$e("All"),fe(!1),r("stock"),Pa(!1)},qu=p=>p.split(Hb).map((b,E)=>{if(!b.startsWith("@"))return m.jsx("span",{children:b},`txt-${E}`);const D=b.slice(1),G=Ri.get(D.toUpperCase());return G?m.jsxs("button",{type:"button",className:"sm-chat-mention",onClick:()=>Ms(G),title:`Ouvrir le stock pour ${G}`,children:["@",G]},`mention-${G}-${E}`):m.jsx("span",{children:b},`txt-${E}`)}),Lu=()=>{if(!s){de("Messagerie cloud indisponible: configure Supabase.");return}Os(),Pa(p=>!p)},Di=fa.filter(p=>p.currentStock<=yi).length;return m.jsxs("div",{className:`sm-app theme-${l}`,children:[m.jsxs("header",{className:"sm-topbar",children:[m.jsxs("div",{className:"sm-brand",children:[m.jsx("div",{className:"sm-logo",children:"SM"}),m.jsxs("div",{children:[m.jsx("p",{className:"sm-title",children:"Huawei Sales Manager"}),m.jsx("p",{className:"sm-subtitle",children:Hr}),m.jsx("p",{className:"sm-subtitle",children:x?`Sauvegarde auto locale: ${bi(x)} (PJ incluses)`:"Sauvegarde auto locale en attente..."}),m.jsx("p",{className:"sm-subtitle",children:V})]})]}),m.jsxs("div",{className:"sm-top-actions",children:[m.jsx("button",{type:"button",className:"sm-icon-btn",onClick:()=>c(p=>p==="dark"?"light":"dark"),title:"Toggle theme",children:l==="dark"?"":""}),m.jsxs("nav",{className:"sm-tabs",children:[m.jsx("button",{type:"button",className:`sm-tab ${a==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Dashboard"}),m.jsx("button",{type:"button",className:`sm-tab ${a==="sales"?"active":""}`,onClick:()=>r("sales"),children:"Ventes"}),m.jsx("button",{type:"button",className:`sm-tab ${a==="stock"?"active":""}`,onClick:()=>r("stock"),children:"Stock"})]})]})]}),gt&&m.jsx("p",{className:"sm-feedback success",children:gt}),Ci&&m.jsx("p",{className:"sm-feedback error",children:Ci}),a==="sales"&&m.jsxs("section",{className:"sm-panel",children:[m.jsxs("div",{className:"sm-toolbar",children:[m.jsx("button",{type:"button",className:"sm-primary-btn",onClick:pa,children:"+ Nouvelle vente"}),m.jsx("button",{type:"button",className:"sm-btn",onClick:ks,children:"CSV ventes"}),m.jsx("button",{type:"button",className:"sm-btn",onClick:Us,children:"CSV stock"}),m.jsxs("details",{className:"sm-advanced-menu",children:[m.jsx("summary",{className:"sm-btn",children:"Avance"}),m.jsx("div",{className:"sm-advanced-menu-content",children:m.jsx("button",{type:"button",className:"sm-btn",onClick:Ds,children:"Backup JSON"})})]})]}),m.jsxs("div",{className:"sm-filters",children:[m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Canal"}),m.jsxs("select",{value:K.channel,onChange:p=>X(b=>({...b,channel:p.target.value})),children:[m.jsx("option",{value:"All",children:"Tous canaux"}),fu.map(p=>m.jsx("option",{value:p,children:p},p))]})]}),m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Categorie"}),m.jsxs("select",{value:K.category,onChange:p=>X(b=>({...b,category:p.target.value})),children:[m.jsx("option",{value:"All",children:"Toutes categories"}),mu.map(p=>m.jsx("option",{value:p,children:p},p))]})]}),m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Recherche"}),m.jsx("input",{type:"text",value:K.query,onChange:p=>X(b=>({...b,query:p.target.value})),placeholder:"Client / Transaction # / produit"})]}),m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Date debut"}),m.jsxs("div",{className:"sm-filter-date-row",children:[m.jsx("input",{type:"date",value:K.date_from,onChange:p=>X(b=>({...b,date_from:p.target.value})),"aria-label":"Date debut"}),m.jsx("button",{type:"button",className:"sm-filter-reset-btn",onClick:()=>X(p=>({...p,date_from:""})),disabled:!K.date_from,title:"Effacer date debut","aria-label":"Effacer date debut",children:""})]})]}),m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Date fin"}),m.jsxs("div",{className:"sm-filter-date-row",children:[m.jsx("input",{type:"date",value:K.date_to,onChange:p=>X(b=>({...b,date_to:p.target.value})),"aria-label":"Date fin"}),m.jsx("button",{type:"button",className:"sm-filter-reset-btn",onClick:()=>X(p=>({...p,date_to:""})),disabled:!K.date_to,title:"Effacer date fin","aria-label":"Effacer date fin",children:""})]})]}),m.jsxs("label",{className:"sm-filter-item",children:[m.jsx("span",{className:"sm-filter-label",children:"Stock"}),m.jsxs("select",{value:K.stock_status,onChange:p=>X(b=>({...b,stock_status:p.target.value})),children:[m.jsx("option",{value:"all",children:"Tout stock"}),m.jsx("option",{value:"low",children:"Stock faible"}),m.jsx("option",{value:"out",children:"Rupture"})]})]})]}),m.jsxs("div",{className:"sm-alert-line",children:[" ",Di," alerte(s) stock"]}),m.jsx("div",{className:"sm-table-wrap",children:m.jsxs("table",{className:"sm-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Date"}),m.jsx("th",{children:"Client"}),m.jsx("th",{children:"Transaction #"}),m.jsx("th",{children:"Canal"}),m.jsx("th",{children:"Produits"}),m.jsx("th",{className:"sm-num",children:"Qte"}),m.jsx("th",{className:"sm-num",children:"PV unit HT"}),m.jsx("th",{className:"sm-num",children:"Total HT"}),m.jsx("th",{className:"sm-num",children:"Valeur TX"}),m.jsx("th",{className:"sm-num",children:"Fees Platform"}),m.jsx("th",{className:"sm-num",children:"Fees Stripe"}),m.jsx("th",{className:"sm-num",children:"Net recu"}),m.jsx("th",{className:"sm-num",children:"Marge nette"}),m.jsx("th",{className:"sm-num",children:"Marge %"}),m.jsx("th",{children:"PJ"}),m.jsx("th",{children:"Actions"})]})}),m.jsx("tbody",{children:qt.map(p=>m.jsxs("tr",{className:"sm-click-row",onClick:()=>ya(p),children:[m.jsx("td",{children:p.date}),m.jsxs("td",{children:[p.customer_country?`${sh(p.customer_country)} `:"",p.client_or_tx]}),m.jsx("td",{children:p.transaction_ref||"-"}),m.jsx("td",{children:m.jsx("span",{className:"sm-chip",children:p.channel})}),m.jsxs("td",{children:[p.product_display,p.out_stock_refs.length>0&&m.jsxs("small",{className:"sm-stock-ref-hint ko",children:["Rupture: ",p.out_stock_refs.join(", ")]}),p.out_stock_refs.length===0&&p.low_stock_refs.length>0&&m.jsxs("small",{className:"sm-stock-ref-hint warn",children:["Stock faible: ",p.low_stock_refs.join(", ")]})]}),m.jsx("td",{className:"sm-num",children:p.quantity}),m.jsx("td",{className:"sm-num",children:Se(p.sell_price_unit_ht)}),m.jsx("td",{className:"sm-num",children:Se(p.sell_total_ht)}),m.jsx("td",{className:"sm-num",children:Se(p.transaction_value)}),m.jsx("td",{className:"sm-num",children:Se(p.commission_eur)}),m.jsx("td",{className:"sm-num",children:Se(p.payment_fee)}),m.jsx("td",{className:"sm-num",children:Se(p.net_received)}),m.jsx("td",{className:`sm-num ${p.net_margin>=0?"ok":"ko"}`,children:Se(p.net_margin)}),m.jsx("td",{className:`sm-num ${p.net_margin_pct>=0?"ok":"ko"}`,children:yu(p.net_margin_pct)}),m.jsx("td",{children:p.attachments_count}),m.jsx("td",{className:"sm-row-actions",children:m.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),ya(p)},title:"Modifier la commande complete et tous ses produits",children:"Editer commande"})})]},p.key))})]})}),m.jsxs("div",{className:"sm-kpi-strip",children:[m.jsxs("div",{children:[m.jsx("p",{children:"Commandes affichees"}),m.jsx("strong",{children:qt.length})]}),m.jsxs("div",{children:[m.jsx("p",{children:"CA total"}),m.jsx("strong",{children:Se(_t.totalRevenue)})]}),m.jsxs("div",{children:[m.jsx("p",{children:"Marge nette"}),m.jsxs("strong",{className:"ok",children:[Se(_t.totalNetMargin)," (",yu(_t.avgNetMarginPct),")"]})]}),m.jsxs("div",{children:[m.jsx("p",{children:"Fees Platform / Fees Stripe"}),m.jsxs("strong",{className:"warn",children:[Se(_t.totalCommissions)," / ",Se(_t.totalPlatformFees)]})]})]})]}),a==="dashboard"&&m.jsxs("section",{className:"sm-panel",children:[m.jsx("h2",{className:"sm-section-title",children:"Dashboard KPI"}),m.jsxs("div",{className:"sm-kpi-grid",children:[m.jsxs("article",{className:"sm-kpi-card blue",children:[m.jsx("p",{children:"Chiffre d affaires"}),m.jsx("strong",{children:Se(_t.totalRevenue)})]}),m.jsxs("article",{className:"sm-kpi-card green",children:[m.jsx("p",{children:"Marge nette totale"}),m.jsx("strong",{children:Se(_t.totalNetMargin)})]}),m.jsxs("article",{className:"sm-kpi-card yellow",children:[m.jsx("p",{children:"Commissions totales"}),m.jsx("strong",{children:Se(_t.totalCommissions)})]}),m.jsxs("article",{className:"sm-kpi-card purple",children:[m.jsx("p",{children:"Taux marge moyen"}),m.jsx("strong",{children:yu(_t.avgNetMarginPct)})]}),m.jsxs("article",{className:"sm-kpi-card",children:[m.jsx("p",{children:"Articles vendus"}),m.jsx("strong",{children:_t.totalMaterialsSold})]})]}),m.jsx("div",{className:"sm-table-wrap",children:m.jsxs("table",{className:"sm-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Canal"}),m.jsx("th",{children:"Ventes"}),m.jsx("th",{children:"CA"}),m.jsx("th",{children:"Commissions"}),m.jsx("th",{children:"Marge nette"})]})}),m.jsx("tbody",{children:_t.breakdown.map(p=>m.jsxs("tr",{children:[m.jsx("td",{children:p.channel}),m.jsx("td",{children:p.count}),m.jsx("td",{children:Se(p.revenue)}),m.jsx("td",{children:Se(p.commissions)}),m.jsx("td",{className:p.netMargin>=0?"ok":"ko",children:Se(p.netMargin)})]},p.channel))})]})}),m.jsxs("div",{className:"sm-dashboard-two-col",children:[m.jsxs("article",{className:"sm-card",children:[m.jsx("h3",{children:"Top 5 produits (par CA)"}),xs.length===0?m.jsx("p",{children:"Aucun produit."}):m.jsx("ul",{className:"sm-list",children:xs.map(p=>m.jsxs("li",{children:[m.jsx("span",{children:p.product}),m.jsx("strong",{children:Se(p.revenue)})]},p.product))})]}),m.jsxs("article",{className:"sm-card",children:[m.jsx("h3",{children:"Alertes stock"}),Sn.length===0?m.jsx("p",{children:"Aucune alerte stock."}):m.jsx("ul",{className:"sm-list",children:Sn.map(p=>m.jsxs("li",{children:[m.jsx("span",{children:p.ref}),m.jsxs("strong",{className:p.currentStock<=0?"ko":"warn",children:[p.currentStock," restant(s)"]})]},p.ref))})]})]}),m.jsxs("article",{className:"sm-card",children:[m.jsx("h3",{children:"Marge nette par canal"}),m.jsx("div",{className:"sm-bars",children:(()=>{const p=Math.max(..._t.breakdown.map(b=>Math.abs(b.netMargin)),1);return _t.breakdown.map(b=>{const E=Math.max(8,Math.abs(b.netMargin)/p*160);return m.jsxs("div",{className:"sm-bar-col",children:[m.jsx("div",{className:`sm-bar ${b.netMargin>=0?"pos":"neg"}`,style:{height:`${E}px`},title:`${b.channel} ${Se(b.netMargin)}`}),m.jsx("span",{children:b.channel}),m.jsx("small",{children:Se(b.netMargin)})]},b.channel)})})()})]})]}),a==="stock"&&m.jsxs("section",{className:"sm-panel",children:[m.jsxs("div",{className:"sm-stock-head",children:[m.jsxs("h2",{className:"sm-section-title",children:["Catalogue & Stock (",fa.length,")"]}),m.jsxs("div",{className:"sm-stock-controls",children:[m.jsx("input",{type:"text",value:Q,onChange:p=>ie(p.target.value),placeholder:"Recherche reference ou categorie"}),m.jsxs("select",{value:te,onChange:p=>$e(p.target.value),children:[m.jsx("option",{value:"All",children:"Toutes categories"}),mu.map(p=>m.jsx("option",{value:p,children:p},p))]}),m.jsxs("label",{className:"sm-checkbox",children:[m.jsx("input",{type:"checkbox",checked:xe,onChange:p=>fe(p.target.checked)}),"Stock faible seulement"]}),m.jsx("button",{type:"button",className:"sm-btn",onClick:Us,children:"Export CSV stock"})]})]}),m.jsx("div",{className:"sm-table-wrap",children:m.jsxs("table",{className:"sm-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Reference"}),m.jsx("th",{children:"Categorie"}),m.jsx("th",{children:"PA (EUR)"}),m.jsx("th",{children:"Stock"}),m.jsx("th",{children:"Statut"}),m.jsx("th",{children:"Datasheet"})]})}),m.jsx("tbody",{children:fa.map((p,b)=>m.jsxs("tr",{children:[m.jsx("td",{children:p.order??b+1}),m.jsx("td",{children:p.ref}),m.jsx("td",{children:m.jsx("span",{className:"sm-chip",children:p.category})}),m.jsx("td",{children:Se(p.buy_price_unit)}),m.jsx("td",{children:p.currentStock}),m.jsx("td",{children:m.jsx("span",{className:`sm-status ${p.status==="OK"?"ok":p.status==="FAIBLE"?"warn":"ko"}`,children:p.status})}),m.jsx("td",{children:p.datasheet_url?m.jsx("a",{className:"sm-link-btn",href:p.datasheet_url,target:"_blank",rel:"noopener noreferrer",children:"PDF"}):m.jsx("span",{className:"sm-muted",children:"N/A"})})]},p.ref))})]})}),m.jsxs("p",{className:"sm-footnote",children:["Source catalogue: ",m.jsx("a",{href:rh,children:rh})]})]}),m.jsxs("div",{className:"sm-chat-fab-wrap",children:[!un&&m.jsxs("button",{type:"button",className:"sm-chat-fab",onClick:Lu,title:"Messagerie interne",children:[" Chat",qr>0&&m.jsx("span",{className:"sm-chat-badge",children:qr})]}),un&&m.jsxs("section",{className:"sm-chat-dock",children:[m.jsxs("div",{className:"sm-chat-dock-head",children:[m.jsxs("div",{children:[m.jsx("h3",{children:"Messagerie equipe"}),m.jsx("p",{children:"Interne a votre Store ID"})]}),m.jsxs("div",{className:"sm-chat-dock-head-actions",children:[ha?m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>{Oi?Zr():ba()},disabled:Za,title:"Notifications push iPhone/macOS (PWA installee)",children:Za?"...":Oi?"Push ON":"Push OFF"}):m.jsx("span",{className:"sm-muted",children:"Push non supporte ici"}),m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>{Sa()},disabled:Za||!Oi,title:"Envoie un push depuis le serveur (test).",children:"Ping"}),m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>{Ir()},disabled:Za,title:"Test rapide: verifie que Chrome/macOS affiche bien les notifications.",children:"Test"}),m.jsx("button",{type:"button",className:"sm-close",onClick:()=>Pa(!1),children:""})]})]}),m.jsx("p",{className:"sm-chat-push-note",children:"iPhone: push disponible uniquement si l'app est ajoutee a l'ecran d'accueil."}),m.jsx("div",{className:"sm-chat-list",ref:xt,children:js&&zt.length===0?m.jsx("p",{className:"sm-muted",children:"Chargement des messages..."}):zt.length===0?m.jsx("p",{className:"sm-muted",children:"Aucun message. Lance la conversation."}):zt.map(p=>{const b=p.device_id===kn;return m.jsxs("article",{className:`sm-chat-item ${b?"mine":"other"}`,children:[m.jsx("p",{className:"sm-chat-author",children:p.author}),m.jsx("p",{className:"sm-chat-body",children:qu(p.body)}),m.jsx("time",{className:"sm-chat-time",children:bi(p.created_at)})]},p.id)})}),Ge?m.jsxs("div",{className:"sm-chat-identity-edit",children:[m.jsx("input",{type:"text",value:Re,onChange:p=>ht(p.target.value),placeholder:"Choisir un prenom ou pseudo",maxLength:60}),m.jsx("button",{type:"button",className:"sm-primary-btn",onClick:Wr,children:"Valider"})]}):m.jsxs("div",{className:"sm-chat-identity",children:[m.jsxs("span",{children:["Vous: ",he]}),m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>{ht(he),ca(!0)},children:"Modifier pseudo"})]}),m.jsxs("form",{className:"sm-chat-form",onSubmit:zu,children:[m.jsxs("div",{className:"sm-chat-compose",children:[m.jsx("input",{ref:$r,type:"text",value:Ja,onChange:p=>bn(p.target.value),placeholder:"Ecrire un message... (utilise @REF)",maxLength:4e3,required:!0,disabled:Ge}),!Ge&&Vr.length>0&&m.jsx("div",{className:"sm-chat-mention-list",children:Vr.map(p=>m.jsxs("button",{type:"button",className:"sm-chat-mention-option",onMouseDown:b=>b.preventDefault(),onClick:()=>Fr(p),children:["@",p]},p))})]}),m.jsx("button",{type:"submit",className:"sm-primary-btn",disabled:Br||Ge,children:Br?"Envoi...":"Envoyer"})]})]})]}),Gn&&m.jsx("div",{className:"sm-modal-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("form",{className:"sm-modal",onSubmit:Lt,children:[m.jsxs("div",{className:"sm-modal-head",children:[m.jsx("h3",{children:cn?"Modifier vente":"Nouvelle vente"}),m.jsx("button",{type:"button",className:"sm-close",onClick:Qr,children:""})]}),m.jsxs("div",{className:"sm-form-grid",children:[m.jsxs("label",{children:["Date",m.jsx("input",{type:"date",value:Z.date,onChange:p=>Rt("date",p.target.value),required:!0})]}),m.jsxs("label",{children:["Client",m.jsx("input",{type:"text",value:Z.client_or_tx,onChange:p=>Rt("client_or_tx",p.target.value),required:!0})]}),m.jsxs("label",{children:["Transaction #",m.jsx("input",{type:"text",value:Z.transaction_ref,onChange:p=>Rt("transaction_ref",p.target.value),placeholder:"Ex: #A12345",required:!0})]}),m.jsxs("label",{children:["Pays client",m.jsxs("select",{value:Z.customer_country,onChange:p=>{const b=p.target.value;st(E=>({...E,customer_country:b,sell_price_unit_ttc:mt(b)?tt(E.sell_price_unit_ht):null,shipping_charged_ttc:mt(b)?tt(E.shipping_charged):null,shipping_real_ttc:mt(b)?tt(E.shipping_real):null}))},required:!0,children:[m.jsx("option",{value:xu,disabled:!0,children:"Selectionner un pays"}),zp.map(p=>m.jsxs("option",{value:p,children:[sh(p)," ",p]},p))]})]}),m.jsxs("label",{children:["Canal",m.jsx("select",{value:Z.channel,onChange:p=>{const b=p.target.value;st(E=>({...E,channel:b,power_wp:la(b,E.category)?E.power_wp:null}))},children:fu.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("label",{children:["Paiement",m.jsx("select",{value:Z.payment_method,onChange:p=>Rt("payment_method",p.target.value),children:Mp.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("label",{className:"full",children:["Produit",m.jsx("input",{type:"text",value:Z.product_ref,onChange:p=>Rs(p.target.value),list:"catalog-products",placeholder:"Rechercher un produit",required:!0}),m.jsx("datalist",{id:"catalog-products",children:Dn.map(p=>m.jsx("option",{value:p.ref},p.ref))}),Ie&&m.jsxs("small",{children:["Auto: ",Ie.category," | PA ",Se(Ie.buy_price_unit)," | Stock ",y[Ie.ref]??Ie.initial_stock]})]}),m.jsxs("label",{children:["Categorie",m.jsx("select",{value:Z.category,onChange:p=>{const b=p.target.value;st(E=>({...E,category:b,power_wp:la(E.channel,b)?E.power_wp:null}))},children:mu.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("label",{children:["Quantite",m.jsx("input",{type:"number",min:"1",value:Z.quantity,onChange:p=>Rt("quantity",Math.max(0,$n(p.target.value))),required:!0})]}),m.jsxs("label",{children:["Prix achat unit. (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.buy_price_unit,onChange:p=>Rt("buy_price_unit",$n(p.target.value)),required:!0})]}),m.jsxs("label",{children:["Prix vente unit. HT (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.sell_price_unit_ht,onChange:p=>{const b=$n(p.target.value);st(E=>({...E,sell_price_unit_ht:b,sell_price_unit_ttc:mt(E.customer_country)?tt(b):E.sell_price_unit_ttc}))},required:!0})]}),m.jsxs("label",{children:["Prix vente unit. TTC (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Te?ma??"":Z.sell_price_unit_ttc??"",onChange:p=>{Te||Rt("sell_price_unit_ttc",ih(p.target.value))},disabled:!Te,readOnly:Te,required:!1}),Te&&m.jsx("small",{children:"Auto TVA France (20%)."})]}),m.jsxs("label",{children:["Prix frais de port HT (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.shipping_charged,onChange:p=>{const b=$n(p.target.value);st(E=>({...E,shipping_charged:b,shipping_charged_ttc:mt(E.customer_country)?tt(b):E.shipping_charged_ttc}))},required:!0})]}),m.jsxs("label",{children:["Prix frais de port TTC (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Te?Cs??"":Z.shipping_charged_ttc??"",onChange:p=>{Te||Rt("shipping_charged_ttc",ih(p.target.value))},disabled:!Te,readOnly:Te,required:!1}),Te&&m.jsx("small",{children:"Auto TVA France (20%)."})]}),m.jsxs("label",{children:["Cout frais de port HT (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.shipping_real,onChange:p=>{const b=$n(p.target.value);st(E=>({...E,shipping_real:b,shipping_real_ttc:mt(E.customer_country)?tt(b):E.shipping_real_ttc}))},required:!0})]}),m.jsxs("label",{children:["Cout frais de port TTC (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:Te?Uu??"":Z.shipping_real_ttc??"",onChange:p=>{Te||Rt("shipping_real_ttc",ih(p.target.value))},disabled:!Te,readOnly:Te,required:!1}),Te&&m.jsx("small",{children:"Auto TVA France (20%)."})]})]}),m.jsxs("div",{className:"sm-metric-grid",children:[m.jsxs("p",{children:[m.jsx("span",{children:"Total HT"}),m.jsx("strong",{children:Se(Pt.sell_total_ht)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Valeur TX"}),m.jsx("strong",{children:Se(Pt.transaction_value)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Commission"}),m.jsxs("strong",{children:[Se(Pt.commission_eur)," (",Pt.commission_rate_display,")"]})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Frais paiement"}),m.jsx("strong",{children:Se(Pt.payment_fee)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Net recu"}),m.jsx("strong",{children:Se(Pt.net_received)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Cout total"}),m.jsx("strong",{children:Se(Pt.total_cost)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Marge brute"}),m.jsx("strong",{children:Se(Pt.gross_margin)})]}),m.jsxs("p",{children:[m.jsx("span",{children:"Marge nette"}),m.jsxs("strong",{className:Pt.net_margin>=0?"ok":"ko",children:[Se(Pt.net_margin)," (",yu(Pt.net_margin_pct),")"]})]})]}),m.jsxs("div",{className:"sm-attachments",children:[m.jsxs("div",{className:"sm-attach-head",children:[m.jsx("span",{children:"Pieces jointes"}),m.jsx("input",{type:"file",multiple:!0,onChange:p=>{Mu(p.target.files),p.currentTarget.value=""}})]}),Z.attachments.length===0?m.jsx("p",{className:"sm-muted",children:"Aucune PJ."}):Z.attachments.map(p=>m.jsxs("div",{className:"sm-attach-row",children:[m.jsxs("span",{children:[p.name," (",Math.round(p.size/1024)," KB)"]}),m.jsxs("div",{children:[m.jsx("button",{type:"button",onClick:()=>Pr(p),children:"Voir"}),m.jsx("button",{type:"button",onClick:()=>vu(p),children:"Download"}),m.jsx("button",{type:"button",onClick:()=>Ns(p.id),children:"Supprimer"})]})]},p.id))]}),m.jsxs("div",{className:"sm-modal-actions",children:[m.jsx("button",{type:"button",className:"sm-btn",onClick:Qr,children:"Annuler"}),m.jsx("button",{type:"submit",className:"sm-primary-btn",children:cn?"Enregistrer":"Ajouter"})]})]})}),Xt&&M&&m.jsx("div",{className:"sm-modal-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("form",{className:"sm-modal",onSubmit:Xr,children:[m.jsxs("div",{className:"sm-modal-head",children:[m.jsx("h3",{children:"Editer commande"}),m.jsx("button",{type:"button",className:"sm-close",onClick:zn,children:""})]}),m.jsxs("div",{className:"sm-form-grid",children:[m.jsxs("label",{children:["Date",m.jsx("input",{type:"date",value:M.date,onChange:p=>Ve("date",p.target.value),required:!0})]}),m.jsxs("label",{children:["Client",m.jsx("input",{type:"text",value:M.client_or_tx,onChange:p=>Ve("client_or_tx",p.target.value),required:!0})]}),m.jsxs("label",{children:["Transaction #",m.jsx("input",{type:"text",value:M.transaction_ref,onChange:p=>Ve("transaction_ref",p.target.value),required:!0})]}),m.jsxs("label",{children:["Pays client",m.jsxs("select",{value:M.customer_country,onChange:p=>Ve("customer_country",p.target.value),required:!0,children:[m.jsx("option",{value:xu,disabled:!0,children:"Selectionner un pays"}),zp.map(p=>m.jsxs("option",{value:p,children:[sh(p)," ",p]},p))]})]}),m.jsxs("label",{children:["Canal",m.jsx("select",{value:M.channel,onChange:p=>{const b=p.target.value;ne(E=>E&&{...E,channel:b,lines:E.lines.map(D=>({...D,power_wp:la(b,D.category)?D.power_wp:null}))})},children:fu.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("label",{children:["Paiement",m.jsx("select",{value:M.payment_method,onChange:p=>Ve("payment_method",p.target.value),children:Mp.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("label",{children:["Prix transport commande HT (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:M.shipping_charged_order,onChange:p=>Ve("shipping_charged_order",$n(p.target.value)),required:!0})]}),m.jsxs("label",{children:["Cout transport commande HT (EUR)",m.jsx("input",{type:"number",min:"0",step:"0.01",value:M.shipping_real_order,onChange:p=>Ve("shipping_real_order",$n(p.target.value)),required:!0})]})]}),m.jsx("p",{className:"sm-footnote",children:"France: TTC applique automatiquement (TVA 20%) a partir des montants HT."}),m.jsx("p",{className:"sm-footnote",children:"PA unit = prix achat unitaire EUR (auto catalogue si la reference est reconnue)."}),m.jsx("p",{className:"sm-footnote",children:"Les transports sont saisis au niveau commande puis repartis automatiquement sur les lignes pour le calcul."}),m.jsx("div",{className:"sm-toolbar",children:m.jsx("button",{type:"button",className:"sm-btn",onClick:Kr,children:"+ Ajouter produit"})}),wn&&m.jsxs("div",{className:"sm-order-summary",children:[m.jsxs("div",{children:[m.jsx("p",{children:"Total HT lignes"}),m.jsx("strong",{children:Se(ve(wn.sell_total_ht))})]}),m.jsxs("div",{children:[m.jsx("p",{children:"Valeur TX (HT + port)"}),m.jsx("strong",{children:Se(ve(wn.transaction_value))})]}),m.jsxs("div",{children:[m.jsx("p",{children:"Fees Platform / Stripe"}),m.jsxs("strong",{children:[Se(ve(wn.commission_eur))," / ",Se(ve(wn.payment_fee))]})]}),m.jsxs("div",{children:[m.jsx("p",{children:"Net recu / Marge nette"}),m.jsxs("strong",{className:wn.net_margin>=0?"ok":"ko",children:[Se(ve(wn.net_received))," / ",Se(ve(wn.net_margin))]})]})]}),m.jsxs("div",{className:"sm-table-wrap sm-order-lines-wrap",children:[m.jsxs("table",{className:"sm-table sm-order-lines-table",children:[m.jsxs("colgroup",{children:[m.jsx("col",{className:"sm-col-product"}),m.jsx("col",{className:"sm-col-category"}),m.jsx("col",{className:"sm-col-qty"}),m.jsx("col",{className:"sm-col-pa"}),m.jsx("col",{className:"sm-col-pv-ht"}),m.jsx("col",{className:"sm-col-pv-ttc"}),m.jsx("col",{className:"sm-col-action"})]}),m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Produit"}),m.jsx("th",{children:"Categorie"}),m.jsx("th",{className:"sm-num",children:"Qte"}),m.jsx("th",{className:"sm-num",children:"PA unit (achat)"}),m.jsx("th",{className:"sm-num",children:"PV unit HT (vente)"}),m.jsx("th",{className:"sm-num",children:"PV unit TTC"}),m.jsx("th",{children:"Action"})]})}),m.jsx("tbody",{children:M.lines.map(p=>{const b=p.product_ref.trim(),E=on.get(b)??null,D=E?y[E.ref]??E.initial_stock:null,G=E?`Auto: ${E.category} | PA ${Se(E.buy_price_unit)} | Stock ${D??"-"}`:"Saisir une reference catalogue pour auto-remplir categorie, PA et stock.";return m.jsxs("tr",{children:[m.jsx("td",{"data-label":"Produit",children:m.jsx("input",{type:"text",value:p.product_ref,list:"catalog-products-order",onChange:F=>Du(p.id,F.target.value),placeholder:"Reference",title:G,required:!0})}),m.jsx("td",{"data-label":"Categorie",children:m.jsx("select",{value:p.category,onChange:F=>{const se=F.target.value;_a(p.id,"category",se),la(M.channel,se)||_a(p.id,"power_wp",null)},children:mu.map(F=>m.jsx("option",{value:F,children:F},F))})}),m.jsx("td",{className:"sm-num","data-label":"Qte",children:m.jsx("input",{type:"number",min:"1",value:p.quantity,onChange:F=>_a(p.id,"quantity",Math.max(1,$n(F.target.value))),required:!0})}),m.jsx("td",{className:"sm-num","data-label":"PA unit (achat)",children:m.jsx("input",{type:"number",min:"0",step:"0.01",value:p.buy_price_unit,onChange:F=>_a(p.id,"buy_price_unit",$n(F.target.value)),title:"PA unit = prix d achat unitaire EUR.",required:!0})}),m.jsx("td",{className:"sm-num","data-label":"PV unit HT (vente)",children:m.jsx("input",{type:"number",min:"0",step:"0.01",value:p.sell_price_unit_ht,onChange:F=>_a(p.id,"sell_price_unit_ht",$n(F.target.value)),required:!0})}),m.jsx("td",{className:"sm-num","data-label":"PV unit TTC",children:m.jsx("span",{className:"sm-readonly-cell",children:mt(M.customer_country)?Se(tt(p.sell_price_unit_ht)):"-"})}),m.jsx("td",{"data-label":"Action",children:m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>Yr(p.id),children:"Supprimer"})})]},p.id)})})]}),m.jsx("datalist",{id:"catalog-products-order",children:Dn.map(p=>m.jsx("option",{value:p.ref},p.ref))})]}),m.jsxs("div",{className:"sm-attachments",children:[m.jsxs("div",{className:"sm-attach-head",children:[m.jsx("span",{children:"Pieces jointes commande"}),m.jsxs("label",{className:"sm-btn",children:["+ Ajouter",m.jsx("input",{type:"file",multiple:!0,className:"sm-hidden",onChange:p=>{Jr(p.target.files),p.currentTarget.value=""}})]})]}),M.attachments.length===0?m.jsx("p",{className:"sm-muted",children:"Aucune PJ."}):M.attachments.map(p=>m.jsxs("div",{className:"sm-attach-row",children:[m.jsxs("span",{children:[p.name," (",Math.round(p.size/1024)," KB)"]}),m.jsxs("div",{children:[m.jsx("button",{type:"button",onClick:()=>Pr(p),children:"Voir"}),m.jsx("button",{type:"button",onClick:()=>vu(p),children:"Download"}),m.jsx("button",{type:"button",onClick:()=>Ui(p.id),children:"Supprimer"})]})]},p.id))]}),m.jsxs("div",{className:"sm-modal-actions",children:[m.jsx("button",{type:"button",className:"sm-btn",onClick:zn,children:"Annuler"}),m.jsx("button",{type:"submit",className:"sm-primary-btn",children:"Enregistrer commande"})]})]})}),pe&&A&&m.jsx("div",{className:"sm-modal-overlay sm-preview-overlay",role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:"sm-modal sm-preview-modal",children:[m.jsxs("div",{className:"sm-modal-head",children:[m.jsx("h3",{children:pe.name}),m.jsx("button",{type:"button",className:"sm-close",onClick:Nt,children:""})]}),m.jsxs("div",{className:"sm-preview-content",children:[Vp(pe)&&m.jsx("img",{src:A,alt:pe.name,className:"sm-preview-media"}),Gp(pe)&&m.jsx("object",{data:A,type:"application/pdf",className:"sm-preview-media",children:m.jsx("iframe",{src:A,title:pe.name,className:"sm-preview-media"})}),!Vp(pe)&&!Gp(pe)&&m.jsxs("div",{className:"sm-preview-fallback",children:[m.jsx("p",{children:"Previsualisation indisponible pour ce format."}),m.jsx("button",{type:"button",className:"sm-btn",onClick:()=>vu(pe),children:"Download"})]})]}),m.jsxs("div",{className:"sm-modal-actions",children:[m.jsx("button",{type:"button",className:"sm-btn",onClick:Nt,children:"Fermer"}),m.jsx("button",{type:"button",className:"sm-primary-btn",onClick:()=>vu(pe),children:"Download"})]})]})}),J&&m.jsx("div",{className:"sm-modal-overlay sm-confirm-overlay",role:"dialog","aria-modal":"true",onClick:En,children:m.jsxs("div",{className:`sm-modal sm-confirm-modal sm-confirm-${J.tone}`,onClick:p=>p.stopPropagation(),children:[m.jsxs("div",{className:"sm-confirm-headline",children:[m.jsx("span",{className:`sm-confirm-icon sm-confirm-icon-${J.tone}`,"aria-hidden":"true",children:Kp[J.tone].icon}),m.jsxs("div",{children:[m.jsx("h3",{children:J.title}),m.jsx("p",{className:"sm-confirm-subtitle",children:Kp[J.tone].subtitle})]}),m.jsx("button",{type:"button",className:"sm-close",onClick:En,children:""})]}),m.jsx("p",{className:"sm-confirm-message",children:J.message}),m.jsxs("div",{className:"sm-modal-actions",children:[m.jsx("button",{type:"button",className:"sm-btn",onClick:En,children:"Annuler"}),m.jsx("button",{type:"button",className:J.tone==="danger"?"sm-danger-btn":"sm-primary-btn",onClick:va,children:J.confirmLabel})]})]})})]})}function eS(){return m.jsx(Fb,{})}C_.createRoot(document.getElementById("root")).render(m.jsx(eS,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{const s="/huawei-sales-margin-tracker/sw.js",a=l=>{l.waiting&&l.waiting.postMessage({type:"SKIP_WAITING"})},r=()=>{window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",r,{once:!0}),navigator.serviceWorker.register(s).then(l=>{l.addEventListener("updatefound",()=>{const c=l.installing;c&&c.addEventListener("statechange",()=>{c.state==="installed"&&navigator.serviceWorker.controller&&a(l)})}),a(l),l.update()}).catch(()=>{})});
